(function(Ce,We){typeof exports=="object"&&typeof module<"u"?We(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],We):(Ce=typeof globalThis<"u"?globalThis:Ce||self,We(Ce["@puzzlehq/sdk"]={},Ce.React))})(this,function(Ce,We){"use strict";var Kt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function po(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var go={exports:{}},ai={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sl;function c0(){if(sl)return ai;sl=1;var t=We,e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,d){var h,f={},m=null,w=null;d!==void 0&&(m=""+d),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(w=c.ref);for(h in c)n.call(c,h)&&!s.hasOwnProperty(h)&&(f[h]=c[h]);if(a&&a.defaultProps)for(h in c=a.defaultProps,c)f[h]===void 0&&(f[h]=c[h]);return{$$typeof:e,type:a,key:m,ref:w,props:f,_owner:i.current}}return ai.Fragment=r,ai.jsx=o,ai.jsxs=o,ai}var ci={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ol;function l0(){return ol||(ol=1,process.env.NODE_ENV!=="production"&&function(){var t=We,e=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),b=Symbol.iterator,_="@@iterator";function I(D){if(D===null||typeof D!="object")return null;var k=b&&D[b]||D[_];return typeof k=="function"?k:null}var A=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function v(D){{for(var k=arguments.length,Z=new Array(k>1?k-1:0),ae=1;ae<k;ae++)Z[ae-1]=arguments[ae];S("error",D,Z)}}function S(D,k,Z){{var ae=A.ReactDebugCurrentFrame,Fe=ae.getStackAddendum();Fe!==""&&(k+="%s",Z=Z.concat([Fe]));var Ae=Z.map(function(Te){return String(Te)});Ae.unshift("Warning: "+k),Function.prototype.apply.call(console[D],console,Ae)}}var y=!1,x=!1,p=!1,l=!1,g=!1,M;M=Symbol.for("react.module.reference");function L(D){return!!(typeof D=="string"||typeof D=="function"||D===n||D===s||g||D===i||D===d||D===h||l||D===w||y||x||p||typeof D=="object"&&D!==null&&(D.$$typeof===m||D.$$typeof===f||D.$$typeof===o||D.$$typeof===a||D.$$typeof===c||D.$$typeof===M||D.getModuleId!==void 0))}function U(D,k,Z){var ae=D.displayName;if(ae)return ae;var Fe=k.displayName||k.name||"";return Fe!==""?Z+"("+Fe+")":Z}function F(D){return D.displayName||"Context"}function j(D){if(D==null)return null;if(typeof D.tag=="number"&&v("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof D=="function")return D.displayName||D.name||null;if(typeof D=="string")return D;switch(D){case n:return"Fragment";case r:return"Portal";case s:return"Profiler";case i:return"StrictMode";case d:return"Suspense";case h:return"SuspenseList"}if(typeof D=="object")switch(D.$$typeof){case a:var k=D;return F(k)+".Consumer";case o:var Z=D;return F(Z._context)+".Provider";case c:return U(D,D.render,"ForwardRef");case f:var ae=D.displayName||null;return ae!==null?ae:j(D.type)||"Memo";case m:{var Fe=D,Ae=Fe._payload,Te=Fe._init;try{return j(Te(Ae))}catch{return null}}}return null}var C=Object.assign,R=0,G,W,z,V,B,q,ce;function K(){}K.__reactDisabledLog=!0;function se(){{if(R===0){G=console.log,W=console.info,z=console.warn,V=console.error,B=console.group,q=console.groupCollapsed,ce=console.groupEnd;var D={configurable:!0,enumerable:!0,value:K,writable:!0};Object.defineProperties(console,{info:D,log:D,warn:D,error:D,group:D,groupCollapsed:D,groupEnd:D})}R++}}function ee(){{if(R--,R===0){var D={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:C({},D,{value:G}),info:C({},D,{value:W}),warn:C({},D,{value:z}),error:C({},D,{value:V}),group:C({},D,{value:B}),groupCollapsed:C({},D,{value:q}),groupEnd:C({},D,{value:ce})})}R<0&&v("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ie=A.ReactCurrentDispatcher,N;function P(D,k,Z){{if(N===void 0)try{throw Error()}catch(Fe){var ae=Fe.stack.trim().match(/\n( *(at )?)/);N=ae&&ae[1]||""}return`
`+N+D}}var $=!1,u;{var O=typeof WeakMap=="function"?WeakMap:Map;u=new O}function Y(D,k){if(!D||$)return"";{var Z=u.get(D);if(Z!==void 0)return Z}var ae;$=!0;var Fe=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Ae;Ae=ie.current,ie.current=null,se();try{if(k){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(fr){ae=fr}Reflect.construct(D,[],Te)}else{try{Te.call()}catch(fr){ae=fr}D.call(Te.prototype)}}else{try{throw Error()}catch(fr){ae=fr}D()}}catch(fr){if(fr&&ae&&typeof fr.stack=="string"){for(var De=fr.stack.split(`
`),$t=ae.stack.split(`
`),rt=De.length-1,lt=$t.length-1;rt>=1&&lt>=0&&De[rt]!==$t[lt];)lt--;for(;rt>=1&&lt>=0;rt--,lt--)if(De[rt]!==$t[lt]){if(rt!==1||lt!==1)do if(rt--,lt--,lt<0||De[rt]!==$t[lt]){var vt=`
`+De[rt].replace(" at new "," at ");return D.displayName&&vt.includes("<anonymous>")&&(vt=vt.replace("<anonymous>",D.displayName)),typeof D=="function"&&u.set(D,vt),vt}while(rt>=1&&lt>=0);break}}}finally{$=!1,ie.current=Ae,ee(),Error.prepareStackTrace=Fe}var Zr=D?D.displayName||D.name:"",oo=Zr?P(Zr):"";return typeof D=="function"&&u.set(D,oo),oo}function Q(D,k,Z){return Y(D,!1)}function Ee(D){var k=D.prototype;return!!(k&&k.isReactComponent)}function Se(D,k,Z){if(D==null)return"";if(typeof D=="function")return Y(D,Ee(D));if(typeof D=="string")return P(D);switch(D){case d:return P("Suspense");case h:return P("SuspenseList")}if(typeof D=="object")switch(D.$$typeof){case c:return Q(D.render);case f:return Se(D.type,k,Z);case m:{var ae=D,Fe=ae._payload,Ae=ae._init;try{return Se(Ae(Fe),k,Z)}catch{}}}return""}var me=Object.prototype.hasOwnProperty,Ne={},Xe=A.ReactDebugCurrentFrame;function Ve(D){if(D){var k=D._owner,Z=Se(D.type,D._source,k?k.type:null);Xe.setExtraStackFrame(Z)}else Xe.setExtraStackFrame(null)}function $e(D,k,Z,ae,Fe){{var Ae=Function.call.bind(me);for(var Te in D)if(Ae(D,Te)){var De=void 0;try{if(typeof D[Te]!="function"){var $t=Error((ae||"React class")+": "+Z+" type `"+Te+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof D[Te]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw $t.name="Invariant Violation",$t}De=D[Te](k,Te,ae,Z,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(rt){De=rt}De&&!(De instanceof Error)&&(Ve(Fe),v("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",ae||"React class",Z,Te,typeof De),Ve(null)),De instanceof Error&&!(De.message in Ne)&&(Ne[De.message]=!0,Ve(Fe),v("Failed %s type: %s",Z,De.message),Ve(null))}}}var Oe=Array.isArray;function ye(D){return Oe(D)}function ve(D){{var k=typeof Symbol=="function"&&Symbol.toStringTag,Z=k&&D[Symbol.toStringTag]||D.constructor.name||"Object";return Z}}function we(D){try{return fe(D),!1}catch{return!0}}function fe(D){return""+D}function he(D){if(we(D))return v("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",ve(D)),fe(D)}var oe=A.ReactCurrentOwner,be={key:!0,ref:!0,__self:!0,__source:!0},xe,le,Ie;Ie={};function Le(D){if(me.call(D,"ref")){var k=Object.getOwnPropertyDescriptor(D,"ref").get;if(k&&k.isReactWarning)return!1}return D.ref!==void 0}function je(D){if(me.call(D,"key")){var k=Object.getOwnPropertyDescriptor(D,"key").get;if(k&&k.isReactWarning)return!1}return D.key!==void 0}function ke(D,k){if(typeof D.ref=="string"&&oe.current&&k&&oe.current.stateNode!==k){var Z=j(oe.current.type);Ie[Z]||(v('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',j(oe.current.type),D.ref),Ie[Z]=!0)}}function Ue(D,k){{var Z=function(){xe||(xe=!0,v("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",k))};Z.isReactWarning=!0,Object.defineProperty(D,"key",{get:Z,configurable:!0})}}function Qt(D,k){{var Z=function(){le||(le=!0,v("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",k))};Z.isReactWarning=!0,Object.defineProperty(D,"ref",{get:Z,configurable:!0})}}var or=function(D,k,Z,ae,Fe,Ae,Te){var De={$$typeof:e,type:D,key:k,ref:Z,props:Te,_owner:Ae};return De._store={},Object.defineProperty(De._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(De,"_self",{configurable:!1,enumerable:!1,writable:!1,value:ae}),Object.defineProperty(De,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Fe}),Object.freeze&&(Object.freeze(De.props),Object.freeze(De)),De};function xr(D,k,Z,ae,Fe){{var Ae,Te={},De=null,$t=null;Z!==void 0&&(he(Z),De=""+Z),je(k)&&(he(k.key),De=""+k.key),Le(k)&&($t=k.ref,ke(k,Fe));for(Ae in k)me.call(k,Ae)&&!be.hasOwnProperty(Ae)&&(Te[Ae]=k[Ae]);if(D&&D.defaultProps){var rt=D.defaultProps;for(Ae in rt)Te[Ae]===void 0&&(Te[Ae]=rt[Ae])}if(De||$t){var lt=typeof D=="function"?D.displayName||D.name||"Unknown":D;De&&Ue(Te,lt),$t&&Qt(Te,lt)}return or(D,De,$t,Fe,ae,oe.current,Te)}}var At=A.ReactCurrentOwner,Dr=A.ReactDebugCurrentFrame;function ar(D){if(D){var k=D._owner,Z=Se(D.type,D._source,k?k.type:null);Dr.setExtraStackFrame(Z)}else Dr.setExtraStackFrame(null)}var Jr;Jr=!1;function Qe(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function Ge(){{if(At.current){var D=j(At.current.type);if(D)return`

Check the render method of \``+D+"`."}return""}}function ot(D){{if(D!==void 0){var k=D.fileName.replace(/^.*[\\\/]/,""),Z=D.lineNumber;return`

Check your code at `+k+":"+Z+"."}return""}}var tt={};function at(D){{var k=Ge();if(!k){var Z=typeof D=="string"?D:D.displayName||D.name;Z&&(k=`

Check the top-level render call using <`+Z+">.")}return k}}function Ye(D,k){{if(!D._store||D._store.validated||D.key!=null)return;D._store.validated=!0;var Z=at(k);if(tt[Z])return;tt[Z]=!0;var ae="";D&&D._owner&&D._owner!==At.current&&(ae=" It was passed a child from "+j(D._owner.type)+"."),ar(D),v('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Z,ae),ar(null)}}function dt(D,k){{if(typeof D!="object")return;if(ye(D))for(var Z=0;Z<D.length;Z++){var ae=D[Z];Qe(ae)&&Ye(ae,k)}else if(Qe(D))D._store&&(D._store.validated=!0);else if(D){var Fe=I(D);if(typeof Fe=="function"&&Fe!==D.entries)for(var Ae=Fe.call(D),Te;!(Te=Ae.next()).done;)Qe(Te.value)&&Ye(Te.value,k)}}}function mt(D){{var k=D.type;if(k==null||typeof k=="string")return;var Z;if(typeof k=="function")Z=k.propTypes;else if(typeof k=="object"&&(k.$$typeof===c||k.$$typeof===f))Z=k.propTypes;else return;if(Z){var ae=j(k);$e(Z,D.props,"prop",ae,D)}else if(k.PropTypes!==void 0&&!Jr){Jr=!0;var Fe=j(k);v("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Fe||"Unknown")}typeof k.getDefaultProps=="function"&&!k.getDefaultProps.isReactClassApproved&&v("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function yt(D){{for(var k=Object.keys(D.props),Z=0;Z<k.length;Z++){var ae=k[Z];if(ae!=="children"&&ae!=="key"){ar(D),v("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",ae),ar(null);break}}D.ref!==null&&(ar(D),v("Invalid attribute `ref` supplied to `React.Fragment`."),ar(null))}}function ft(D,k,Z,ae,Fe,Ae){{var Te=L(D);if(!Te){var De="";(D===void 0||typeof D=="object"&&D!==null&&Object.keys(D).length===0)&&(De+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var $t=ot(Fe);$t?De+=$t:De+=Ge();var rt;D===null?rt="null":ye(D)?rt="array":D!==void 0&&D.$$typeof===e?(rt="<"+(j(D.type)||"Unknown")+" />",De=" Did you accidentally export a JSX literal instead of a component?"):rt=typeof D,v("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",rt,De)}var lt=xr(D,k,Z,Fe,Ae);if(lt==null)return lt;if(Te){var vt=k.children;if(vt!==void 0)if(ae)if(ye(vt)){for(var Zr=0;Zr<vt.length;Zr++)dt(vt[Zr],D);Object.freeze&&Object.freeze(vt)}else v("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else dt(vt,D)}return D===n?yt(lt):mt(lt),lt}}function wt(D,k,Z){return ft(D,k,Z,!0)}function pt(D,k,Z){return ft(D,k,Z,!1)}var ct=pt,Ke=wt;ci.Fragment=n,ci.jsx=ct,ci.jsxs=Ke}()),ci}process.env.NODE_ENV==="production"?go.exports=c0():go.exports=l0();var mo=go.exports;const u0=Symbol(),al=Object.getPrototypeOf,yo=new WeakMap,h0=t=>t&&(yo.has(t)?yo.get(t):al(t)===Object.prototype||al(t)===Array.prototype),d0=t=>h0(t)&&t[u0]||null,cl=(t,e=!0)=>{yo.set(t,e)},wo=t=>typeof t=="object"&&t!==null,Nr=new WeakMap,ns=new WeakSet,f0=(t=Object.is,e=(h,f)=>new Proxy(h,f),r=h=>wo(h)&&!ns.has(h)&&(Array.isArray(h)||!(Symbol.iterator in h))&&!(h instanceof WeakMap)&&!(h instanceof WeakSet)&&!(h instanceof Error)&&!(h instanceof Number)&&!(h instanceof Date)&&!(h instanceof String)&&!(h instanceof RegExp)&&!(h instanceof ArrayBuffer),n=h=>h.configurable&&h.enumerable&&h.writable,i=h=>{switch(h.status){case"fulfilled":return h.value;case"rejected":throw h.reason;default:throw h}},s=new WeakMap,o=(h,f,m=i)=>{const w=s.get(h);if((w==null?void 0:w[0])===f)return w[1];const b=Array.isArray(h)?[]:Object.create(Object.getPrototypeOf(h));return cl(b,!0),s.set(h,[f,b]),Reflect.ownKeys(h).forEach(_=>{if(Object.getOwnPropertyDescriptor(b,_))return;const I=Reflect.get(h,_),A={value:I,enumerable:!0,configurable:!0};if(ns.has(I))cl(I,!1);else if(I instanceof Promise)delete A.value,A.get=()=>m(I);else if(Nr.has(I)){const[v,S]=Nr.get(I);A.value=o(v,S(),m)}Object.defineProperty(b,_,A)}),Object.preventExtensions(b)},a=new WeakMap,c=[1,1],d=h=>{if(!wo(h))throw new Error("object required");const f=a.get(h);if(f)return f;let m=c[0];const w=new Set,b=(U,F=++c[0])=>{m!==F&&(m=F,w.forEach(j=>j(U,F)))};let _=c[1];const I=(U=++c[1])=>(_!==U&&!w.size&&(_=U,v.forEach(([F])=>{const j=F[1](U);j>m&&(m=j)})),m),A=U=>(F,j)=>{const C=[...F];C[1]=[U,...C[1]],b(C,j)},v=new Map,S=(U,F)=>{if(w.size){const j=F[3](A(U));v.set(U,[F,j])}else v.set(U,[F])},y=U=>{var F;const j=v.get(U);j&&(v.delete(U),(F=j[1])==null||F.call(j))},x=U=>(w.add(U),w.size===1&&v.forEach(([j,C],R)=>{const G=j[3](A(R));v.set(R,[j,G])}),()=>{w.delete(U),w.size===0&&v.forEach(([j,C],R)=>{C&&(C(),v.set(R,[j]))})}),p=Array.isArray(h)?[]:Object.create(Object.getPrototypeOf(h)),l=(U,F,j,C,R)=>{if(U&&(t(F,C)||a.has(C)&&t(F,a.get(C))))return;y(j),wo(C)&&(C=d0(C)||C);let G=C;if(C instanceof Promise)C.then(W=>{C.status="fulfilled",C.value=W,b(["resolve",[j],W])}).catch(W=>{C.status="rejected",C.reason=W,b(["reject",[j],W])});else{!Nr.has(C)&&r(C)&&(G=d(C));const W=!ns.has(G)&&Nr.get(G);W&&S(j,W)}R(G),b(["set",[j],C,F])},M=e(p,{deleteProperty(U,F){const j=Reflect.get(U,F);y(F);const C=Reflect.deleteProperty(U,F);return C&&b(["delete",[F],j]),C},set(U,F,j,C){const R=Reflect.has(U,F),G=Reflect.get(U,F,C);return l(R,G,F,j,W=>{Reflect.set(U,F,W,C)}),!0},defineProperty(U,F,j){if(n(j)){const C=Reflect.getOwnPropertyDescriptor(U,F);if(!C||n(C))return l(!!C&&"value"in C,C==null?void 0:C.value,F,j.value,R=>{Reflect.defineProperty(U,F,{...j,value:R})}),!0}return Reflect.defineProperty(U,F,j)}});a.set(h,M);const L=[p,I,o,x];return Nr.set(M,L),Reflect.ownKeys(h).forEach(U=>{const F=Object.getOwnPropertyDescriptor(h,U);"value"in F&&(M[U]=h[U],delete F.value,delete F.writable),Object.defineProperty(p,U,F)}),M})=>[d,Nr,ns,t,e,r,n,i,s,o,a,c],[p0]=f0();function Lr(t={}){return p0(t)}function tn(t,e,r){const n=Nr.get(t);let i;const s=[],o=n[3];let a=!1;const d=o(h=>{if(s.push(h),r){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,d()}}function g0(t,e){const r=Nr.get(t),[n,i,s]=r;return s(n,i(),e)}const Et=Lr({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),et={state:Et,subscribe(t){return tn(Et,()=>t(Et))},push(t,e){t!==Et.view&&(Et.view=t,e&&(Et.data=e),Et.history.push(t))},reset(t){Et.view=t,Et.history=[t]},replace(t){Et.history.length>1&&(Et.history[Et.history.length-1]=t,Et.view=t)},goBack(){if(Et.history.length>1){Et.history.pop();const[t]=Et.history.slice(-1);Et.view=t}},setData(t){Et.data=t}},ne={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return ne.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return ne.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if(ne.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let n=t;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},formatUniversalUrl(t,e,r){if(!ne.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let n=t;n.endsWith("/")||(n=`${n}/`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(e);return`${n}wc?uri=${i}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(ne.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(ne.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(ne.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(ne.WCM_VERSION,"2.6.1")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=et.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},m0=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),Rt=Lr({enabled:m0,userSessionId:"",events:[],connectedWalletId:void 0}),ll={state:Rt,subscribe(t){return tn(Rt.events,()=>t(g0(Rt.events[Rt.events.length-1])))},initialize(){Rt.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(Rt.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){Rt.connectedWalletId=t},click(t){if(Rt.enabled){const e={type:"CLICK",name:t.name,userSessionId:Rt.userSessionId,timestamp:Date.now(),data:t};Rt.events.push(e)}},track(t){if(Rt.enabled){const e={type:"TRACK",name:t.name,userSessionId:Rt.userSessionId,timestamp:Date.now(),data:t};Rt.events.push(e)}},view(t){if(Rt.enabled){const e={type:"VIEW",name:t.name,userSessionId:Rt.userSessionId,timestamp:Date.now(),data:t};Rt.events.push(e)}}},gr=Lr({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),ht={state:gr,subscribe(t){return tn(gr,()=>t(gr))},setChains(t){gr.chains=t},setWalletConnectUri(t){gr.walletConnectUri=t},setIsCustomDesktop(t){gr.isCustomDesktop=t},setIsCustomMobile(t){gr.isCustomMobile=t},setIsDataLoaded(t){gr.isDataLoaded=t},setIsUiLoaded(t){gr.isUiLoaded=t},setIsAuth(t){gr.isAuth=t}},is=Lr({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Gt={state:is,subscribe(t){return tn(is,()=>t(is))},setConfig(t){var e,r;ll.initialize(),ht.setChains(t.chains),ht.setIsAuth(!!t.enableAuthMode),ht.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),ht.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),ne.setModalVersionInStorage(),Object.assign(is,t)}};var y0=Object.defineProperty,ul=Object.getOwnPropertySymbols,w0=Object.prototype.hasOwnProperty,v0=Object.prototype.propertyIsEnumerable,hl=(t,e,r)=>e in t?y0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,b0=(t,e)=>{for(var r in e||(e={}))w0.call(e,r)&&hl(t,r,e[r]);if(ul)for(var r of ul(e))v0.call(e,r)&&hl(t,r,e[r]);return t};const vo="https://explorer-api.walletconnect.com",bo="wcm",_o="js-2.6.1";async function ss(t,e){const r=b0({sdkType:bo,sdkVersion:_o},e),n=new URL(t,vo);return n.searchParams.append("projectId",Gt.state.projectId),Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,String(s))}),(await fetch(n)).json()}const rn={async getDesktopListings(t){return ss("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return ss("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return ss("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return ss("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${vo}/w3m/v1/getWalletImage/${t}?projectId=${Gt.state.projectId}&sdkType=${bo}&sdkVersion=${_o}`},getAssetImageUrl(t){return`${vo}/w3m/v1/getAssetImage/${t}?projectId=${Gt.state.projectId}&sdkType=${bo}&sdkVersion=${_o}`}};var _0=Object.defineProperty,dl=Object.getOwnPropertySymbols,E0=Object.prototype.hasOwnProperty,S0=Object.prototype.propertyIsEnumerable,fl=(t,e,r)=>e in t?_0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,x0=(t,e)=>{for(var r in e||(e={}))E0.call(e,r)&&fl(t,r,e[r]);if(dl)for(var r of dl(e))S0.call(e,r)&&fl(t,r,e[r]);return t};const pl=ne.isMobile(),mr=Lr({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),Wt={state:mr,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=Gt.state;if(t==="NONE"||e==="ALL"&&!t)return mr.recomendedWallets;if(ne.isArray(t)){const r={recommendedIds:t.join(",")},{listings:n}=await rn.getAllListings(r),i=Object.values(n);i.sort((s,o)=>{const a=t.indexOf(s.id),c=t.indexOf(o.id);return a-c}),mr.recomendedWallets=i}else{const{chains:r,isAuth:n}=ht.state,i=r==null?void 0:r.join(","),s=ne.isArray(e),o={page:1,sdks:n?"auth_v1":void 0,entries:ne.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:s?e.join(","):void 0},{listings:a}=pl?await rn.getMobileListings(o):await rn.getDesktopListings(o);mr.recomendedWallets=Object.values(a)}return mr.recomendedWallets},async getWallets(t){const e=x0({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=Gt.state,{recomendedWallets:i}=mr;if(n==="ALL")return mr.wallets;i.length?e.excludedIds=i.map(f=>f.id).join(","):ne.isArray(r)&&(e.excludedIds=r.join(",")),ne.isArray(n)&&(e.excludedIds=[e.excludedIds,n].filter(Boolean).join(",")),ht.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=t,{listings:a,total:c}=pl?await rn.getMobileListings(e):await rn.getDesktopListings(e),d=Object.values(a),h=o?"search":"wallets";return mr[h]={listings:[...mr[h].listings,...d],total:c,page:s??1},{listings:d,total:c}},getWalletImageUrl(t){return rn.getWalletImageUrl(t)},getAssetImageUrl(t){return rn.getAssetImageUrl(t)},resetSearch(){mr.search={listings:[],total:0,page:1}}},An=Lr({open:!1}),nn={state:An,subscribe(t){return tn(An,()=>t(An))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:n}=ht.state;if(ne.removeWalletConnectDeepLink(),ht.setWalletConnectUri(t==null?void 0:t.uri),ht.setChains(t==null?void 0:t.chains),et.reset("ConnectWallet"),r&&n)An.open=!0,e();else{const i=setInterval(()=>{const s=ht.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(i),An.open=!0,e())},200)}})},close(){An.open=!1}};var D0=Object.defineProperty,gl=Object.getOwnPropertySymbols,C0=Object.prototype.hasOwnProperty,O0=Object.prototype.propertyIsEnumerable,ml=(t,e,r)=>e in t?D0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,I0=(t,e)=>{for(var r in e||(e={}))C0.call(e,r)&&ml(t,r,e[r]);if(gl)for(var r of gl(e))O0.call(e,r)&&ml(t,r,e[r]);return t};function A0(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const li=Lr({themeMode:A0()?"dark":"light"}),Mr={state:li,subscribe(t){return tn(li,()=>t(li))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(li.themeMode=e),r&&(li.themeVariables=I0({},r))}},sn=Lr({open:!1,message:"",variant:"success"}),Ur={state:sn,subscribe(t){return tn(sn,()=>t(sn))},openToast(t,e){sn.open=!0,sn.message=t,sn.variant=e},closeToast(){sn.open=!1}};let $0=class{constructor(e){this.openModal=nn.open,this.closeModal=nn.close,this.subscribeModal=nn.subscribe,this.setTheme=Mr.setThemeConfig,Mr.setThemeConfig(e),Gt.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(()=>tE);const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),ht.setIsUiLoaded(!0)}}};var Eo={exports:{}},$n=typeof Reflect=="object"?Reflect:null,yl=$n&&typeof $n.apply=="function"?$n.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},os;$n&&typeof $n.ownKeys=="function"?os=$n.ownKeys:Object.getOwnPropertySymbols?os=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:os=function(e){return Object.getOwnPropertyNames(e)};function T0(t){console&&console.warn&&console.warn(t)}var wl=Number.isNaN||function(e){return e!==e};function He(){He.init.call(this)}Eo.exports=He,Eo.exports.once=L0,He.EventEmitter=He,He.prototype._events=void 0,He.prototype._eventsCount=0,He.prototype._maxListeners=void 0;var vl=10;function as(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(He,"defaultMaxListeners",{enumerable:!0,get:function(){return vl},set:function(t){if(typeof t!="number"||t<0||wl(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");vl=t}}),He.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},He.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||wl(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function bl(t){return t._maxListeners===void 0?He.defaultMaxListeners:t._maxListeners}He.prototype.getMaxListeners=function(){return bl(this)},He.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")yl(c,this,r);else for(var d=c.length,h=Dl(c,d),n=0;n<d;++n)yl(h[n],this,r);return!0};function _l(t,e,r,n){var i,s,o;if(as(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=bl(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,T0(a)}return t}He.prototype.addListener=function(e,r){return _l(this,e,r,!1)},He.prototype.on=He.prototype.addListener,He.prototype.prependListener=function(e,r){return _l(this,e,r,!0)};function R0(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function El(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=R0.bind(n);return i.listener=r,n.wrapFn=i,i}He.prototype.once=function(e,r){return as(r),this.on(e,El(this,e,r)),this},He.prototype.prependOnceListener=function(e,r){return as(r),this.prependListener(e,El(this,e,r)),this},He.prototype.removeListener=function(e,r){var n,i,s,o,a;if(as(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():P0(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},He.prototype.off=He.prototype.removeListener,He.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Sl(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?N0(i):Dl(i,i.length)}He.prototype.listeners=function(e){return Sl(this,e,!0)},He.prototype.rawListeners=function(e){return Sl(this,e,!1)},He.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):xl.call(t,e)},He.prototype.listenerCount=xl;function xl(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}He.prototype.eventNames=function(){return this._eventsCount>0?os(this._events):[]};function Dl(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function P0(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function N0(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function L0(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Cl(t,e,s,{once:!0}),e!=="error"&&M0(t,i,{once:!0})})}function M0(t,e,r){typeof t.on=="function"&&Cl(t,"error",e,r)}function Cl(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ur=Eo.exports;const Ol=rs(ur);var cs={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var So=function(t,e){return So=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},So(t,e)};function U0(t,e){So(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var xo=function(){return xo=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},xo.apply(this,arguments)};function F0(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function j0(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function k0(t,e){return function(r,n){e(r,n,t)}}function B0(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function z0(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((n=n.apply(t,e||[])).next())})}function W0(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(d){return function(h){return c([d,h])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(h){d=[6,h],i=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function H0(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function V0(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Do(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Il(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function q0(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Il(arguments[e]));return t}function K0(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function ui(t){return this instanceof ui?(this.v=t,this):new ui(t)}function G0(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){n[m]&&(i[m]=function(w){return new Promise(function(b,_){s.push([m,w,b,_])>1||a(m,w)})})}function a(m,w){try{c(n[m](w))}catch(b){f(s[0][3],b)}}function c(m){m.value instanceof ui?Promise.resolve(m.value.v).then(d,h):f(s[0][2],m)}function d(m){a("next",m)}function h(m){a("throw",m)}function f(m,w){m(w),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Y0(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:ui(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function J0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Do=="function"?Do(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}function Z0(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function X0(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Q0(t){return t&&t.__esModule?t:{default:t}}function e1(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function t1(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const tr=po(Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return xo},__asyncDelegator:Y0,__asyncGenerator:G0,__asyncValues:J0,__await:ui,__awaiter:z0,__classPrivateFieldGet:e1,__classPrivateFieldSet:t1,__createBinding:H0,__decorate:j0,__exportStar:V0,__extends:U0,__generator:W0,__importDefault:Q0,__importStar:X0,__makeTemplateObject:Z0,__metadata:B0,__param:k0,__read:Il,__rest:F0,__spread:q0,__spreadArrays:K0,__values:Do},Symbol.toStringTag,{value:"Module"})));var hi={};Object.defineProperty(hi,"__esModule",{value:!0});function r1(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}hi.safeJsonParse=r1;function n1(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}hi.safeJsonStringify=n1;var di={exports:{}},Al;function i1(){return Al||(Al=1,function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Kt<"u"&&Kt.localStorage?di.exports=Kt.localStorage:typeof window<"u"&&window.localStorage?di.exports=window.localStorage:di.exports=new e}()),di.exports}var Co={},fi={},$l;function s1(){if($l)return fi;$l=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.IKeyValueStorage=void 0;class t{}return fi.IKeyValueStorage=t,fi}var pi={},Tl;function o1(){if(Tl)return pi;Tl=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.parseEntry=void 0;const t=hi;function e(r){var n;return[r[0],t.safeJsonParse((n=r[1])!==null&&n!==void 0?n:"")]}return pi.parseEntry=e,pi}var Rl;function a1(){return Rl||(Rl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tr;e.__exportStar(s1(),t),e.__exportStar(o1(),t)}(Co)),Co}Object.defineProperty(cs,"__esModule",{value:!0}),cs.KeyValueStorage=void 0;const Tn=tr,Pl=hi,c1=Tn.__importDefault(i1()),l1=a1();class Nl{constructor(){this.localStorage=c1.default}getKeys(){return Tn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Tn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(l1.parseEntry)})}getItem(e){return Tn.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return Pl.safeJsonParse(r)})}setItem(e,r){return Tn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,Pl.safeJsonStringify(r))})}removeItem(e){return Tn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}cs.KeyValueStorage=Nl;var u1=cs.default=Nl,Rn={},gi={},re={},Oo={},mi={},Ll;function h1(){if(Ll)return mi;Ll=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return mi.delay=t,mi}var on={},Io={},an={},Ml;function d1(){return Ml||(Ml=1,Object.defineProperty(an,"__esModule",{value:!0}),an.ONE_THOUSAND=an.ONE_HUNDRED=void 0,an.ONE_HUNDRED=100,an.ONE_THOUSAND=1e3),an}var Ao={},Ul;function f1(){return Ul||(Ul=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Ao)),Ao}var Fl;function jl(){return Fl||(Fl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tr;e.__exportStar(d1(),t),e.__exportStar(f1(),t)}(Io)),Io}var kl;function p1(){if(kl)return on;kl=1,Object.defineProperty(on,"__esModule",{value:!0}),on.fromMiliseconds=on.toMiliseconds=void 0;const t=jl();function e(n){return n*t.ONE_THOUSAND}on.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return on.fromMiliseconds=r,on}var Bl;function g1(){return Bl||(Bl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tr;e.__exportStar(h1(),t),e.__exportStar(p1(),t)}(Oo)),Oo}var Pn={},zl;function m1(){if(zl)return Pn;zl=1,Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Pn.Watch=t,Pn.default=t,Pn}var $o={},yi={},Wl;function y1(){if(Wl)return yi;Wl=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.IWatch=void 0;class t{}return yi.IWatch=t,yi}var Hl;function w1(){return Hl||(Hl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),tr.__exportStar(y1(),t)}($o)),$o}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tr;e.__exportStar(g1(),t),e.__exportStar(m1(),t),e.__exportStar(w1(),t),e.__exportStar(jl(),t)})(re);var To={},wi={};let cn=class{};const v1=po(Object.freeze(Object.defineProperty({__proto__:null,IEvents:cn},Symbol.toStringTag,{value:"Module"})));var Vl;function b1(){if(Vl)return wi;Vl=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.IHeartBeat=void 0;const t=v1;class e extends t.IEvents{constructor(n){super()}}return wi.IHeartBeat=e,wi}var ql;function Kl(){return ql||(ql=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),tr.__exportStar(b1(),t)}(To)),To}var Ro={},ln={},Gl;function _1(){if(Gl)return ln;Gl=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.HEARTBEAT_EVENTS=ln.HEARTBEAT_INTERVAL=void 0;const t=re;return ln.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,ln.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},ln}var Yl;function Jl(){return Yl||(Yl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),tr.__exportStar(_1(),t)}(Ro)),Ro}var Zl;function E1(){if(Zl)return gi;Zl=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.HeartBeat=void 0;const t=tr,e=ur,r=re,n=Kl(),i=Jl();class s extends n.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(a==null?void 0:a.interval)||i.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const c=new s(a);return yield c.init(),c})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,c){this.events.on(a,c)}once(a,c){this.events.once(a,c)}off(a,c){this.events.off(a,c)}removeListener(a,c){this.events.removeListener(a,c)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return gi.HeartBeat=s,gi}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tr;e.__exportStar(E1(),t),e.__exportStar(Kl(),t),e.__exportStar(Jl(),t)})(Rn);var Me={},Po,Xl;function S1(){if(Xl)return Po;Xl=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Po=e;function e(r,n,i){var s=i&&i.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=s(r);for(var d=1;d<a;d++)c[d]=s(n[d]);return c.join(" ")}if(typeof r!="string")return r;var h=n.length;if(h===0)return r;for(var f="",m=1-o,w=-1,b=r&&r.length||0,_=0;_<b;){if(r.charCodeAt(_)===37&&_+1<b){switch(w=w>-1?w:0,r.charCodeAt(_+1)){case 100:case 102:if(m>=h||n[m]==null)break;w<_&&(f+=r.slice(w,_)),f+=Number(n[m]),w=_+2,_++;break;case 105:if(m>=h||n[m]==null)break;w<_&&(f+=r.slice(w,_)),f+=Math.floor(Number(n[m])),w=_+2,_++;break;case 79:case 111:case 106:if(m>=h||n[m]===void 0)break;w<_&&(f+=r.slice(w,_));var I=typeof n[m];if(I==="string"){f+="'"+n[m]+"'",w=_+2,_++;break}if(I==="function"){f+=n[m].name||"<anonymous>",w=_+2,_++;break}f+=s(n[m]),w=_+2,_++;break;case 115:if(m>=h)break;w<_&&(f+=r.slice(w,_)),f+=String(n[m]),w=_+2,_++;break;case 37:w<_&&(f+=r.slice(w,_)),f+="%",w=_+2,_++,m--;break}++m}++_}return w===-1?r:(w<b&&(f+=r.slice(w)),f)}return Po}var No,Ql;function x1(){if(Ql)return No;Ql=1;const t=S1();No=i;const e=x().console||{},r={mapHttpRequest:b,mapHttpResponse:b,wrapRequestSerializer:_,wrapResponseSerializer:_,wrapErrorSerializer:_,req:b,res:b,err:m};function n(p,l){return Array.isArray(p)?p.filter(function(M){return M!=="!stdSerializers.err"}):p===!0?Object.keys(l):!1}function i(p){p=p||{},p.browser=p.browser||{};const l=p.browser.transmit;if(l&&typeof l.send!="function")throw Error("pino: transmit option must have a send function");const g=p.browser.write||e;p.browser.write&&(p.browser.asObject=!0);const M=p.serializers||{},L=n(p.browser.serialize,M);let U=p.browser.serialize;Array.isArray(p.browser.serialize)&&p.browser.serialize.indexOf("!stdSerializers.err")>-1&&(U=!1);const F=["error","fatal","warn","info","debug","trace"];typeof g=="function"&&(g.error=g.fatal=g.warn=g.info=g.debug=g.trace=g),p.enabled===!1&&(p.level="silent");const j=p.level||"info",C=Object.create(g);C.log||(C.log=I),Object.defineProperty(C,"levelVal",{get:G}),Object.defineProperty(C,"level",{get:W,set:z});const R={transmit:l,serialize:L,asObject:p.browser.asObject,levels:F,timestamp:w(p)};C.levels=i.levels,C.level=j,C.setMaxListeners=C.getMaxListeners=C.emit=C.addListener=C.on=C.prependListener=C.once=C.prependOnceListener=C.removeListener=C.removeAllListeners=C.listeners=C.listenerCount=C.eventNames=C.write=C.flush=I,C.serializers=M,C._serialize=L,C._stdErrSerialize=U,C.child=V,l&&(C._logEvent=f());function G(){return this.level==="silent"?1/0:this.levels.values[this.level]}function W(){return this._level}function z(B){if(B!=="silent"&&!this.levels.values[B])throw Error("unknown level "+B);this._level=B,s(R,C,"error","log"),s(R,C,"fatal","error"),s(R,C,"warn","error"),s(R,C,"info","log"),s(R,C,"debug","log"),s(R,C,"trace","log")}function V(B,q){if(!B)throw new Error("missing bindings for child Pino");q=q||{},L&&B.serializers&&(q.serializers=B.serializers);const ce=q.serializers;if(L&&ce){var K=Object.assign({},M,ce),se=p.browser.serialize===!0?Object.keys(K):L;delete B.serializers,c([B],se,K,this._stdErrSerialize)}function ee(ie){this._childLevel=(ie._childLevel|0)+1,this.error=d(ie,B,"error"),this.fatal=d(ie,B,"fatal"),this.warn=d(ie,B,"warn"),this.info=d(ie,B,"info"),this.debug=d(ie,B,"debug"),this.trace=d(ie,B,"trace"),K&&(this.serializers=K,this._serialize=se),l&&(this._logEvent=f([].concat(ie._logEvent.bindings,B)))}return ee.prototype=this,new ee(this)}return C}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:A,epochTime:v,unixTime:S,isoTime:y});function s(p,l,g,M){const L=Object.getPrototypeOf(l);l[g]=l.levelVal>l.levels.values[g]?I:L[g]?L[g]:e[g]||e[M]||I,o(p,l,g)}function o(p,l,g){!p.transmit&&l[g]===I||(l[g]=function(M){return function(){const U=p.timestamp(),F=new Array(arguments.length),j=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var C=0;C<F.length;C++)F[C]=arguments[C];if(p.serialize&&!p.asObject&&c(F,this._serialize,this.serializers,this._stdErrSerialize),p.asObject?M.call(j,a(this,g,F,U)):M.apply(j,F),p.transmit){const R=p.transmit.level||l.level,G=i.levels.values[R],W=i.levels.values[g];if(W<G)return;h(this,{ts:U,methodLevel:g,methodValue:W,transmitLevel:R,transmitValue:i.levels.values[p.transmit.level||l.level],send:p.transmit.send,val:l.levelVal},F)}}}(l[g]))}function a(p,l,g,M){p._serialize&&c(g,p._serialize,p.serializers,p._stdErrSerialize);const L=g.slice();let U=L[0];const F={};M&&(F.time=M),F.level=i.levels.values[l];let j=(p._childLevel|0)+1;if(j<1&&(j=1),U!==null&&typeof U=="object"){for(;j--&&typeof L[0]=="object";)Object.assign(F,L.shift());U=L.length?t(L.shift(),L):void 0}else typeof U=="string"&&(U=t(L.shift(),L));return U!==void 0&&(F.msg=U),F}function c(p,l,g,M){for(const L in p)if(M&&p[L]instanceof Error)p[L]=i.stdSerializers.err(p[L]);else if(typeof p[L]=="object"&&!Array.isArray(p[L]))for(const U in p[L])l&&l.indexOf(U)>-1&&U in g&&(p[L][U]=g[U](p[L][U]))}function d(p,l,g){return function(){const M=new Array(1+arguments.length);M[0]=l;for(var L=1;L<M.length;L++)M[L]=arguments[L-1];return p[g].apply(this,M)}}function h(p,l,g){const M=l.send,L=l.ts,U=l.methodLevel,F=l.methodValue,j=l.val,C=p._logEvent.bindings;c(g,p._serialize||Object.keys(p.serializers),p.serializers,p._stdErrSerialize===void 0?!0:p._stdErrSerialize),p._logEvent.ts=L,p._logEvent.messages=g.filter(function(R){return C.indexOf(R)===-1}),p._logEvent.level.label=U,p._logEvent.level.value=F,M(U,p._logEvent,j),p._logEvent=f(C)}function f(p){return{ts:0,messages:[],bindings:p||[],level:{label:"",value:0}}}function m(p){const l={type:p.constructor.name,msg:p.message,stack:p.stack};for(const g in p)l[g]===void 0&&(l[g]=p[g]);return l}function w(p){return typeof p.timestamp=="function"?p.timestamp:p.timestamp===!1?A:v}function b(){return{}}function _(p){return p}function I(){}function A(){return!1}function v(){return Date.now()}function S(){return Math.round(Date.now()/1e3)}function y(){return new Date(Date.now()).toISOString()}function x(){function p(l){return typeof l<"u"&&l}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return p(self)||p(window)||p(this)||{}}}return No}var un={},eu;function tu(){return eu||(eu=1,Object.defineProperty(un,"__esModule",{value:!0}),un.PINO_CUSTOM_CONTEXT_KEY=un.PINO_LOGGER_DEFAULTS=void 0,un.PINO_LOGGER_DEFAULTS={level:"info"},un.PINO_CUSTOM_CONTEXT_KEY="custom_context"),un}var Ut={},ru;function D1(){if(ru)return Ut;ru=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.generateChildLogger=Ut.formatChildLoggerContext=Ut.getLoggerContext=Ut.setBrowserLoggerContext=Ut.getBrowserLoggerContext=Ut.getDefaultLoggerOptions=void 0;const t=tu();function e(a){return Object.assign(Object.assign({},a),{level:(a==null?void 0:a.level)||t.PINO_LOGGER_DEFAULTS.level})}Ut.getDefaultLoggerOptions=e;function r(a,c=t.PINO_CUSTOM_CONTEXT_KEY){return a[c]||""}Ut.getBrowserLoggerContext=r;function n(a,c,d=t.PINO_CUSTOM_CONTEXT_KEY){return a[d]=c,a}Ut.setBrowserLoggerContext=n;function i(a,c=t.PINO_CUSTOM_CONTEXT_KEY){let d="";return typeof a.bindings>"u"?d=r(a,c):d=a.bindings().context||"",d}Ut.getLoggerContext=i;function s(a,c,d=t.PINO_CUSTOM_CONTEXT_KEY){const h=i(a,d);return h.trim()?`${h}/${c}`:c}Ut.formatChildLoggerContext=s;function o(a,c,d=t.PINO_CUSTOM_CONTEXT_KEY){const h=s(a,c,d),f=a.child({context:h});return n(f,h,d)}return Ut.generateChildLogger=o,Ut}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=tr,r=e.__importDefault(x1());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(tu(),t),e.__exportStar(D1(),t)})(Me);let C1=class extends cn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},O1=class extends cn{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},I1=class{constructor(e,r){this.logger=e,this.core=r}},A1=class extends cn{constructor(e,r){super(),this.relayer=e,this.logger=r}},$1=class extends cn{constructor(e){super()}},T1=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},R1=class extends cn{constructor(e,r){super(),this.relayer=e,this.logger=r}},P1=class extends cn{constructor(e,r){super(),this.core=e,this.logger=r}},N1=class{constructor(e,r){this.projectId=e,this.logger=r}},L1=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},M1=class{constructor(e){this.client=e}};const U1=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),F1=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function nu(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return F1(t)}catch{return t}}function Lo(t){return typeof t=="string"?t:U1(t)||""}var Mo={},Nn={},ls={},us={};Object.defineProperty(us,"__esModule",{value:!0}),us.BrowserRandomSource=void 0;const iu=65536;class j1{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=iu)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,iu)));return r}}us.BrowserRandomSource=j1;function k1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var hs={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});function B1(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Yt.wipe=B1;const z1=po(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(hs,"__esModule",{value:!0}),hs.NodeRandomSource=void 0;const W1=Yt;class H1{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof k1<"u"){const e=z1;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,W1.wipe)(r),n}}hs.NodeRandomSource=H1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.SystemRandomSource=void 0;const V1=us,q1=hs;class K1{constructor(){if(this.isAvailable=!1,this.name="",this._source=new V1.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new q1.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}ls.SystemRandomSource=K1;var de={},su={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,c){var d=a>>>16&65535,h=a&65535,f=c>>>16&65535,m=c&65535;return h*m+(d*m+h*f<<16>>>0)|0}t.mul=Math.imul||e;function r(a,c){return a+c|0}t.add=r;function n(a,c){return a-c|0}t.sub=n;function i(a,c){return a<<c|a>>>32-c}t.rotl=i;function s(a,c){return a<<32-c|a>>>c}t.rotr=s;function o(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||o,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(su),Object.defineProperty(de,"__esModule",{value:!0});var ou=su;function G1(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}de.readInt16BE=G1;function Y1(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}de.readUint16BE=Y1;function J1(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}de.readInt16LE=J1;function Z1(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}de.readUint16LE=Z1;function au(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}de.writeUint16BE=au,de.writeInt16BE=au;function cu(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}de.writeUint16LE=cu,de.writeInt16LE=cu;function Uo(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}de.readInt32BE=Uo;function Fo(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}de.readUint32BE=Fo;function jo(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}de.readInt32LE=jo;function ko(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}de.readUint32LE=ko;function ds(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}de.writeUint32BE=ds,de.writeInt32BE=ds;function fs(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}de.writeUint32LE=fs,de.writeInt32LE=fs;function X1(t,e){e===void 0&&(e=0);var r=Uo(t,e),n=Uo(t,e+4);return r*4294967296+n-(n>>31)*4294967296}de.readInt64BE=X1;function Q1(t,e){e===void 0&&(e=0);var r=Fo(t,e),n=Fo(t,e+4);return r*4294967296+n}de.readUint64BE=Q1;function ep(t,e){e===void 0&&(e=0);var r=jo(t,e),n=jo(t,e+4);return n*4294967296+r-(r>>31)*4294967296}de.readInt64LE=ep;function tp(t,e){e===void 0&&(e=0);var r=ko(t,e),n=ko(t,e+4);return n*4294967296+r}de.readUint64LE=tp;function lu(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),ds(t/4294967296>>>0,e,r),ds(t>>>0,e,r+4),e}de.writeUint64BE=lu,de.writeInt64BE=lu;function uu(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),fs(t>>>0,e,r),fs(t/4294967296>>>0,e,r+4),e}de.writeUint64LE=uu,de.writeInt64LE=uu;function rp(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}de.readUintBE=rp;function np(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}de.readUintLE=np;function ip(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!ou.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}de.writeUintBE=ip;function sp(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!ou.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}de.writeUintLE=sp;function op(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}de.readFloat32BE=op;function ap(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}de.readFloat32LE=ap;function cp(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}de.readFloat64BE=cp;function lp(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}de.readFloat64LE=lp;function up(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}de.writeFloat32BE=up;function hp(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}de.writeFloat32LE=hp;function dp(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}de.writeFloat64BE=dp;function fp(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}de.writeFloat64LE=fp,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=ls,r=de,n=Yt;t.defaultRandomSource=new e.SystemRandomSource;function i(d,h=t.defaultRandomSource){return h.randomBytes(d)}t.randomBytes=i;function s(d=t.defaultRandomSource){const h=i(4,d),f=(0,r.readUint32LE)(h);return(0,n.wipe)(h),f}t.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(d,h=o,f=t.defaultRandomSource){if(h.length<2)throw new Error("randomString charset is too short");if(h.length>256)throw new Error("randomString charset is too long");let m="";const w=h.length,b=256-256%w;for(;d>0;){const _=i(Math.ceil(d*256/b),f);for(let I=0;I<_.length&&d>0;I++){const A=_[I];A<b&&(m+=h.charAt(A%w),d--)}(0,n.wipe)(_)}return m}t.randomString=a;function c(d,h=o,f=t.defaultRandomSource){const m=Math.ceil(d/(Math.log(h.length)/Math.LN2));return a(m,h,f)}t.randomStringForEntropy=c}(Nn);var hu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=de,r=Yt;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(c,d){if(d===void 0&&(d=c.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var h=0;if(this._bytesHashed+=d,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&d>0;)this._buffer[this._bufferLength++]=c[h++],d--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(d>=this.blockSize&&(h=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,c,h,d),d%=this.blockSize);d>0;)this._buffer[this._bufferLength++]=c[h++],d--;return this},a.prototype.finish=function(c){if(!this._finished){var d=this._bytesHashed,h=this._bufferLength,f=d/536870912|0,m=d<<3,w=d%128<112?128:256;this._buffer[h]=128;for(var b=h+1;b<w-8;b++)this._buffer[b]=0;e.writeUint32BE(f,this._buffer,w-8),e.writeUint32BE(m,this._buffer,w-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,w),this._finished=!0}for(var b=0;b<this.digestLength/8;b++)e.writeUint32BE(this._stateHi[b],c,b*8),e.writeUint32BE(this._stateLo[b],c,b*8+4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._stateHi.set(c.stateHi),this._stateLo.set(c.stateLo),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.stateHi),r.wipe(c.stateLo),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(a,c,d,h,f,m,w){for(var b=d[0],_=d[1],I=d[2],A=d[3],v=d[4],S=d[5],y=d[6],x=d[7],p=h[0],l=h[1],g=h[2],M=h[3],L=h[4],U=h[5],F=h[6],j=h[7],C,R,G,W,z,V,B,q;w>=128;){for(var ce=0;ce<16;ce++){var K=8*ce+m;a[ce]=e.readUint32BE(f,K),c[ce]=e.readUint32BE(f,K+4)}for(var ce=0;ce<80;ce++){var se=b,ee=_,ie=I,N=A,P=v,$=S,u=y,O=x,Y=p,Q=l,Ee=g,Se=M,me=L,Ne=U,Xe=F,Ve=j;if(C=x,R=j,z=R&65535,V=R>>>16,B=C&65535,q=C>>>16,C=(v>>>14|L<<32-14)^(v>>>18|L<<32-18)^(L>>>41-32|v<<32-(41-32)),R=(L>>>14|v<<32-14)^(L>>>18|v<<32-18)^(v>>>41-32|L<<32-(41-32)),z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,C=v&S^~v&y,R=L&U^~L&F,z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,C=i[ce*2],R=i[ce*2+1],z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,C=a[ce%16],R=c[ce%16],z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,G=B&65535|q<<16,W=z&65535|V<<16,C=G,R=W,z=R&65535,V=R>>>16,B=C&65535,q=C>>>16,C=(b>>>28|p<<32-28)^(p>>>34-32|b<<32-(34-32))^(p>>>39-32|b<<32-(39-32)),R=(p>>>28|b<<32-28)^(b>>>34-32|p<<32-(34-32))^(b>>>39-32|p<<32-(39-32)),z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,C=b&_^b&I^_&I,R=p&l^p&g^l&g,z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,O=B&65535|q<<16,Ve=z&65535|V<<16,C=N,R=Se,z=R&65535,V=R>>>16,B=C&65535,q=C>>>16,C=G,R=W,z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,N=B&65535|q<<16,Se=z&65535|V<<16,_=se,I=ee,A=ie,v=N,S=P,y=$,x=u,b=O,l=Y,g=Q,M=Ee,L=Se,U=me,F=Ne,j=Xe,p=Ve,ce%16===15)for(var K=0;K<16;K++)C=a[K],R=c[K],z=R&65535,V=R>>>16,B=C&65535,q=C>>>16,C=a[(K+9)%16],R=c[(K+9)%16],z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,G=a[(K+1)%16],W=c[(K+1)%16],C=(G>>>1|W<<32-1)^(G>>>8|W<<32-8)^G>>>7,R=(W>>>1|G<<32-1)^(W>>>8|G<<32-8)^(W>>>7|G<<32-7),z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,G=a[(K+14)%16],W=c[(K+14)%16],C=(G>>>19|W<<32-19)^(W>>>61-32|G<<32-(61-32))^G>>>6,R=(W>>>19|G<<32-19)^(G>>>61-32|W<<32-(61-32))^(W>>>6|G<<32-6),z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,a[K]=B&65535|q<<16,c[K]=z&65535|V<<16}C=b,R=p,z=R&65535,V=R>>>16,B=C&65535,q=C>>>16,C=d[0],R=h[0],z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,d[0]=b=B&65535|q<<16,h[0]=p=z&65535|V<<16,C=_,R=l,z=R&65535,V=R>>>16,B=C&65535,q=C>>>16,C=d[1],R=h[1],z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,d[1]=_=B&65535|q<<16,h[1]=l=z&65535|V<<16,C=I,R=g,z=R&65535,V=R>>>16,B=C&65535,q=C>>>16,C=d[2],R=h[2],z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,d[2]=I=B&65535|q<<16,h[2]=g=z&65535|V<<16,C=A,R=M,z=R&65535,V=R>>>16,B=C&65535,q=C>>>16,C=d[3],R=h[3],z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,d[3]=A=B&65535|q<<16,h[3]=M=z&65535|V<<16,C=v,R=L,z=R&65535,V=R>>>16,B=C&65535,q=C>>>16,C=d[4],R=h[4],z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,d[4]=v=B&65535|q<<16,h[4]=L=z&65535|V<<16,C=S,R=U,z=R&65535,V=R>>>16,B=C&65535,q=C>>>16,C=d[5],R=h[5],z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,d[5]=S=B&65535|q<<16,h[5]=U=z&65535|V<<16,C=y,R=F,z=R&65535,V=R>>>16,B=C&65535,q=C>>>16,C=d[6],R=h[6],z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,d[6]=y=B&65535|q<<16,h[6]=F=z&65535|V<<16,C=x,R=j,z=R&65535,V=R>>>16,B=C&65535,q=C>>>16,C=d[7],R=h[7],z+=R&65535,V+=R>>>16,B+=C&65535,q+=C>>>16,V+=z>>>16,B+=V>>>16,q+=B>>>16,d[7]=x=B&65535|q<<16,h[7]=j=z&65535|V<<16,m+=128,w-=128}return m}function o(a){var c=new n;c.update(a);var d=c.digest();return c.clean(),d}t.hash=o})(hu),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=Nn,r=hu,n=Yt;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(N){const P=new Float64Array(16);if(N)for(let $=0;$<N.length;$++)P[$]=N[$];return P}const s=new Uint8Array(32);s[0]=9;const o=i(),a=i([1]),c=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),m=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function w(N,P){for(let $=0;$<16;$++)N[$]=P[$]|0}function b(N){let P=1;for(let $=0;$<16;$++){let u=N[$]+P+65535;P=Math.floor(u/65536),N[$]=u-P*65536}N[0]+=P-1+37*(P-1)}function _(N,P,$){const u=~($-1);for(let O=0;O<16;O++){const Y=u&(N[O]^P[O]);N[O]^=Y,P[O]^=Y}}function I(N,P){const $=i(),u=i();for(let O=0;O<16;O++)u[O]=P[O];b(u),b(u),b(u);for(let O=0;O<2;O++){$[0]=u[0]-65517;for(let Q=1;Q<15;Q++)$[Q]=u[Q]-65535-($[Q-1]>>16&1),$[Q-1]&=65535;$[15]=u[15]-32767-($[14]>>16&1);const Y=$[15]>>16&1;$[14]&=65535,_(u,$,1-Y)}for(let O=0;O<16;O++)N[2*O]=u[O]&255,N[2*O+1]=u[O]>>8}function A(N,P){let $=0;for(let u=0;u<32;u++)$|=N[u]^P[u];return(1&$-1>>>8)-1}function v(N,P){const $=new Uint8Array(32),u=new Uint8Array(32);return I($,N),I(u,P),A($,u)}function S(N){const P=new Uint8Array(32);return I(P,N),P[0]&1}function y(N,P){for(let $=0;$<16;$++)N[$]=P[2*$]+(P[2*$+1]<<8);N[15]&=32767}function x(N,P,$){for(let u=0;u<16;u++)N[u]=P[u]+$[u]}function p(N,P,$){for(let u=0;u<16;u++)N[u]=P[u]-$[u]}function l(N,P,$){let u,O,Y=0,Q=0,Ee=0,Se=0,me=0,Ne=0,Xe=0,Ve=0,$e=0,Oe=0,ye=0,ve=0,we=0,fe=0,he=0,oe=0,be=0,xe=0,le=0,Ie=0,Le=0,je=0,ke=0,Ue=0,Qt=0,or=0,xr=0,At=0,Dr=0,ar=0,Jr=0,Qe=$[0],Ge=$[1],ot=$[2],tt=$[3],at=$[4],Ye=$[5],dt=$[6],mt=$[7],yt=$[8],ft=$[9],wt=$[10],pt=$[11],ct=$[12],Ke=$[13],D=$[14],k=$[15];u=P[0],Y+=u*Qe,Q+=u*Ge,Ee+=u*ot,Se+=u*tt,me+=u*at,Ne+=u*Ye,Xe+=u*dt,Ve+=u*mt,$e+=u*yt,Oe+=u*ft,ye+=u*wt,ve+=u*pt,we+=u*ct,fe+=u*Ke,he+=u*D,oe+=u*k,u=P[1],Q+=u*Qe,Ee+=u*Ge,Se+=u*ot,me+=u*tt,Ne+=u*at,Xe+=u*Ye,Ve+=u*dt,$e+=u*mt,Oe+=u*yt,ye+=u*ft,ve+=u*wt,we+=u*pt,fe+=u*ct,he+=u*Ke,oe+=u*D,be+=u*k,u=P[2],Ee+=u*Qe,Se+=u*Ge,me+=u*ot,Ne+=u*tt,Xe+=u*at,Ve+=u*Ye,$e+=u*dt,Oe+=u*mt,ye+=u*yt,ve+=u*ft,we+=u*wt,fe+=u*pt,he+=u*ct,oe+=u*Ke,be+=u*D,xe+=u*k,u=P[3],Se+=u*Qe,me+=u*Ge,Ne+=u*ot,Xe+=u*tt,Ve+=u*at,$e+=u*Ye,Oe+=u*dt,ye+=u*mt,ve+=u*yt,we+=u*ft,fe+=u*wt,he+=u*pt,oe+=u*ct,be+=u*Ke,xe+=u*D,le+=u*k,u=P[4],me+=u*Qe,Ne+=u*Ge,Xe+=u*ot,Ve+=u*tt,$e+=u*at,Oe+=u*Ye,ye+=u*dt,ve+=u*mt,we+=u*yt,fe+=u*ft,he+=u*wt,oe+=u*pt,be+=u*ct,xe+=u*Ke,le+=u*D,Ie+=u*k,u=P[5],Ne+=u*Qe,Xe+=u*Ge,Ve+=u*ot,$e+=u*tt,Oe+=u*at,ye+=u*Ye,ve+=u*dt,we+=u*mt,fe+=u*yt,he+=u*ft,oe+=u*wt,be+=u*pt,xe+=u*ct,le+=u*Ke,Ie+=u*D,Le+=u*k,u=P[6],Xe+=u*Qe,Ve+=u*Ge,$e+=u*ot,Oe+=u*tt,ye+=u*at,ve+=u*Ye,we+=u*dt,fe+=u*mt,he+=u*yt,oe+=u*ft,be+=u*wt,xe+=u*pt,le+=u*ct,Ie+=u*Ke,Le+=u*D,je+=u*k,u=P[7],Ve+=u*Qe,$e+=u*Ge,Oe+=u*ot,ye+=u*tt,ve+=u*at,we+=u*Ye,fe+=u*dt,he+=u*mt,oe+=u*yt,be+=u*ft,xe+=u*wt,le+=u*pt,Ie+=u*ct,Le+=u*Ke,je+=u*D,ke+=u*k,u=P[8],$e+=u*Qe,Oe+=u*Ge,ye+=u*ot,ve+=u*tt,we+=u*at,fe+=u*Ye,he+=u*dt,oe+=u*mt,be+=u*yt,xe+=u*ft,le+=u*wt,Ie+=u*pt,Le+=u*ct,je+=u*Ke,ke+=u*D,Ue+=u*k,u=P[9],Oe+=u*Qe,ye+=u*Ge,ve+=u*ot,we+=u*tt,fe+=u*at,he+=u*Ye,oe+=u*dt,be+=u*mt,xe+=u*yt,le+=u*ft,Ie+=u*wt,Le+=u*pt,je+=u*ct,ke+=u*Ke,Ue+=u*D,Qt+=u*k,u=P[10],ye+=u*Qe,ve+=u*Ge,we+=u*ot,fe+=u*tt,he+=u*at,oe+=u*Ye,be+=u*dt,xe+=u*mt,le+=u*yt,Ie+=u*ft,Le+=u*wt,je+=u*pt,ke+=u*ct,Ue+=u*Ke,Qt+=u*D,or+=u*k,u=P[11],ve+=u*Qe,we+=u*Ge,fe+=u*ot,he+=u*tt,oe+=u*at,be+=u*Ye,xe+=u*dt,le+=u*mt,Ie+=u*yt,Le+=u*ft,je+=u*wt,ke+=u*pt,Ue+=u*ct,Qt+=u*Ke,or+=u*D,xr+=u*k,u=P[12],we+=u*Qe,fe+=u*Ge,he+=u*ot,oe+=u*tt,be+=u*at,xe+=u*Ye,le+=u*dt,Ie+=u*mt,Le+=u*yt,je+=u*ft,ke+=u*wt,Ue+=u*pt,Qt+=u*ct,or+=u*Ke,xr+=u*D,At+=u*k,u=P[13],fe+=u*Qe,he+=u*Ge,oe+=u*ot,be+=u*tt,xe+=u*at,le+=u*Ye,Ie+=u*dt,Le+=u*mt,je+=u*yt,ke+=u*ft,Ue+=u*wt,Qt+=u*pt,or+=u*ct,xr+=u*Ke,At+=u*D,Dr+=u*k,u=P[14],he+=u*Qe,oe+=u*Ge,be+=u*ot,xe+=u*tt,le+=u*at,Ie+=u*Ye,Le+=u*dt,je+=u*mt,ke+=u*yt,Ue+=u*ft,Qt+=u*wt,or+=u*pt,xr+=u*ct,At+=u*Ke,Dr+=u*D,ar+=u*k,u=P[15],oe+=u*Qe,be+=u*Ge,xe+=u*ot,le+=u*tt,Ie+=u*at,Le+=u*Ye,je+=u*dt,ke+=u*mt,Ue+=u*yt,Qt+=u*ft,or+=u*wt,xr+=u*pt,At+=u*ct,Dr+=u*Ke,ar+=u*D,Jr+=u*k,Y+=38*be,Q+=38*xe,Ee+=38*le,Se+=38*Ie,me+=38*Le,Ne+=38*je,Xe+=38*ke,Ve+=38*Ue,$e+=38*Qt,Oe+=38*or,ye+=38*xr,ve+=38*At,we+=38*Dr,fe+=38*ar,he+=38*Jr,O=1,u=Y+O+65535,O=Math.floor(u/65536),Y=u-O*65536,u=Q+O+65535,O=Math.floor(u/65536),Q=u-O*65536,u=Ee+O+65535,O=Math.floor(u/65536),Ee=u-O*65536,u=Se+O+65535,O=Math.floor(u/65536),Se=u-O*65536,u=me+O+65535,O=Math.floor(u/65536),me=u-O*65536,u=Ne+O+65535,O=Math.floor(u/65536),Ne=u-O*65536,u=Xe+O+65535,O=Math.floor(u/65536),Xe=u-O*65536,u=Ve+O+65535,O=Math.floor(u/65536),Ve=u-O*65536,u=$e+O+65535,O=Math.floor(u/65536),$e=u-O*65536,u=Oe+O+65535,O=Math.floor(u/65536),Oe=u-O*65536,u=ye+O+65535,O=Math.floor(u/65536),ye=u-O*65536,u=ve+O+65535,O=Math.floor(u/65536),ve=u-O*65536,u=we+O+65535,O=Math.floor(u/65536),we=u-O*65536,u=fe+O+65535,O=Math.floor(u/65536),fe=u-O*65536,u=he+O+65535,O=Math.floor(u/65536),he=u-O*65536,u=oe+O+65535,O=Math.floor(u/65536),oe=u-O*65536,Y+=O-1+37*(O-1),O=1,u=Y+O+65535,O=Math.floor(u/65536),Y=u-O*65536,u=Q+O+65535,O=Math.floor(u/65536),Q=u-O*65536,u=Ee+O+65535,O=Math.floor(u/65536),Ee=u-O*65536,u=Se+O+65535,O=Math.floor(u/65536),Se=u-O*65536,u=me+O+65535,O=Math.floor(u/65536),me=u-O*65536,u=Ne+O+65535,O=Math.floor(u/65536),Ne=u-O*65536,u=Xe+O+65535,O=Math.floor(u/65536),Xe=u-O*65536,u=Ve+O+65535,O=Math.floor(u/65536),Ve=u-O*65536,u=$e+O+65535,O=Math.floor(u/65536),$e=u-O*65536,u=Oe+O+65535,O=Math.floor(u/65536),Oe=u-O*65536,u=ye+O+65535,O=Math.floor(u/65536),ye=u-O*65536,u=ve+O+65535,O=Math.floor(u/65536),ve=u-O*65536,u=we+O+65535,O=Math.floor(u/65536),we=u-O*65536,u=fe+O+65535,O=Math.floor(u/65536),fe=u-O*65536,u=he+O+65535,O=Math.floor(u/65536),he=u-O*65536,u=oe+O+65535,O=Math.floor(u/65536),oe=u-O*65536,Y+=O-1+37*(O-1),N[0]=Y,N[1]=Q,N[2]=Ee,N[3]=Se,N[4]=me,N[5]=Ne,N[6]=Xe,N[7]=Ve,N[8]=$e,N[9]=Oe,N[10]=ye,N[11]=ve,N[12]=we,N[13]=fe,N[14]=he,N[15]=oe}function g(N,P){l(N,P,P)}function M(N,P){const $=i();let u;for(u=0;u<16;u++)$[u]=P[u];for(u=253;u>=0;u--)g($,$),u!==2&&u!==4&&l($,$,P);for(u=0;u<16;u++)N[u]=$[u]}function L(N,P){const $=i();let u;for(u=0;u<16;u++)$[u]=P[u];for(u=250;u>=0;u--)g($,$),u!==1&&l($,$,P);for(u=0;u<16;u++)N[u]=$[u]}function U(N,P){const $=i(),u=i(),O=i(),Y=i(),Q=i(),Ee=i(),Se=i(),me=i(),Ne=i();p($,N[1],N[0]),p(Ne,P[1],P[0]),l($,$,Ne),x(u,N[0],N[1]),x(Ne,P[0],P[1]),l(u,u,Ne),l(O,N[3],P[3]),l(O,O,d),l(Y,N[2],P[2]),x(Y,Y,Y),p(Q,u,$),p(Ee,Y,O),x(Se,Y,O),x(me,u,$),l(N[0],Q,Ee),l(N[1],me,Se),l(N[2],Se,Ee),l(N[3],Q,me)}function F(N,P,$){for(let u=0;u<4;u++)_(N[u],P[u],$)}function j(N,P){const $=i(),u=i(),O=i();M(O,P[2]),l($,P[0],O),l(u,P[1],O),I(N,u),N[31]^=S($)<<7}function C(N,P,$){w(N[0],o),w(N[1],a),w(N[2],a),w(N[3],o);for(let u=255;u>=0;--u){const O=$[u/8|0]>>(u&7)&1;F(N,P,O),U(P,N),U(N,N),F(N,P,O)}}function R(N,P){const $=[i(),i(),i(),i()];w($[0],h),w($[1],f),w($[2],a),l($[3],h,f),C(N,$,P)}function G(N){if(N.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const P=(0,r.hash)(N);P[0]&=248,P[31]&=127,P[31]|=64;const $=new Uint8Array(32),u=[i(),i(),i(),i()];R(u,P),j($,u);const O=new Uint8Array(64);return O.set(N),O.set($,32),{publicKey:$,secretKey:O}}t.generateKeyPairFromSeed=G;function W(N){const P=(0,e.randomBytes)(32,N),$=G(P);return(0,n.wipe)(P),$}t.generateKeyPair=W;function z(N){if(N.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(N.subarray(32))}t.extractPublicKeyFromSecretKey=z;const V=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function B(N,P){let $,u,O,Y;for(u=63;u>=32;--u){for($=0,O=u-32,Y=u-12;O<Y;++O)P[O]+=$-16*P[u]*V[O-(u-32)],$=Math.floor((P[O]+128)/256),P[O]-=$*256;P[O]+=$,P[u]=0}for($=0,O=0;O<32;O++)P[O]+=$-(P[31]>>4)*V[O],$=P[O]>>8,P[O]&=255;for(O=0;O<32;O++)P[O]-=$*V[O];for(u=0;u<32;u++)P[u+1]+=P[u]>>8,N[u]=P[u]&255}function q(N){const P=new Float64Array(64);for(let $=0;$<64;$++)P[$]=N[$];for(let $=0;$<64;$++)N[$]=0;B(N,P)}function ce(N,P){const $=new Float64Array(64),u=[i(),i(),i(),i()],O=(0,r.hash)(N.subarray(0,32));O[0]&=248,O[31]&=127,O[31]|=64;const Y=new Uint8Array(64);Y.set(O.subarray(32),32);const Q=new r.SHA512;Q.update(Y.subarray(32)),Q.update(P);const Ee=Q.digest();Q.clean(),q(Ee),R(u,Ee),j(Y,u),Q.reset(),Q.update(Y.subarray(0,32)),Q.update(N.subarray(32)),Q.update(P);const Se=Q.digest();q(Se);for(let me=0;me<32;me++)$[me]=Ee[me];for(let me=0;me<32;me++)for(let Ne=0;Ne<32;Ne++)$[me+Ne]+=Se[me]*O[Ne];return B(Y.subarray(32),$),Y}t.sign=ce;function K(N,P){const $=i(),u=i(),O=i(),Y=i(),Q=i(),Ee=i(),Se=i();return w(N[2],a),y(N[1],P),g(O,N[1]),l(Y,O,c),p(O,O,N[2]),x(Y,N[2],Y),g(Q,Y),g(Ee,Q),l(Se,Ee,Q),l($,Se,O),l($,$,Y),L($,$),l($,$,O),l($,$,Y),l($,$,Y),l(N[0],$,Y),g(u,N[0]),l(u,u,Y),v(u,O)&&l(N[0],N[0],m),g(u,N[0]),l(u,u,Y),v(u,O)?-1:(S(N[0])===P[31]>>7&&p(N[0],o,N[0]),l(N[3],N[0],N[1]),0)}function se(N,P,$){const u=new Uint8Array(32),O=[i(),i(),i(),i()],Y=[i(),i(),i(),i()];if($.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(K(Y,N))return!1;const Q=new r.SHA512;Q.update($.subarray(0,32)),Q.update(N),Q.update(P);const Ee=Q.digest();return q(Ee),C(O,Y,Ee),R(Y,$.subarray(32)),U(O,Y),j(u,O),!A($,u)}t.verify=se;function ee(N){let P=[i(),i(),i(),i()];if(K(P,N))throw new Error("Ed25519: invalid public key");let $=i(),u=i(),O=P[1];x($,a,O),p(u,a,O),M(u,u),l($,$,u);let Y=new Uint8Array(32);return I(Y,$),Y}t.convertPublicKeyToX25519=ee;function ie(N){const P=(0,r.hash)(N.subarray(0,32));P[0]&=248,P[31]&=127,P[31]|=64;const $=new Uint8Array(P.subarray(0,32));return(0,n.wipe)(P),$}t.convertSecretKeyToX25519=ie}(Mo);const pp="EdDSA",gp="JWT",du=".",fu="base64url",mp="utf8",yp="utf8",wp=":",vp="did",bp="key",pu="base58btc",_p="z",Ep="K36",Sp=32;function Bo(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function gu(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Bo(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function zo(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=gu(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return Bo(r)}function xp(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),d=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function f(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var _=0,I=0,A=0,v=b.length;A!==v&&b[A]===0;)A++,_++;for(var S=(v-A)*h+1>>>0,y=new Uint8Array(S);A!==v;){for(var x=b[A],p=0,l=S-1;(x!==0||p<I)&&l!==-1;l--,p++)x+=256*y[l]>>>0,y[l]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");I=p,A++}for(var g=S-I;g!==S&&y[g]===0;)g++;for(var M=c.repeat(_);g<S;++g)M+=t.charAt(y[g]);return M}function m(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var _=0;if(b[_]!==" "){for(var I=0,A=0;b[_]===c;)I++,_++;for(var v=(b.length-_)*d+1>>>0,S=new Uint8Array(v);b[_];){var y=r[b.charCodeAt(_)];if(y===255)return;for(var x=0,p=v-1;(y!==0||x<A)&&p!==-1;p--,x++)y+=a*S[p]>>>0,S[p]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");A=x,_++}if(b[_]!==" "){for(var l=v-A;l!==v&&S[l]===0;)l++;for(var g=new Uint8Array(I+(v-l)),M=I;l!==v;)g[M++]=S[l++];return g}}}function w(b){var _=m(b);if(_)return _;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:m,decode:w}}var Dp=xp,Cp=Dp;const Op=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Ip=t=>new TextEncoder().encode(t),Ap=t=>new TextDecoder().decode(t);class $p{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Tp{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return mu(this,e)}}class Rp{constructor(e){this.decoders=e}or(e){return mu(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const mu=(t,e)=>new Rp({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Pp{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new $p(e,r,n),this.decoder=new Tp(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ps=({name:t,prefix:e,encode:r,decode:n})=>new Pp(t,e,r,n),vi=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Cp(r,e);return ps({prefix:t,name:e,encode:n,decode:s=>Op(i(s))})},Np=(t,e,r,n)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,d=0;for(let h=0;h<s;++h){const f=i[t[h]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[d++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Lp=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Ct=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>ps({prefix:e,name:t,encode(i){return Lp(i,n,r)},decode(i){return Np(i,n,r,t)}}),Mp=ps({prefix:"\0",name:"identity",encode:t=>Ap(t),decode:t=>Ip(t)}),Up=Object.freeze(Object.defineProperty({__proto__:null,identity:Mp},Symbol.toStringTag,{value:"Module"})),Fp=Ct({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),jp=Object.freeze(Object.defineProperty({__proto__:null,base2:Fp},Symbol.toStringTag,{value:"Module"})),kp=Ct({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Bp=Object.freeze(Object.defineProperty({__proto__:null,base8:kp},Symbol.toStringTag,{value:"Module"})),zp=vi({prefix:"9",name:"base10",alphabet:"0123456789"}),Wp=Object.freeze(Object.defineProperty({__proto__:null,base10:zp},Symbol.toStringTag,{value:"Module"})),Hp=Ct({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Vp=Ct({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),qp=Object.freeze(Object.defineProperty({__proto__:null,base16:Hp,base16upper:Vp},Symbol.toStringTag,{value:"Module"})),Kp=Ct({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Gp=Ct({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Yp=Ct({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Jp=Ct({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Zp=Ct({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Xp=Ct({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Qp=Ct({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),eg=Ct({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),tg=Ct({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),rg=Object.freeze(Object.defineProperty({__proto__:null,base32:Kp,base32hex:Zp,base32hexpad:Qp,base32hexpadupper:eg,base32hexupper:Xp,base32pad:Yp,base32padupper:Jp,base32upper:Gp,base32z:tg},Symbol.toStringTag,{value:"Module"})),ng=vi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ig=vi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),sg=Object.freeze(Object.defineProperty({__proto__:null,base36:ng,base36upper:ig},Symbol.toStringTag,{value:"Module"})),og=vi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ag=vi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),cg=Object.freeze(Object.defineProperty({__proto__:null,base58btc:og,base58flickr:ag},Symbol.toStringTag,{value:"Module"})),lg=Ct({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ug=Ct({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),hg=Ct({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),dg=Ct({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),fg=Object.freeze(Object.defineProperty({__proto__:null,base64:lg,base64pad:ug,base64url:hg,base64urlpad:dg},Symbol.toStringTag,{value:"Module"})),yu=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),pg=yu.reduce((t,e,r)=>(t[r]=e,t),[]),gg=yu.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function mg(t){return t.reduce((e,r)=>(e+=pg[r],e),"")}function yg(t){const e=[];for(const r of t){const n=gg[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const wg=ps({prefix:"🚀",name:"base256emoji",encode:mg,decode:yg}),vg=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:wg},Symbol.toStringTag,{value:"Module"}));new TextEncoder,new TextDecoder;const wu={...Up,...jp,...Bp,...Wp,...qp,...rg,...sg,...cg,...fg,...vg};function vu(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const bu=vu("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Wo=vu("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=gu(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),_u={utf8:bu,"utf-8":bu,hex:wu.base16,latin1:Wo,ascii:Wo,binary:Wo,...wu};function Ft(t,e="utf8"){const r=_u[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Ht(t,e="utf8"){const r=_u[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Bo(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function gs(t){return Ft(Ht(Lo(t),mp),fu)}function Eu(t){const e=Ht(Ep,pu),r=_p+Ft(zo([e,t]),pu);return[vp,bp,r].join(wp)}function bg(t){return Ft(t,fu)}function _g(t){return Ht([gs(t.header),gs(t.payload)].join(du),yp)}function Eg(t){return[gs(t.header),gs(t.payload),bg(t.signature)].join(du)}function Su(t=Nn.randomBytes(Sp)){return Mo.generateKeyPairFromSeed(t)}async function Sg(t,e,r,n,i=re.fromMiliseconds(Date.now())){const s={alg:pp,typ:gp},o=Eu(n.publicKey),a=i+r,c={iss:o,sub:t,aud:e,iat:i,exp:a},d=_g({header:s,payload:c}),h=Mo.sign(n.secretKey,d);return Eg({header:s,payload:c,signature:h})}var Ho={},ms={};Object.defineProperty(ms,"__esModule",{value:!0});var Pt=de,Vo=Yt,xg=20;function Dg(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],d=r[11]<<24|r[10]<<16|r[9]<<8|r[8],h=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],m=r[23]<<24|r[22]<<16|r[21]<<8|r[20],w=r[27]<<24|r[26]<<16|r[25]<<8|r[24],b=r[31]<<24|r[30]<<16|r[29]<<8|r[28],_=e[3]<<24|e[2]<<16|e[1]<<8|e[0],I=e[7]<<24|e[6]<<16|e[5]<<8|e[4],A=e[11]<<24|e[10]<<16|e[9]<<8|e[8],v=e[15]<<24|e[14]<<16|e[13]<<8|e[12],S=n,y=i,x=s,p=o,l=a,g=c,M=d,L=h,U=f,F=m,j=w,C=b,R=_,G=I,W=A,z=v,V=0;V<xg;V+=2)S=S+l|0,R^=S,R=R>>>32-16|R<<16,U=U+R|0,l^=U,l=l>>>32-12|l<<12,y=y+g|0,G^=y,G=G>>>32-16|G<<16,F=F+G|0,g^=F,g=g>>>32-12|g<<12,x=x+M|0,W^=x,W=W>>>32-16|W<<16,j=j+W|0,M^=j,M=M>>>32-12|M<<12,p=p+L|0,z^=p,z=z>>>32-16|z<<16,C=C+z|0,L^=C,L=L>>>32-12|L<<12,x=x+M|0,W^=x,W=W>>>32-8|W<<8,j=j+W|0,M^=j,M=M>>>32-7|M<<7,p=p+L|0,z^=p,z=z>>>32-8|z<<8,C=C+z|0,L^=C,L=L>>>32-7|L<<7,y=y+g|0,G^=y,G=G>>>32-8|G<<8,F=F+G|0,g^=F,g=g>>>32-7|g<<7,S=S+l|0,R^=S,R=R>>>32-8|R<<8,U=U+R|0,l^=U,l=l>>>32-7|l<<7,S=S+g|0,z^=S,z=z>>>32-16|z<<16,j=j+z|0,g^=j,g=g>>>32-12|g<<12,y=y+M|0,R^=y,R=R>>>32-16|R<<16,C=C+R|0,M^=C,M=M>>>32-12|M<<12,x=x+L|0,G^=x,G=G>>>32-16|G<<16,U=U+G|0,L^=U,L=L>>>32-12|L<<12,p=p+l|0,W^=p,W=W>>>32-16|W<<16,F=F+W|0,l^=F,l=l>>>32-12|l<<12,x=x+L|0,G^=x,G=G>>>32-8|G<<8,U=U+G|0,L^=U,L=L>>>32-7|L<<7,p=p+l|0,W^=p,W=W>>>32-8|W<<8,F=F+W|0,l^=F,l=l>>>32-7|l<<7,y=y+M|0,R^=y,R=R>>>32-8|R<<8,C=C+R|0,M^=C,M=M>>>32-7|M<<7,S=S+g|0,z^=S,z=z>>>32-8|z<<8,j=j+z|0,g^=j,g=g>>>32-7|g<<7;Pt.writeUint32LE(S+n|0,t,0),Pt.writeUint32LE(y+i|0,t,4),Pt.writeUint32LE(x+s|0,t,8),Pt.writeUint32LE(p+o|0,t,12),Pt.writeUint32LE(l+a|0,t,16),Pt.writeUint32LE(g+c|0,t,20),Pt.writeUint32LE(M+d|0,t,24),Pt.writeUint32LE(L+h|0,t,28),Pt.writeUint32LE(U+f|0,t,32),Pt.writeUint32LE(F+m|0,t,36),Pt.writeUint32LE(j+w|0,t,40),Pt.writeUint32LE(C+b|0,t,44),Pt.writeUint32LE(R+_|0,t,48),Pt.writeUint32LE(G+I|0,t,52),Pt.writeUint32LE(W+A|0,t,56),Pt.writeUint32LE(z+v|0,t,60)}function xu(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){Dg(a,s,t);for(var d=c;d<c+64&&d<r.length;d++)n[d]=r[d]^a[d-c];Og(s,0,o)}return Vo.wipe(a),i===0&&Vo.wipe(s),n}ms.streamXOR=xu;function Cg(t,e,r,n){return n===void 0&&(n=0),Vo.wipe(r),xu(t,e,r,r,n)}ms.stream=Cg;function Og(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Du={},Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});function Ig(t,e,r){return~(t-1)&e|t-1&r}Fr.select=Ig;function Ag(t,e){return(t|0)-(e|0)-1>>>31&1}Fr.lessOrEqual=Ag;function Cu(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Fr.compare=Cu;function $g(t,e){return t.length===0||e.length===0?!1:Cu(t,e)!==0}Fr.equal=$g,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Fr,r=Yt;t.DIGEST_LENGTH=16;var n=function(){function o(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=c&8191;var d=a[2]|a[3]<<8;this._r[1]=(c>>>13|d<<3)&8191;var h=a[4]|a[5]<<8;this._r[2]=(d>>>10|h<<6)&7939;var f=a[6]|a[7]<<8;this._r[3]=(h>>>7|f<<9)&8191;var m=a[8]|a[9]<<8;this._r[4]=(f>>>4|m<<12)&255,this._r[5]=m>>>1&8190;var w=a[10]|a[11]<<8;this._r[6]=(m>>>14|w<<2)&8191;var b=a[12]|a[13]<<8;this._r[7]=(w>>>11|b<<5)&8065;var _=a[14]|a[15]<<8;this._r[8]=(b>>>8|_<<8)&8191,this._r[9]=_>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return o.prototype._blocks=function(a,c,d){for(var h=this._fin?0:2048,f=this._h[0],m=this._h[1],w=this._h[2],b=this._h[3],_=this._h[4],I=this._h[5],A=this._h[6],v=this._h[7],S=this._h[8],y=this._h[9],x=this._r[0],p=this._r[1],l=this._r[2],g=this._r[3],M=this._r[4],L=this._r[5],U=this._r[6],F=this._r[7],j=this._r[8],C=this._r[9];d>=16;){var R=a[c+0]|a[c+1]<<8;f+=R&8191;var G=a[c+2]|a[c+3]<<8;m+=(R>>>13|G<<3)&8191;var W=a[c+4]|a[c+5]<<8;w+=(G>>>10|W<<6)&8191;var z=a[c+6]|a[c+7]<<8;b+=(W>>>7|z<<9)&8191;var V=a[c+8]|a[c+9]<<8;_+=(z>>>4|V<<12)&8191,I+=V>>>1&8191;var B=a[c+10]|a[c+11]<<8;A+=(V>>>14|B<<2)&8191;var q=a[c+12]|a[c+13]<<8;v+=(B>>>11|q<<5)&8191;var ce=a[c+14]|a[c+15]<<8;S+=(q>>>8|ce<<8)&8191,y+=ce>>>5|h;var K=0,se=K;se+=f*x,se+=m*(5*C),se+=w*(5*j),se+=b*(5*F),se+=_*(5*U),K=se>>>13,se&=8191,se+=I*(5*L),se+=A*(5*M),se+=v*(5*g),se+=S*(5*l),se+=y*(5*p),K+=se>>>13,se&=8191;var ee=K;ee+=f*p,ee+=m*x,ee+=w*(5*C),ee+=b*(5*j),ee+=_*(5*F),K=ee>>>13,ee&=8191,ee+=I*(5*U),ee+=A*(5*L),ee+=v*(5*M),ee+=S*(5*g),ee+=y*(5*l),K+=ee>>>13,ee&=8191;var ie=K;ie+=f*l,ie+=m*p,ie+=w*x,ie+=b*(5*C),ie+=_*(5*j),K=ie>>>13,ie&=8191,ie+=I*(5*F),ie+=A*(5*U),ie+=v*(5*L),ie+=S*(5*M),ie+=y*(5*g),K+=ie>>>13,ie&=8191;var N=K;N+=f*g,N+=m*l,N+=w*p,N+=b*x,N+=_*(5*C),K=N>>>13,N&=8191,N+=I*(5*j),N+=A*(5*F),N+=v*(5*U),N+=S*(5*L),N+=y*(5*M),K+=N>>>13,N&=8191;var P=K;P+=f*M,P+=m*g,P+=w*l,P+=b*p,P+=_*x,K=P>>>13,P&=8191,P+=I*(5*C),P+=A*(5*j),P+=v*(5*F),P+=S*(5*U),P+=y*(5*L),K+=P>>>13,P&=8191;var $=K;$+=f*L,$+=m*M,$+=w*g,$+=b*l,$+=_*p,K=$>>>13,$&=8191,$+=I*x,$+=A*(5*C),$+=v*(5*j),$+=S*(5*F),$+=y*(5*U),K+=$>>>13,$&=8191;var u=K;u+=f*U,u+=m*L,u+=w*M,u+=b*g,u+=_*l,K=u>>>13,u&=8191,u+=I*p,u+=A*x,u+=v*(5*C),u+=S*(5*j),u+=y*(5*F),K+=u>>>13,u&=8191;var O=K;O+=f*F,O+=m*U,O+=w*L,O+=b*M,O+=_*g,K=O>>>13,O&=8191,O+=I*l,O+=A*p,O+=v*x,O+=S*(5*C),O+=y*(5*j),K+=O>>>13,O&=8191;var Y=K;Y+=f*j,Y+=m*F,Y+=w*U,Y+=b*L,Y+=_*M,K=Y>>>13,Y&=8191,Y+=I*g,Y+=A*l,Y+=v*p,Y+=S*x,Y+=y*(5*C),K+=Y>>>13,Y&=8191;var Q=K;Q+=f*C,Q+=m*j,Q+=w*F,Q+=b*U,Q+=_*L,K=Q>>>13,Q&=8191,Q+=I*M,Q+=A*g,Q+=v*l,Q+=S*p,Q+=y*x,K+=Q>>>13,Q&=8191,K=(K<<2)+K|0,K=K+se|0,se=K&8191,K=K>>>13,ee+=K,f=se,m=ee,w=ie,b=N,_=P,I=$,A=u,v=O,S=Y,y=Q,c+=16,d-=16}this._h[0]=f,this._h[1]=m,this._h[2]=w,this._h[3]=b,this._h[4]=_,this._h[5]=I,this._h[6]=A,this._h[7]=v,this._h[8]=S,this._h[9]=y},o.prototype.finish=function(a,c){c===void 0&&(c=0);var d=new Uint16Array(10),h,f,m,w;if(this._leftover){for(w=this._leftover,this._buffer[w++]=1;w<16;w++)this._buffer[w]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(h=this._h[1]>>>13,this._h[1]&=8191,w=2;w<10;w++)this._h[w]+=h,h=this._h[w]>>>13,this._h[w]&=8191;for(this._h[0]+=h*5,h=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=h,h=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=h,d[0]=this._h[0]+5,h=d[0]>>>13,d[0]&=8191,w=1;w<10;w++)d[w]=this._h[w]+h,h=d[w]>>>13,d[w]&=8191;for(d[9]-=8192,f=(h^1)-1,w=0;w<10;w++)d[w]&=f;for(f=~f,w=0;w<10;w++)this._h[w]=this._h[w]&f|d[w];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,m=this._h[0]+this._pad[0],this._h[0]=m&65535,w=1;w<8;w++)m=(this._h[w]+this._pad[w]|0)+(m>>>16)|0,this._h[w]=m&65535;return a[c+0]=this._h[0]>>>0,a[c+1]=this._h[0]>>>8,a[c+2]=this._h[1]>>>0,a[c+3]=this._h[1]>>>8,a[c+4]=this._h[2]>>>0,a[c+5]=this._h[2]>>>8,a[c+6]=this._h[3]>>>0,a[c+7]=this._h[3]>>>8,a[c+8]=this._h[4]>>>0,a[c+9]=this._h[4]>>>8,a[c+10]=this._h[5]>>>0,a[c+11]=this._h[5]>>>8,a[c+12]=this._h[6]>>>0,a[c+13]=this._h[6]>>>8,a[c+14]=this._h[7]>>>0,a[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(a){var c=0,d=a.length,h;if(this._leftover){h=16-this._leftover,h>d&&(h=d);for(var f=0;f<h;f++)this._buffer[this._leftover+f]=a[c+f];if(d-=h,c+=h,this._leftover+=h,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(d>=16&&(h=d-d%16,this._blocks(a,c,h),c+=h,d-=h),d){for(var f=0;f<d;f++)this._buffer[this._leftover+f]=a[c+f];this._leftover+=d}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},o.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();t.Poly1305=n;function i(o,a){var c=new n(o);c.update(a);var d=c.digest();return c.clean(),d}t.oneTimeAuth=i;function s(o,a){return o.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(o,a)}t.equal=s}(Du),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ms,r=Du,n=Yt,i=de,s=Fr;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var o=new Uint8Array(16),a=function(){function c(d){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,d.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(d)}return c.prototype.seal=function(d,h,f,m){if(d.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var w=new Uint8Array(16);w.set(d,w.length-d.length);var b=new Uint8Array(32);e.stream(this._key,w,b,4);var _=h.length+this.tagLength,I;if(m){if(m.length!==_)throw new Error("ChaCha20Poly1305: incorrect destination length");I=m}else I=new Uint8Array(_);return e.streamXOR(this._key,w,h,I,4),this._authenticate(I.subarray(I.length-this.tagLength,I.length),b,I.subarray(0,I.length-this.tagLength),f),n.wipe(w),I},c.prototype.open=function(d,h,f,m){if(d.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(h.length<this.tagLength)return null;var w=new Uint8Array(16);w.set(d,w.length-d.length);var b=new Uint8Array(32);e.stream(this._key,w,b,4);var _=new Uint8Array(this.tagLength);if(this._authenticate(_,b,h.subarray(0,h.length-this.tagLength),f),!s.equal(_,h.subarray(h.length-this.tagLength,h.length)))return null;var I=h.length-this.tagLength,A;if(m){if(m.length!==I)throw new Error("ChaCha20Poly1305: incorrect destination length");A=m}else A=new Uint8Array(I);return e.streamXOR(this._key,w,h.subarray(0,h.length-this.tagLength),A,4),n.wipe(w),A},c.prototype.clean=function(){return n.wipe(this._key),this},c.prototype._authenticate=function(d,h,f,m){var w=new r.Poly1305(h);m&&(w.update(m),m.length%16>0&&w.update(o.subarray(m.length%16))),w.update(f),f.length%16>0&&w.update(o.subarray(f.length%16));var b=new Uint8Array(8);m&&i.writeUint64LE(m.length,b),w.update(b),i.writeUint64LE(f.length,b),w.update(b);for(var _=w.digest(),I=0;I<_.length;I++)d[I]=_[I];w.clean(),n.wipe(_),n.wipe(b)},c}();t.ChaCha20Poly1305=a}(Ho);var Ou={},bi={},qo={};Object.defineProperty(qo,"__esModule",{value:!0});function Tg(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}qo.isSerializableHash=Tg,Object.defineProperty(bi,"__esModule",{value:!0});var yr=qo,Rg=Fr,Pg=Yt,Iu=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),yr.isSerializableHash(this._inner)&&yr.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Pg.wipe(n)}return t.prototype.reset=function(){if(!yr.isSerializableHash(this._inner)||!yr.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){yr.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),yr.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!yr.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!yr.isSerializableHash(this._inner)||!yr.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!yr.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();bi.HMAC=Iu;function Ng(t,e,r){var n=new Iu(t,e);n.update(r);var i=n.digest();return n.clean(),i}bi.hmac=Ng,bi.equal=Rg.equal,Object.defineProperty(Ou,"__esModule",{value:!0});var Au=bi,$u=Yt,Lg=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=Au.hmac(this._hash,n,r);this._hmac=new Au.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),$u.wipe(this._buffer),$u.wipe(this._counter),this._bufpos=0},t}(),Mg=Ou.HKDF=Lg,ys={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=de,r=Yt;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(c,d){if(d===void 0&&(d=c.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var h=0;if(this._bytesHashed+=d,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&d>0;)this._buffer[this._bufferLength++]=c[h++],d--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(d>=this.blockSize&&(h=s(this._temp,this._state,c,h,d),d%=this.blockSize);d>0;)this._buffer[this._bufferLength++]=c[h++],d--;return this},a.prototype.finish=function(c){if(!this._finished){var d=this._bytesHashed,h=this._bufferLength,f=d/536870912|0,m=d<<3,w=d%64<56?64:128;this._buffer[h]=128;for(var b=h+1;b<w-8;b++)this._buffer[b]=0;e.writeUint32BE(f,this._buffer,w-8),e.writeUint32BE(m,this._buffer,w-4),s(this._temp,this._state,this._buffer,0,w),this._finished=!0}for(var b=0;b<this.digestLength/4;b++)e.writeUint32BE(this._state[b],c,b*4);return this},a.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(c){return this._state.set(c.state),this._bufferLength=c.bufferLength,c.buffer&&this._buffer.set(c.buffer),this._bytesHashed=c.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(c){r.wipe(c.state),c.buffer&&r.wipe(c.buffer),c.bufferLength=0,c.bytesHashed=0},a}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(a,c,d,h,f){for(;f>=64;){for(var m=c[0],w=c[1],b=c[2],_=c[3],I=c[4],A=c[5],v=c[6],S=c[7],y=0;y<16;y++){var x=h+y*4;a[y]=e.readUint32BE(d,x)}for(var y=16;y<64;y++){var p=a[y-2],l=(p>>>17|p<<32-17)^(p>>>19|p<<32-19)^p>>>10;p=a[y-15];var g=(p>>>7|p<<32-7)^(p>>>18|p<<32-18)^p>>>3;a[y]=(l+a[y-7]|0)+(g+a[y-16]|0)}for(var y=0;y<64;y++){var l=(((I>>>6|I<<26)^(I>>>11|I<<21)^(I>>>25|I<<7))+(I&A^~I&v)|0)+(S+(i[y]+a[y]|0)|0)|0,g=((m>>>2|m<<32-2)^(m>>>13|m<<32-13)^(m>>>22|m<<32-22))+(m&w^m&b^w&b)|0;S=v,v=A,A=I,I=_+l|0,_=b,b=w,w=m,m=l+g|0}c[0]+=m,c[1]+=w,c[2]+=b,c[3]+=_,c[4]+=I,c[5]+=A,c[6]+=v,c[7]+=S,h+=64,f-=64}return h}function o(a){var c=new n;c.update(a);var d=c.digest();return c.clean(),d}t.hash=o})(ys);var Ko={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=Nn,r=Yt;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(y){const x=new Float64Array(16);if(y)for(let p=0;p<y.length;p++)x[p]=y[p];return x}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function o(y){let x=1;for(let p=0;p<16;p++){let l=y[p]+x+65535;x=Math.floor(l/65536),y[p]=l-x*65536}y[0]+=x-1+37*(x-1)}function a(y,x,p){const l=~(p-1);for(let g=0;g<16;g++){const M=l&(y[g]^x[g]);y[g]^=M,x[g]^=M}}function c(y,x){const p=n(),l=n();for(let g=0;g<16;g++)l[g]=x[g];o(l),o(l),o(l);for(let g=0;g<2;g++){p[0]=l[0]-65517;for(let L=1;L<15;L++)p[L]=l[L]-65535-(p[L-1]>>16&1),p[L-1]&=65535;p[15]=l[15]-32767-(p[14]>>16&1);const M=p[15]>>16&1;p[14]&=65535,a(l,p,1-M)}for(let g=0;g<16;g++)y[2*g]=l[g]&255,y[2*g+1]=l[g]>>8}function d(y,x){for(let p=0;p<16;p++)y[p]=x[2*p]+(x[2*p+1]<<8);y[15]&=32767}function h(y,x,p){for(let l=0;l<16;l++)y[l]=x[l]+p[l]}function f(y,x,p){for(let l=0;l<16;l++)y[l]=x[l]-p[l]}function m(y,x,p){let l,g,M=0,L=0,U=0,F=0,j=0,C=0,R=0,G=0,W=0,z=0,V=0,B=0,q=0,ce=0,K=0,se=0,ee=0,ie=0,N=0,P=0,$=0,u=0,O=0,Y=0,Q=0,Ee=0,Se=0,me=0,Ne=0,Xe=0,Ve=0,$e=p[0],Oe=p[1],ye=p[2],ve=p[3],we=p[4],fe=p[5],he=p[6],oe=p[7],be=p[8],xe=p[9],le=p[10],Ie=p[11],Le=p[12],je=p[13],ke=p[14],Ue=p[15];l=x[0],M+=l*$e,L+=l*Oe,U+=l*ye,F+=l*ve,j+=l*we,C+=l*fe,R+=l*he,G+=l*oe,W+=l*be,z+=l*xe,V+=l*le,B+=l*Ie,q+=l*Le,ce+=l*je,K+=l*ke,se+=l*Ue,l=x[1],L+=l*$e,U+=l*Oe,F+=l*ye,j+=l*ve,C+=l*we,R+=l*fe,G+=l*he,W+=l*oe,z+=l*be,V+=l*xe,B+=l*le,q+=l*Ie,ce+=l*Le,K+=l*je,se+=l*ke,ee+=l*Ue,l=x[2],U+=l*$e,F+=l*Oe,j+=l*ye,C+=l*ve,R+=l*we,G+=l*fe,W+=l*he,z+=l*oe,V+=l*be,B+=l*xe,q+=l*le,ce+=l*Ie,K+=l*Le,se+=l*je,ee+=l*ke,ie+=l*Ue,l=x[3],F+=l*$e,j+=l*Oe,C+=l*ye,R+=l*ve,G+=l*we,W+=l*fe,z+=l*he,V+=l*oe,B+=l*be,q+=l*xe,ce+=l*le,K+=l*Ie,se+=l*Le,ee+=l*je,ie+=l*ke,N+=l*Ue,l=x[4],j+=l*$e,C+=l*Oe,R+=l*ye,G+=l*ve,W+=l*we,z+=l*fe,V+=l*he,B+=l*oe,q+=l*be,ce+=l*xe,K+=l*le,se+=l*Ie,ee+=l*Le,ie+=l*je,N+=l*ke,P+=l*Ue,l=x[5],C+=l*$e,R+=l*Oe,G+=l*ye,W+=l*ve,z+=l*we,V+=l*fe,B+=l*he,q+=l*oe,ce+=l*be,K+=l*xe,se+=l*le,ee+=l*Ie,ie+=l*Le,N+=l*je,P+=l*ke,$+=l*Ue,l=x[6],R+=l*$e,G+=l*Oe,W+=l*ye,z+=l*ve,V+=l*we,B+=l*fe,q+=l*he,ce+=l*oe,K+=l*be,se+=l*xe,ee+=l*le,ie+=l*Ie,N+=l*Le,P+=l*je,$+=l*ke,u+=l*Ue,l=x[7],G+=l*$e,W+=l*Oe,z+=l*ye,V+=l*ve,B+=l*we,q+=l*fe,ce+=l*he,K+=l*oe,se+=l*be,ee+=l*xe,ie+=l*le,N+=l*Ie,P+=l*Le,$+=l*je,u+=l*ke,O+=l*Ue,l=x[8],W+=l*$e,z+=l*Oe,V+=l*ye,B+=l*ve,q+=l*we,ce+=l*fe,K+=l*he,se+=l*oe,ee+=l*be,ie+=l*xe,N+=l*le,P+=l*Ie,$+=l*Le,u+=l*je,O+=l*ke,Y+=l*Ue,l=x[9],z+=l*$e,V+=l*Oe,B+=l*ye,q+=l*ve,ce+=l*we,K+=l*fe,se+=l*he,ee+=l*oe,ie+=l*be,N+=l*xe,P+=l*le,$+=l*Ie,u+=l*Le,O+=l*je,Y+=l*ke,Q+=l*Ue,l=x[10],V+=l*$e,B+=l*Oe,q+=l*ye,ce+=l*ve,K+=l*we,se+=l*fe,ee+=l*he,ie+=l*oe,N+=l*be,P+=l*xe,$+=l*le,u+=l*Ie,O+=l*Le,Y+=l*je,Q+=l*ke,Ee+=l*Ue,l=x[11],B+=l*$e,q+=l*Oe,ce+=l*ye,K+=l*ve,se+=l*we,ee+=l*fe,ie+=l*he,N+=l*oe,P+=l*be,$+=l*xe,u+=l*le,O+=l*Ie,Y+=l*Le,Q+=l*je,Ee+=l*ke,Se+=l*Ue,l=x[12],q+=l*$e,ce+=l*Oe,K+=l*ye,se+=l*ve,ee+=l*we,ie+=l*fe,N+=l*he,P+=l*oe,$+=l*be,u+=l*xe,O+=l*le,Y+=l*Ie,Q+=l*Le,Ee+=l*je,Se+=l*ke,me+=l*Ue,l=x[13],ce+=l*$e,K+=l*Oe,se+=l*ye,ee+=l*ve,ie+=l*we,N+=l*fe,P+=l*he,$+=l*oe,u+=l*be,O+=l*xe,Y+=l*le,Q+=l*Ie,Ee+=l*Le,Se+=l*je,me+=l*ke,Ne+=l*Ue,l=x[14],K+=l*$e,se+=l*Oe,ee+=l*ye,ie+=l*ve,N+=l*we,P+=l*fe,$+=l*he,u+=l*oe,O+=l*be,Y+=l*xe,Q+=l*le,Ee+=l*Ie,Se+=l*Le,me+=l*je,Ne+=l*ke,Xe+=l*Ue,l=x[15],se+=l*$e,ee+=l*Oe,ie+=l*ye,N+=l*ve,P+=l*we,$+=l*fe,u+=l*he,O+=l*oe,Y+=l*be,Q+=l*xe,Ee+=l*le,Se+=l*Ie,me+=l*Le,Ne+=l*je,Xe+=l*ke,Ve+=l*Ue,M+=38*ee,L+=38*ie,U+=38*N,F+=38*P,j+=38*$,C+=38*u,R+=38*O,G+=38*Y,W+=38*Q,z+=38*Ee,V+=38*Se,B+=38*me,q+=38*Ne,ce+=38*Xe,K+=38*Ve,g=1,l=M+g+65535,g=Math.floor(l/65536),M=l-g*65536,l=L+g+65535,g=Math.floor(l/65536),L=l-g*65536,l=U+g+65535,g=Math.floor(l/65536),U=l-g*65536,l=F+g+65535,g=Math.floor(l/65536),F=l-g*65536,l=j+g+65535,g=Math.floor(l/65536),j=l-g*65536,l=C+g+65535,g=Math.floor(l/65536),C=l-g*65536,l=R+g+65535,g=Math.floor(l/65536),R=l-g*65536,l=G+g+65535,g=Math.floor(l/65536),G=l-g*65536,l=W+g+65535,g=Math.floor(l/65536),W=l-g*65536,l=z+g+65535,g=Math.floor(l/65536),z=l-g*65536,l=V+g+65535,g=Math.floor(l/65536),V=l-g*65536,l=B+g+65535,g=Math.floor(l/65536),B=l-g*65536,l=q+g+65535,g=Math.floor(l/65536),q=l-g*65536,l=ce+g+65535,g=Math.floor(l/65536),ce=l-g*65536,l=K+g+65535,g=Math.floor(l/65536),K=l-g*65536,l=se+g+65535,g=Math.floor(l/65536),se=l-g*65536,M+=g-1+37*(g-1),g=1,l=M+g+65535,g=Math.floor(l/65536),M=l-g*65536,l=L+g+65535,g=Math.floor(l/65536),L=l-g*65536,l=U+g+65535,g=Math.floor(l/65536),U=l-g*65536,l=F+g+65535,g=Math.floor(l/65536),F=l-g*65536,l=j+g+65535,g=Math.floor(l/65536),j=l-g*65536,l=C+g+65535,g=Math.floor(l/65536),C=l-g*65536,l=R+g+65535,g=Math.floor(l/65536),R=l-g*65536,l=G+g+65535,g=Math.floor(l/65536),G=l-g*65536,l=W+g+65535,g=Math.floor(l/65536),W=l-g*65536,l=z+g+65535,g=Math.floor(l/65536),z=l-g*65536,l=V+g+65535,g=Math.floor(l/65536),V=l-g*65536,l=B+g+65535,g=Math.floor(l/65536),B=l-g*65536,l=q+g+65535,g=Math.floor(l/65536),q=l-g*65536,l=ce+g+65535,g=Math.floor(l/65536),ce=l-g*65536,l=K+g+65535,g=Math.floor(l/65536),K=l-g*65536,l=se+g+65535,g=Math.floor(l/65536),se=l-g*65536,M+=g-1+37*(g-1),y[0]=M,y[1]=L,y[2]=U,y[3]=F,y[4]=j,y[5]=C,y[6]=R,y[7]=G,y[8]=W,y[9]=z,y[10]=V,y[11]=B,y[12]=q,y[13]=ce,y[14]=K,y[15]=se}function w(y,x){m(y,x,x)}function b(y,x){const p=n();for(let l=0;l<16;l++)p[l]=x[l];for(let l=253;l>=0;l--)w(p,p),l!==2&&l!==4&&m(p,p,x);for(let l=0;l<16;l++)y[l]=p[l]}function _(y,x){const p=new Uint8Array(32),l=new Float64Array(80),g=n(),M=n(),L=n(),U=n(),F=n(),j=n();for(let W=0;W<31;W++)p[W]=y[W];p[31]=y[31]&127|64,p[0]&=248,d(l,x);for(let W=0;W<16;W++)M[W]=l[W];g[0]=U[0]=1;for(let W=254;W>=0;--W){const z=p[W>>>3]>>>(W&7)&1;a(g,M,z),a(L,U,z),h(F,g,L),f(g,g,L),h(L,M,U),f(M,M,U),w(U,F),w(j,g),m(g,L,g),m(L,M,F),h(F,g,L),f(g,g,L),w(M,g),f(L,U,j),m(g,L,s),h(g,g,U),m(L,L,g),m(g,U,j),m(U,M,l),w(M,F),a(g,M,z),a(L,U,z)}for(let W=0;W<16;W++)l[W+16]=g[W],l[W+32]=L[W],l[W+48]=M[W],l[W+64]=U[W];const C=l.subarray(32),R=l.subarray(16);b(C,C),m(R,R,C);const G=new Uint8Array(32);return c(G,R),G}t.scalarMult=_;function I(y){return _(y,i)}t.scalarMultBase=I;function A(y){if(y.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const x=new Uint8Array(y);return{publicKey:I(x),secretKey:x}}t.generateKeyPairFromSeed=A;function v(y){const x=(0,e.randomBytes)(32,y),p=A(x);return(0,r.wipe)(x),p}t.generateKeyPair=v;function S(y,x,p=!1){if(y.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(x.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const l=_(y,x);if(p){let g=0;for(let M=0;M<l.length;M++)g|=l[M];if(g===0)throw new Error("X25519: invalid shared key")}return l}t.sharedKey=S})(Ko);var Tu=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},Ug=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Fg=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),jg=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),kg=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Bg=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),zg=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Wg=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ru=3,Hg=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",zg]],Pu=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Vg(t){return t?Nu(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Bg:typeof navigator<"u"?Nu(navigator.userAgent):Gg()}function qg(t){return t!==""&&Hg.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function Nu(t){var e=qg(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new kg;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Ru&&(i=Tu(Tu([],i,!0),Yg(Ru-i.length),!0)):i=[];var s=i.join("."),o=Kg(t),a=Wg.exec(t);return a&&a[1]?new jg(r,s,o,a[1]):new Ug(r,s,o)}function Kg(t){for(var e=0,r=Pu.length;e<r;e++){var n=Pu[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function Gg(){var t=typeof process<"u"&&process.version;return t?new Fg(process.version.slice(1)):null}function Yg(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var qe={};Object.defineProperty(qe,"__esModule",{value:!0}),qe.getLocalStorage=qe.getLocalStorageOrThrow=qe.getCrypto=qe.getCryptoOrThrow=Mu=qe.getLocation=qe.getLocationOrThrow=Go=qe.getNavigator=qe.getNavigatorOrThrow=Lu=qe.getDocument=qe.getDocumentOrThrow=qe.getFromWindowOrThrow=qe.getFromWindow=void 0;function hn(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}qe.getFromWindow=hn;function Ln(t){const e=hn(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}qe.getFromWindowOrThrow=Ln;function Jg(){return Ln("document")}qe.getDocumentOrThrow=Jg;function Zg(){return hn("document")}var Lu=qe.getDocument=Zg;function Xg(){return Ln("navigator")}qe.getNavigatorOrThrow=Xg;function Qg(){return hn("navigator")}var Go=qe.getNavigator=Qg;function em(){return Ln("location")}qe.getLocationOrThrow=em;function tm(){return hn("location")}var Mu=qe.getLocation=tm;function rm(){return Ln("crypto")}qe.getCryptoOrThrow=rm;function nm(){return hn("crypto")}qe.getCrypto=nm;function im(){return Ln("localStorage")}qe.getLocalStorageOrThrow=im;function sm(){return hn("localStorage")}qe.getLocalStorage=sm;var Yo={};Object.defineProperty(Yo,"__esModule",{value:!0});var Uu=Yo.getWindowMetadata=void 0;const Fu=qe;function om(){let t,e;try{t=Fu.getDocumentOrThrow(),e=Fu.getLocationOrThrow()}catch{return null}function r(){const f=t.getElementsByTagName("link"),m=[];for(let w=0;w<f.length;w++){const b=f[w],_=b.getAttribute("rel");if(_&&_.toLowerCase().indexOf("icon")>-1){const I=b.getAttribute("href");if(I)if(I.toLowerCase().indexOf("https:")===-1&&I.toLowerCase().indexOf("http:")===-1&&I.indexOf("//")!==0){let A=e.protocol+"//"+e.host;if(I.indexOf("/")===0)A+=I;else{const v=e.pathname.split("/");v.pop();const S=v.join("/");A+=S+"/"+I}m.push(A)}else if(I.indexOf("//")===0){const A=e.protocol+I;m.push(A)}else m.push(I)}}return m}function n(...f){const m=t.getElementsByTagName("meta");for(let w=0;w<m.length;w++){const b=m[w],_=["itemprop","property","name"].map(I=>b.getAttribute(I)).filter(I=>I?f.includes(I):!1);if(_.length&&_){const I=b.getAttribute("content");if(I)return I}}return""}function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),c=e.origin,d=r();return{description:a,url:c,icons:d,name:o}}Uu=Yo.getWindowMetadata=om;var _i={},am=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),ju="%[a-f0-9]{2}",ku=new RegExp("("+ju+")|([^%]+?)","gi"),Bu=new RegExp("("+ju+")+","gi");function Jo(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],Jo(r),Jo(n))}function cm(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(ku)||[],r=1;r<e.length;r++)t=Jo(e,r).join(""),e=t.match(ku)||[];return t}}function lm(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=Bu.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=cm(r[0]);n!==r[0]&&(e[r[0]]=n)}r=Bu.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}var um=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return lm(t)}},hm=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},dm=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var o=n[s],a=t[o];(i?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r};(function(t){const e=am,r=um,n=hm,i=dm,s=v=>v==null,o=Symbol("encodeFragmentIdentifier");function a(v){switch(v.arrayFormat){case"index":return S=>(y,x)=>{const p=y.length;return x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?y:x===null?[...y,[h(S,v),"[",p,"]"].join("")]:[...y,[h(S,v),"[",h(p,v),"]=",h(x,v)].join("")]};case"bracket":return S=>(y,x)=>x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?y:x===null?[...y,[h(S,v),"[]"].join("")]:[...y,[h(S,v),"[]=",h(x,v)].join("")];case"colon-list-separator":return S=>(y,x)=>x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?y:x===null?[...y,[h(S,v),":list="].join("")]:[...y,[h(S,v),":list=",h(x,v)].join("")];case"comma":case"separator":case"bracket-separator":{const S=v.arrayFormat==="bracket-separator"?"[]=":"=";return y=>(x,p)=>p===void 0||v.skipNull&&p===null||v.skipEmptyString&&p===""?x:(p=p===null?"":p,x.length===0?[[h(y,v),S,h(p,v)].join("")]:[[x,h(p,v)].join(v.arrayFormatSeparator)])}default:return S=>(y,x)=>x===void 0||v.skipNull&&x===null||v.skipEmptyString&&x===""?y:x===null?[...y,h(S,v)]:[...y,[h(S,v),"=",h(x,v)].join("")]}}function c(v){let S;switch(v.arrayFormat){case"index":return(y,x,p)=>{if(S=/\[(\d*)\]$/.exec(y),y=y.replace(/\[\d*\]$/,""),!S){p[y]=x;return}p[y]===void 0&&(p[y]={}),p[y][S[1]]=x};case"bracket":return(y,x,p)=>{if(S=/(\[\])$/.exec(y),y=y.replace(/\[\]$/,""),!S){p[y]=x;return}if(p[y]===void 0){p[y]=[x];return}p[y]=[].concat(p[y],x)};case"colon-list-separator":return(y,x,p)=>{if(S=/(:list)$/.exec(y),y=y.replace(/:list$/,""),!S){p[y]=x;return}if(p[y]===void 0){p[y]=[x];return}p[y]=[].concat(p[y],x)};case"comma":case"separator":return(y,x,p)=>{const l=typeof x=="string"&&x.includes(v.arrayFormatSeparator),g=typeof x=="string"&&!l&&f(x,v).includes(v.arrayFormatSeparator);x=g?f(x,v):x;const M=l||g?x.split(v.arrayFormatSeparator).map(L=>f(L,v)):x===null?x:f(x,v);p[y]=M};case"bracket-separator":return(y,x,p)=>{const l=/(\[\])$/.test(y);if(y=y.replace(/\[\]$/,""),!l){p[y]=x&&f(x,v);return}const g=x===null?[]:x.split(v.arrayFormatSeparator).map(M=>f(M,v));if(p[y]===void 0){p[y]=g;return}p[y]=[].concat(p[y],g)};default:return(y,x,p)=>{if(p[y]===void 0){p[y]=x;return}p[y]=[].concat(p[y],x)}}}function d(v){if(typeof v!="string"||v.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function h(v,S){return S.encode?S.strict?e(v):encodeURIComponent(v):v}function f(v,S){return S.decode?r(v):v}function m(v){return Array.isArray(v)?v.sort():typeof v=="object"?m(Object.keys(v)).sort((S,y)=>Number(S)-Number(y)).map(S=>v[S]):v}function w(v){const S=v.indexOf("#");return S!==-1&&(v=v.slice(0,S)),v}function b(v){let S="";const y=v.indexOf("#");return y!==-1&&(S=v.slice(y)),S}function _(v){v=w(v);const S=v.indexOf("?");return S===-1?"":v.slice(S+1)}function I(v,S){return S.parseNumbers&&!Number.isNaN(Number(v))&&typeof v=="string"&&v.trim()!==""?v=Number(v):S.parseBooleans&&v!==null&&(v.toLowerCase()==="true"||v.toLowerCase()==="false")&&(v=v.toLowerCase()==="true"),v}function A(v,S){S=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},S),d(S.arrayFormatSeparator);const y=c(S),x=Object.create(null);if(typeof v!="string"||(v=v.trim().replace(/^[?#&]/,""),!v))return x;for(const p of v.split("&")){if(p==="")continue;let[l,g]=n(S.decode?p.replace(/\+/g," "):p,"=");g=g===void 0?null:["comma","separator","bracket-separator"].includes(S.arrayFormat)?g:f(g,S),y(f(l,S),g,x)}for(const p of Object.keys(x)){const l=x[p];if(typeof l=="object"&&l!==null)for(const g of Object.keys(l))l[g]=I(l[g],S);else x[p]=I(l,S)}return S.sort===!1?x:(S.sort===!0?Object.keys(x).sort():Object.keys(x).sort(S.sort)).reduce((p,l)=>{const g=x[l];return g&&typeof g=="object"&&!Array.isArray(g)?p[l]=m(g):p[l]=g,p},Object.create(null))}t.extract=_,t.parse=A,t.stringify=(v,S)=>{if(!v)return"";S=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},S),d(S.arrayFormatSeparator);const y=g=>S.skipNull&&s(v[g])||S.skipEmptyString&&v[g]==="",x=a(S),p={};for(const g of Object.keys(v))y(g)||(p[g]=v[g]);const l=Object.keys(p);return S.sort!==!1&&l.sort(S.sort),l.map(g=>{const M=v[g];return M===void 0?"":M===null?h(g,S):Array.isArray(M)?M.length===0&&S.arrayFormat==="bracket-separator"?h(g,S)+"[]":M.reduce(x(g),[]).join("&"):h(g,S)+"="+h(M,S)}).filter(g=>g.length>0).join("&")},t.parseUrl=(v,S)=>{S=Object.assign({decode:!0},S);const[y,x]=n(v,"#");return Object.assign({url:y.split("?")[0]||"",query:A(_(v),S)},S&&S.parseFragmentIdentifier&&x?{fragmentIdentifier:f(x,S)}:{})},t.stringifyUrl=(v,S)=>{S=Object.assign({encode:!0,strict:!0,[o]:!0},S);const y=w(v.url).split("?")[0]||"",x=t.extract(v.url),p=t.parse(x,{sort:!1}),l=Object.assign(p,v.query);let g=t.stringify(l,S);g&&(g=`?${g}`);let M=b(v.url);return v.fragmentIdentifier&&(M=`#${S[o]?h(v.fragmentIdentifier,S):v.fragmentIdentifier}`),`${y}${g}${M}`},t.pick=(v,S,y)=>{y=Object.assign({parseFragmentIdentifier:!0,[o]:!1},y);const{url:x,query:p,fragmentIdentifier:l}=t.parseUrl(v,y);return t.stringifyUrl({url:x,query:i(p,S),fragmentIdentifier:l},y)},t.exclude=(v,S,y)=>{const x=Array.isArray(S)?p=>!S.includes(p):(p,l)=>!S(p,l);return t.pick(v,x,y)}})(_i);const fm={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function zu(t,e){return t.includes(":")?[t]:e.chains||[]}const Wu="base10",jt="base16",Zo="base64pad",Xo="utf8",Hu=0,dn=1,pm=0,Vu=1,Qo=12,ea=32;function gm(){const t=Ko.generateKeyPair();return{privateKey:Ft(t.secretKey,jt),publicKey:Ft(t.publicKey,jt)}}function ta(){const t=Nn.randomBytes(ea);return Ft(t,jt)}function mm(t,e){const r=Ko.sharedKey(Ht(t,jt),Ht(e,jt)),n=new Mg(ys.SHA256,r).expand(ea);return Ft(n,jt)}function ym(t){const e=ys.hash(Ht(t,jt));return Ft(e,jt)}function Mn(t){const e=ys.hash(Ht(t,Xo));return Ft(e,jt)}function wm(t){return Ht(`${t}`,Wu)}function Ei(t){return Number(Ft(t,Wu))}function vm(t){const e=wm(typeof t.type<"u"?t.type:Hu);if(Ei(e)===dn&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Ht(t.senderPublicKey,jt):void 0,n=typeof t.iv<"u"?Ht(t.iv,jt):Nn.randomBytes(Qo),i=new Ho.ChaCha20Poly1305(Ht(t.symKey,jt)).seal(n,Ht(t.message,Xo));return _m({type:e,sealed:i,iv:n,senderPublicKey:r})}function bm(t){const e=new Ho.ChaCha20Poly1305(Ht(t.symKey,jt)),{sealed:r,iv:n}=ws(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return Ft(i,Xo)}function _m(t){if(Ei(t.type)===dn){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ft(zo([t.type,t.senderPublicKey,t.iv,t.sealed]),Zo)}return Ft(zo([t.type,t.iv,t.sealed]),Zo)}function ws(t){const e=Ht(t,Zo),r=e.slice(pm,Vu),n=Vu;if(Ei(r)===dn){const a=n+ea,c=a+Qo,d=e.slice(n,a),h=e.slice(a,c),f=e.slice(c);return{type:r,sealed:f,iv:h,senderPublicKey:d}}const i=n+Qo,s=e.slice(n,i),o=e.slice(i);return{type:r,sealed:o,iv:s}}function Em(t,e){const r=ws(t);return qu({type:Ei(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Ft(r.senderPublicKey,jt):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function qu(t){const e=(t==null?void 0:t.type)||Hu;if(e===dn){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function Ku(t){return t.type===dn&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var Sm=Object.defineProperty,Gu=Object.getOwnPropertySymbols,xm=Object.prototype.hasOwnProperty,Dm=Object.prototype.propertyIsEnumerable,Yu=(t,e,r)=>e in t?Sm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ju=(t,e)=>{for(var r in e||(e={}))xm.call(e,r)&&Yu(t,r,e[r]);if(Gu)for(var r of Gu(e))Dm.call(e,r)&&Yu(t,r,e[r]);return t};const Cm="ReactNative",jr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Om="js";function ra(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Zu(){return!Lu()&&!!Go()&&navigator.product===Cm}function na(){return!ra()&&!!Go()}function ia(){return Zu()?jr.reactNative:ra()?jr.node:na()?jr.browser:jr.unknown}function Im(t,e){let r=_i.parse(t);return r=Ju(Ju({},r),e),t=_i.stringify(r),t}function Am(){return Uu()||{name:"",description:"",url:"",icons:[""]}}function $m(){if(ia()===jr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=Vg();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Tm(){var t;const e=ia();return e===jr.browser?[e,((t=Mu())==null?void 0:t.host)||"unknown"].join(":"):e}function Rm(t,e,r){const n=$m(),i=Tm();return[[t,e].join("-"),[Om,r].join("-"),n,i].join("/")}function Pm({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o}){const a=r.split("?"),c=Rm(t,e,n),d={auth:i,ua:c,projectId:s,useOnCloseEvent:o||void 0},h=Im(a[1]||"",d);return a[0]+"?"+h}function fn(t,e){return t.filter(r=>e.includes(r)).length===t.length}function Xu(t){return Object.fromEntries(t.entries())}function Qu(t){return new Map(Object.entries(t))}function Un(t=re.FIVE_MINUTES,e){const r=re.toMiliseconds(t||re.FIVE_MINUTES);let n,i,s;return{resolve:o=>{s&&n&&(clearTimeout(s),n(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),n=o,i=a})}}function vs(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function eh(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Nm(t){return eh("topic",t)}function Lm(t){return eh("id",t)}function th(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function hr(t,e){return re.fromMiliseconds((e||Date.now())+re.toMiliseconds(t))}function kr(t){return Date.now()>=re.toMiliseconds(t)}function gt(t,e){return`${t}${e?`:${e}`:""}`}async function Mm({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const s=`${i}/wc?requestId=${t}&sessionTopic=${e}`,o=ia();o===jr.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===jr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}const Um="irn";function sa(t){return(t==null?void 0:t.relay)||{protocol:Um}}function bs(t){const e=fm[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Fm=Object.defineProperty,rh=Object.getOwnPropertySymbols,jm=Object.prototype.hasOwnProperty,km=Object.prototype.propertyIsEnumerable,nh=(t,e,r)=>e in t?Fm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bm=(t,e)=>{for(var r in e||(e={}))jm.call(e,r)&&nh(t,r,e[r]);if(rh)for(var r of rh(e))km.call(e,r)&&nh(t,r,e[r]);return t};function zm(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function Wm(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=_i.parse(s);return{protocol:n,topic:Hm(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:zm(o)}}function Hm(t){return t.startsWith("//")?t.substring(2):t}function Vm(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function qm(t){return`${t.protocol}:${t.topic}@${t.version}?`+_i.stringify(Bm({symKey:t.symKey},Vm(t.relay)))}function Fn(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Km(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Fn(r.accounts))}),e}function Gm(t,e){const r=[];return Object.values(t).forEach(n=>{Fn(n.accounts).includes(e)&&r.push(...n.methods)}),r}function Ym(t,e){const r=[];return Object.values(t).forEach(n=>{Fn(n.accounts).includes(e)&&r.push(...n.events)}),r}function Jm(t,e){const r=Es(t,e);if(r)throw new Error(r.message);const n={};for(const[i,s]of Object.entries(t))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return n}const Zm={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Xm={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function X(t,e){const{message:r,code:n}=Xm[t];return{message:e?`${r} ${e}`:r,code:n}}function bt(t,e){const{message:r,code:n}=Zm[t];return{message:e?`${r} ${e}`:r,code:n}}function Si(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function xi(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function kt(t){return typeof t>"u"}function St(t,e){return e&&kt(t)?!0:typeof t=="string"&&!!t.trim().length}function oa(t,e){return e&&kt(t)?!0:typeof t=="number"&&!isNaN(t)}function Qm(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return fn(i,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:d}=t.namespaces[o],h=Fn(a),f=r[o];(!fn(zu(o,f),h)||!fn(f.methods,c)||!fn(f.events,d))&&(s=!1)}),s):!1}function _s(t){return St(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function ey(t){if(St(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&_s(r)}}return!1}function ty(t){if(St(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function ry(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function ny(t){return t==null?void 0:t.topic}function iy(t,e){let r=null;return St(t==null?void 0:t.publicKey,!1)||(r=X("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function ih(t){let e=!0;return Si(t)?t.length&&(e=t.every(r=>St(r,!1))):e=!1,e}function sy(t,e,r){let n=null;return Si(e)&&e.length?e.forEach(i=>{n||_s(i)||(n=bt("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):_s(t)||(n=bt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function oy(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=sy(i,zu(i,s),`${e} ${r}`);o&&(n=o)}),n}function ay(t,e){let r=null;return Si(t)?t.forEach(n=>{r||ey(n)||(r=bt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=bt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function cy(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=ay(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function ly(t,e){let r=null;return ih(t==null?void 0:t.methods)?ih(t==null?void 0:t.events)||(r=bt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=bt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function sh(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=ly(n,`${e}, namespace`);i&&(r=i)}),r}function uy(t,e,r){let n=null;if(t&&xi(t)){const i=sh(t,e);i&&(n=i);const s=oy(t,e,r);s&&(n=s)}else n=X("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function Es(t,e){let r=null;if(t&&xi(t)){const n=sh(t,e);n&&(r=n);const i=cy(t,e);i&&(r=i)}else r=X("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function oh(t){return St(t.protocol,!0)}function hy(t,e){let r=!1;return e&&!t?r=!0:t&&Si(t)&&t.length&&t.forEach(n=>{r=oh(n)}),r}function dy(t){return typeof t=="number"}function Vt(t){return typeof t<"u"&&typeof t!==null}function fy(t){return!(!t||typeof t!="object"||!t.code||!oa(t.code,!1)||!t.message||!St(t.message,!1))}function py(t){return!(kt(t)||!St(t.method,!1))}function gy(t){return!(kt(t)||kt(t.result)&&kt(t.error)||!oa(t.id,!1)||!St(t.jsonrpc,!1))}function my(t){return!(kt(t)||!St(t.name,!1))}function ah(t,e){return!(!_s(e)||!Km(t).includes(e))}function yy(t,e,r){return St(r,!1)?Gm(t,e).includes(r):!1}function wy(t,e,r){return St(r,!1)?Ym(t,e).includes(r):!1}function ch(t,e,r){let n=null;const i=vy(t),s=by(e),o=Object.keys(i),a=Object.keys(s),c=lh(Object.keys(t)),d=lh(Object.keys(e)),h=c.filter(f=>!d.includes(f));return h.length&&(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${h.toString()}
      Received: ${Object.keys(e).toString()}`)),fn(o,a)||(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(f=>{if(!f.includes(":")||n)return;const m=Fn(e[f].accounts);m.includes(f)||(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${f}
        Required: ${f}
        Approved: ${m.toString()}`))}),o.forEach(f=>{n||(fn(i[f].methods,s[f].methods)?fn(i[f].events,s[f].events)||(n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${f}`)):n=X("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${f}`))}),n}function vy(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function lh(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function by(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Fn(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function _y(t,e){return oa(t,!1)&&t<=e.max&&t>=e.min}const Ey="PARSE_ERROR",Sy="INVALID_REQUEST",xy="METHOD_NOT_FOUND",Dy="INVALID_PARAMS",uh="INTERNAL_ERROR",aa="SERVER_ERROR",Cy=[-32700,-32600,-32601,-32602,-32603],Di={[Ey]:{code:-32700,message:"Parse error"},[Sy]:{code:-32600,message:"Invalid Request"},[xy]:{code:-32601,message:"Method not found"},[Dy]:{code:-32602,message:"Invalid params"},[uh]:{code:-32603,message:"Internal error"},[aa]:{code:-32e3,message:"Server error"}},hh=aa;function Oy(t){return Cy.includes(t)}function dh(t){return Object.keys(Di).includes(t)?Di[t]:Di[hh]}function Iy(t){const e=Object.values(Di).find(r=>r.code===t);return e||Di[hh]}function Ay(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var fh={},Cr={},ph;function $y(){if(ph)return Cr;ph=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.isBrowserCryptoAvailable=Cr.getSubtleCrypto=Cr.getBrowerCrypto=void 0;function t(){return(Kt==null?void 0:Kt.crypto)||(Kt==null?void 0:Kt.msCrypto)||{}}Cr.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Cr.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Cr.isBrowserCryptoAvailable=r,Cr}var Or={},gh;function Ty(){if(gh)return Or;gh=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.isBrowser=Or.isNode=Or.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Or.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Or.isNode=e;function r(){return!t()&&!e()}return Or.isBrowser=r,Or}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tr;e.__exportStar($y(),t),e.__exportStar(Ty(),t)})(fh);function mh(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function ca(t=6){return BigInt(mh(t))}function Ss(t,e,r){return{id:r||mh(),jsonrpc:"2.0",method:t,params:e}}function la(t,e){return{id:t,jsonrpc:"2.0",result:e}}function ua(t,e,r){return{id:t,jsonrpc:"2.0",error:Ry(e,r)}}function Ry(t,e){return typeof t>"u"?dh(uh):(typeof t=="string"&&(t=Object.assign(Object.assign({},dh(aa)),{message:t})),typeof e<"u"&&(t.data=e),Oy(t.code)&&(t=Iy(t.code)),t)}class Py{}class Ny extends Py{constructor(){super()}}class Ly extends Ny{constructor(e){super()}}const My="^wss?:";function Uy(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Fy(t,e){const r=Uy(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function yh(t){return Fy(t,My)}function jy(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function wh(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function ha(t){return wh(t)&&"method"in t}function xs(t){return wh(t)&&(Ir(t)||dr(t))}function Ir(t){return"result"in t}function dr(t){return"error"in t}class ky extends Ly{constructor(e){super(e),this.events=new ur.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Ss(e.method,e.params||[],e.id||ca().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{dr(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),xs(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const By=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),zy=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",vh=t=>t.split("?")[0],bh=10,Wy=By();class Hy{constructor(e){if(this.url=e,this.events=new ur.EventEmitter,this.registering=!1,!yh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Lo(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!yh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=fh.isReactNative()?void 0:{rejectUnauthorized:!jy(e)},s=new Wy(e,[],i);zy()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?nu(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=ua(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return Ay(e,vh(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>bh&&this.events.setMaxListeners(bh)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${vh(this.url)}`));return this.events.emit("register_error",r),r}}var Ds={exports:{}};Ds.exports,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",d="[object AsyncFunction]",h="[object Boolean]",f="[object Date]",m="[object Error]",w="[object Function]",b="[object GeneratorFunction]",_="[object Map]",I="[object Number]",A="[object Null]",v="[object Object]",S="[object Promise]",y="[object Proxy]",x="[object RegExp]",p="[object Set]",l="[object String]",g="[object Symbol]",M="[object Undefined]",L="[object WeakMap]",U="[object ArrayBuffer]",F="[object DataView]",j="[object Float32Array]",C="[object Float64Array]",R="[object Int8Array]",G="[object Int16Array]",W="[object Int32Array]",z="[object Uint8Array]",V="[object Uint8ClampedArray]",B="[object Uint16Array]",q="[object Uint32Array]",ce=/[\\^$.*+?()[\]{}|]/g,K=/^\[object .+?Constructor\]$/,se=/^(?:0|[1-9]\d*)$/,ee={};ee[j]=ee[C]=ee[R]=ee[G]=ee[W]=ee[z]=ee[V]=ee[B]=ee[q]=!0,ee[a]=ee[c]=ee[U]=ee[h]=ee[F]=ee[f]=ee[m]=ee[w]=ee[_]=ee[I]=ee[v]=ee[x]=ee[p]=ee[l]=ee[L]=!1;var ie=typeof Kt=="object"&&Kt&&Kt.Object===Object&&Kt,N=typeof self=="object"&&self&&self.Object===Object&&self,P=ie||N||Function("return this")(),$=e&&!e.nodeType&&e,u=$&&!0&&t&&!t.nodeType&&t,O=u&&u.exports===$,Y=O&&ie.process,Q=function(){try{return Y&&Y.binding&&Y.binding("util")}catch{}}(),Ee=Q&&Q.isTypedArray;function Se(E,T){for(var H=-1,te=E==null?0:E.length,Je=0,ge=[];++H<te;){var ut=E[H];T(ut,H,E)&&(ge[Je++]=ut)}return ge}function me(E,T){for(var H=-1,te=T.length,Je=E.length;++H<te;)E[Je+H]=T[H];return E}function Ne(E,T){for(var H=-1,te=E==null?0:E.length;++H<te;)if(T(E[H],H,E))return!0;return!1}function Xe(E,T){for(var H=-1,te=Array(E);++H<E;)te[H]=T(H);return te}function Ve(E){return function(T){return E(T)}}function $e(E,T){return E.has(T)}function Oe(E,T){return E==null?void 0:E[T]}function ye(E){var T=-1,H=Array(E.size);return E.forEach(function(te,Je){H[++T]=[Je,te]}),H}function ve(E,T){return function(H){return E(T(H))}}function we(E){var T=-1,H=Array(E.size);return E.forEach(function(te){H[++T]=te}),H}var fe=Array.prototype,he=Function.prototype,oe=Object.prototype,be=P["__core-js_shared__"],xe=he.toString,le=oe.hasOwnProperty,Ie=function(){var E=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),Le=oe.toString,je=RegExp("^"+xe.call(le).replace(ce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=O?P.Buffer:void 0,Ue=P.Symbol,Qt=P.Uint8Array,or=oe.propertyIsEnumerable,xr=fe.splice,At=Ue?Ue.toStringTag:void 0,Dr=Object.getOwnPropertySymbols,ar=ke?ke.isBuffer:void 0,Jr=ve(Object.keys,Object),Qe=oi(P,"DataView"),Ge=oi(P,"Map"),ot=oi(P,"Promise"),tt=oi(P,"Set"),at=oi(P,"WeakMap"),Ye=oi(Object,"create"),dt=On(Qe),mt=On(Ge),yt=On(ot),ft=On(tt),wt=On(at),pt=Ue?Ue.prototype:void 0,ct=pt?pt.valueOf:void 0;function Ke(E){var T=-1,H=E==null?0:E.length;for(this.clear();++T<H;){var te=E[T];this.set(te[0],te[1])}}function D(){this.__data__=Ye?Ye(null):{},this.size=0}function k(E){var T=this.has(E)&&delete this.__data__[E];return this.size-=T?1:0,T}function Z(E){var T=this.__data__;if(Ye){var H=T[E];return H===n?void 0:H}return le.call(T,E)?T[E]:void 0}function ae(E){var T=this.__data__;return Ye?T[E]!==void 0:le.call(T,E)}function Fe(E,T){var H=this.__data__;return this.size+=this.has(E)?0:1,H[E]=Ye&&T===void 0?n:T,this}Ke.prototype.clear=D,Ke.prototype.delete=k,Ke.prototype.get=Z,Ke.prototype.has=ae,Ke.prototype.set=Fe;function Ae(E){var T=-1,H=E==null?0:E.length;for(this.clear();++T<H;){var te=E[T];this.set(te[0],te[1])}}function Te(){this.__data__=[],this.size=0}function De(E){var T=this.__data__,H=co(T,E);if(H<0)return!1;var te=T.length-1;return H==te?T.pop():xr.call(T,H,1),--this.size,!0}function $t(E){var T=this.__data__,H=co(T,E);return H<0?void 0:T[H][1]}function rt(E){return co(this.__data__,E)>-1}function lt(E,T){var H=this.__data__,te=co(H,E);return te<0?(++this.size,H.push([E,T])):H[te][1]=T,this}Ae.prototype.clear=Te,Ae.prototype.delete=De,Ae.prototype.get=$t,Ae.prototype.has=rt,Ae.prototype.set=lt;function vt(E){var T=-1,H=E==null?0:E.length;for(this.clear();++T<H;){var te=E[T];this.set(te[0],te[1])}}function Zr(){this.size=0,this.__data__={hash:new Ke,map:new(Ge||Ae),string:new Ke}}function oo(E){var T=lo(this,E).delete(E);return this.size-=T?1:0,T}function fr(E){return lo(this,E).get(E)}function rE(E){return lo(this,E).has(E)}function nE(E,T){var H=lo(this,E),te=H.size;return H.set(E,T),this.size+=H.size==te?0:1,this}vt.prototype.clear=Zr,vt.prototype.delete=oo,vt.prototype.get=fr,vt.prototype.has=rE,vt.prototype.set=nE;function ao(E){var T=-1,H=E==null?0:E.length;for(this.__data__=new vt;++T<H;)this.add(E[T])}function iE(E){return this.__data__.set(E,n),this}function sE(E){return this.__data__.has(E)}ao.prototype.add=ao.prototype.push=iE,ao.prototype.has=sE;function Xr(E){var T=this.__data__=new Ae(E);this.size=T.size}function oE(){this.__data__=new Ae,this.size=0}function aE(E){var T=this.__data__,H=T.delete(E);return this.size=T.size,H}function cE(E){return this.__data__.get(E)}function lE(E){return this.__data__.has(E)}function uE(E,T){var H=this.__data__;if(H instanceof Ae){var te=H.__data__;if(!Ge||te.length<r-1)return te.push([E,T]),this.size=++H.size,this;H=this.__data__=new vt(te)}return H.set(E,T),this.size=H.size,this}Xr.prototype.clear=oE,Xr.prototype.delete=aE,Xr.prototype.get=cE,Xr.prototype.has=lE,Xr.prototype.set=uE;function hE(E,T){var H=uo(E),te=!H&&CE(E),Je=!H&&!te&&il(E),ge=!H&&!te&&!Je&&i0(E),ut=H||te||Je||ge,Dt=ut?Xe(E.length,String):[],Tt=Dt.length;for(var nt in E)(T||le.call(E,nt))&&!(ut&&(nt=="length"||Je&&(nt=="offset"||nt=="parent")||ge&&(nt=="buffer"||nt=="byteLength"||nt=="byteOffset")||_E(nt,Tt)))&&Dt.push(nt);return Dt}function co(E,T){for(var H=E.length;H--;)if(e0(E[H][0],T))return H;return-1}function dE(E,T,H){var te=T(E);return uo(E)?te:me(te,H(E))}function es(E){return E==null?E===void 0?M:A:At&&At in Object(E)?vE(E):DE(E)}function Jf(E){return ts(E)&&es(E)==a}function Zf(E,T,H,te,Je){return E===T?!0:E==null||T==null||!ts(E)&&!ts(T)?E!==E&&T!==T:fE(E,T,H,te,Zf,Je)}function fE(E,T,H,te,Je,ge){var ut=uo(E),Dt=uo(T),Tt=ut?c:Qr(E),nt=Dt?c:Qr(T);Tt=Tt==a?v:Tt,nt=nt==a?v:nt;var er=Tt==v,pr=nt==v,Mt=Tt==nt;if(Mt&&il(E)){if(!il(T))return!1;ut=!0,er=!1}if(Mt&&!er)return ge||(ge=new Xr),ut||i0(E)?Xf(E,T,H,te,Je,ge):yE(E,T,Tt,H,te,Je,ge);if(!(H&i)){var cr=er&&le.call(E,"__wrapped__"),lr=pr&&le.call(T,"__wrapped__");if(cr||lr){var en=cr?E.value():E,Pr=lr?T.value():T;return ge||(ge=new Xr),Je(en,Pr,H,te,ge)}}return Mt?(ge||(ge=new Xr),wE(E,T,H,te,Je,ge)):!1}function pE(E){if(!n0(E)||SE(E))return!1;var T=t0(E)?je:K;return T.test(On(E))}function gE(E){return ts(E)&&r0(E.length)&&!!ee[es(E)]}function mE(E){if(!xE(E))return Jr(E);var T=[];for(var H in Object(E))le.call(E,H)&&H!="constructor"&&T.push(H);return T}function Xf(E,T,H,te,Je,ge){var ut=H&i,Dt=E.length,Tt=T.length;if(Dt!=Tt&&!(ut&&Tt>Dt))return!1;var nt=ge.get(E);if(nt&&ge.get(T))return nt==T;var er=-1,pr=!0,Mt=H&s?new ao:void 0;for(ge.set(E,T),ge.set(T,E);++er<Dt;){var cr=E[er],lr=T[er];if(te)var en=ut?te(lr,cr,er,T,E,ge):te(cr,lr,er,E,T,ge);if(en!==void 0){if(en)continue;pr=!1;break}if(Mt){if(!Ne(T,function(Pr,In){if(!$e(Mt,In)&&(cr===Pr||Je(cr,Pr,H,te,ge)))return Mt.push(In)})){pr=!1;break}}else if(!(cr===lr||Je(cr,lr,H,te,ge))){pr=!1;break}}return ge.delete(E),ge.delete(T),pr}function yE(E,T,H,te,Je,ge,ut){switch(H){case F:if(E.byteLength!=T.byteLength||E.byteOffset!=T.byteOffset)return!1;E=E.buffer,T=T.buffer;case U:return!(E.byteLength!=T.byteLength||!ge(new Qt(E),new Qt(T)));case h:case f:case I:return e0(+E,+T);case m:return E.name==T.name&&E.message==T.message;case x:case l:return E==T+"";case _:var Dt=ye;case p:var Tt=te&i;if(Dt||(Dt=we),E.size!=T.size&&!Tt)return!1;var nt=ut.get(E);if(nt)return nt==T;te|=s,ut.set(E,T);var er=Xf(Dt(E),Dt(T),te,Je,ge,ut);return ut.delete(E),er;case g:if(ct)return ct.call(E)==ct.call(T)}return!1}function wE(E,T,H,te,Je,ge){var ut=H&i,Dt=Qf(E),Tt=Dt.length,nt=Qf(T),er=nt.length;if(Tt!=er&&!ut)return!1;for(var pr=Tt;pr--;){var Mt=Dt[pr];if(!(ut?Mt in T:le.call(T,Mt)))return!1}var cr=ge.get(E);if(cr&&ge.get(T))return cr==T;var lr=!0;ge.set(E,T),ge.set(T,E);for(var en=ut;++pr<Tt;){Mt=Dt[pr];var Pr=E[Mt],In=T[Mt];if(te)var s0=ut?te(In,Pr,Mt,T,E,ge):te(Pr,In,Mt,E,T,ge);if(!(s0===void 0?Pr===In||Je(Pr,In,H,te,ge):s0)){lr=!1;break}en||(en=Mt=="constructor")}if(lr&&!en){var ho=E.constructor,fo=T.constructor;ho!=fo&&"constructor"in E&&"constructor"in T&&!(typeof ho=="function"&&ho instanceof ho&&typeof fo=="function"&&fo instanceof fo)&&(lr=!1)}return ge.delete(E),ge.delete(T),lr}function Qf(E){return dE(E,AE,bE)}function lo(E,T){var H=E.__data__;return EE(T)?H[typeof T=="string"?"string":"hash"]:H.map}function oi(E,T){var H=Oe(E,T);return pE(H)?H:void 0}function vE(E){var T=le.call(E,At),H=E[At];try{E[At]=void 0;var te=!0}catch{}var Je=Le.call(E);return te&&(T?E[At]=H:delete E[At]),Je}var bE=Dr?function(E){return E==null?[]:(E=Object(E),Se(Dr(E),function(T){return or.call(E,T)}))}:$E,Qr=es;(Qe&&Qr(new Qe(new ArrayBuffer(1)))!=F||Ge&&Qr(new Ge)!=_||ot&&Qr(ot.resolve())!=S||tt&&Qr(new tt)!=p||at&&Qr(new at)!=L)&&(Qr=function(E){var T=es(E),H=T==v?E.constructor:void 0,te=H?On(H):"";if(te)switch(te){case dt:return F;case mt:return _;case yt:return S;case ft:return p;case wt:return L}return T});function _E(E,T){return T=T??o,!!T&&(typeof E=="number"||se.test(E))&&E>-1&&E%1==0&&E<T}function EE(E){var T=typeof E;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?E!=="__proto__":E===null}function SE(E){return!!Ie&&Ie in E}function xE(E){var T=E&&E.constructor,H=typeof T=="function"&&T.prototype||oe;return E===H}function DE(E){return Le.call(E)}function On(E){if(E!=null){try{return xe.call(E)}catch{}try{return E+""}catch{}}return""}function e0(E,T){return E===T||E!==E&&T!==T}var CE=Jf(function(){return arguments}())?Jf:function(E){return ts(E)&&le.call(E,"callee")&&!or.call(E,"callee")},uo=Array.isArray;function OE(E){return E!=null&&r0(E.length)&&!t0(E)}var il=ar||TE;function IE(E,T){return Zf(E,T)}function t0(E){if(!n0(E))return!1;var T=es(E);return T==w||T==b||T==d||T==y}function r0(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=o}function n0(E){var T=typeof E;return E!=null&&(T=="object"||T=="function")}function ts(E){return E!=null&&typeof E=="object"}var i0=Ee?Ve(Ee):gE;function AE(E){return OE(E)?hE(E):mE(E)}function $E(){return[]}function TE(){return!1}t.exports=IE}(Ds,Ds.exports);var Vy=Ds.exports;const qy=rs(Vy);function Ky(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),d=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function f(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var _=0,I=0,A=0,v=b.length;A!==v&&b[A]===0;)A++,_++;for(var S=(v-A)*h+1>>>0,y=new Uint8Array(S);A!==v;){for(var x=b[A],p=0,l=S-1;(x!==0||p<I)&&l!==-1;l--,p++)x+=256*y[l]>>>0,y[l]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");I=p,A++}for(var g=S-I;g!==S&&y[g]===0;)g++;for(var M=c.repeat(_);g<S;++g)M+=t.charAt(y[g]);return M}function m(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var _=0;if(b[_]!==" "){for(var I=0,A=0;b[_]===c;)I++,_++;for(var v=(b.length-_)*d+1>>>0,S=new Uint8Array(v);b[_];){var y=r[b.charCodeAt(_)];if(y===255)return;for(var x=0,p=v-1;(y!==0||x<A)&&p!==-1;p--,x++)y+=a*S[p]>>>0,S[p]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");A=x,_++}if(b[_]!==" "){for(var l=v-A;l!==v&&S[l]===0;)l++;for(var g=new Uint8Array(I+(v-l)),M=I;l!==v;)g[M++]=S[l++];return g}}}function w(b){var _=m(b);if(_)return _;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:m,decode:w}}var Gy=Ky,Yy=Gy;const _h=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Jy=t=>new TextEncoder().encode(t),Zy=t=>new TextDecoder().decode(t);class Xy{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Qy{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Eh(this,e)}}class ew{constructor(e){this.decoders=e}or(e){return Eh(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Eh=(t,e)=>new ew({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class tw{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Xy(e,r,n),this.decoder=new Qy(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Cs=({name:t,prefix:e,encode:r,decode:n})=>new tw(t,e,r,n),Ci=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Yy(r,e);return Cs({prefix:t,name:e,encode:n,decode:s=>_h(i(s))})},rw=(t,e,r,n)=>{const i={};for(let h=0;h<e.length;++h)i[e[h]]=h;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,d=0;for(let h=0;h<s;++h){const f=i[t[h]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[d++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},nw=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Ot=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Cs({prefix:e,name:t,encode(i){return nw(i,n,r)},decode(i){return rw(i,n,r,t)}}),iw=Cs({prefix:"\0",name:"identity",encode:t=>Zy(t),decode:t=>Jy(t)});var sw=Object.freeze({__proto__:null,identity:iw});const ow=Ot({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var aw=Object.freeze({__proto__:null,base2:ow});const cw=Ot({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var lw=Object.freeze({__proto__:null,base8:cw});const uw=Ci({prefix:"9",name:"base10",alphabet:"0123456789"});var hw=Object.freeze({__proto__:null,base10:uw});const dw=Ot({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),fw=Ot({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var pw=Object.freeze({__proto__:null,base16:dw,base16upper:fw});const gw=Ot({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),mw=Ot({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),yw=Ot({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ww=Ot({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),vw=Ot({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),bw=Ot({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),_w=Ot({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ew=Ot({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Sw=Ot({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var xw=Object.freeze({__proto__:null,base32:gw,base32upper:mw,base32pad:yw,base32padupper:ww,base32hex:vw,base32hexupper:bw,base32hexpad:_w,base32hexpadupper:Ew,base32z:Sw});const Dw=Ci({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Cw=Ci({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ow=Object.freeze({__proto__:null,base36:Dw,base36upper:Cw});const Iw=Ci({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Aw=Ci({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var $w=Object.freeze({__proto__:null,base58btc:Iw,base58flickr:Aw});const Tw=Ot({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Rw=Ot({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Pw=Ot({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Nw=Ot({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Lw=Object.freeze({__proto__:null,base64:Tw,base64pad:Rw,base64url:Pw,base64urlpad:Nw});const Sh=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Mw=Sh.reduce((t,e,r)=>(t[r]=e,t),[]),Uw=Sh.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Fw(t){return t.reduce((e,r)=>(e+=Mw[r],e),"")}function jw(t){const e=[];for(const r of t){const n=Uw[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const kw=Cs({prefix:"🚀",name:"base256emoji",encode:Fw,decode:jw});var Bw=Object.freeze({__proto__:null,base256emoji:kw}),zw=Dh,xh=128,Ww=127,Hw=~Ww,Vw=Math.pow(2,31);function Dh(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Vw;)e[r++]=t&255|xh,t/=128;for(;t&Hw;)e[r++]=t&255|xh,t>>>=7;return e[r]=t|0,Dh.bytes=r-n+1,e}var qw=da,Kw=128,Ch=127;function da(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw da.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&Ch)<<i:(o&Ch)*Math.pow(2,i),i+=7}while(o>=Kw);return da.bytes=s-n,r}var Gw=Math.pow(2,7),Yw=Math.pow(2,14),Jw=Math.pow(2,21),Zw=Math.pow(2,28),Xw=Math.pow(2,35),Qw=Math.pow(2,42),ev=Math.pow(2,49),tv=Math.pow(2,56),rv=Math.pow(2,63),nv=function(t){return t<Gw?1:t<Yw?2:t<Jw?3:t<Zw?4:t<Xw?5:t<Qw?6:t<ev?7:t<tv?8:t<rv?9:10},iv={encode:zw,decode:qw,encodingLength:nv},Oh=iv;const Ih=(t,e,r=0)=>(Oh.encode(t,e,r),e),Ah=t=>Oh.encodingLength(t),fa=(t,e)=>{const r=e.byteLength,n=Ah(t),i=n+Ah(r),s=new Uint8Array(i+r);return Ih(t,s,0),Ih(r,s,n),s.set(e,i),new sv(t,r,e,s)};class sv{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const $h=({name:t,code:e,encode:r})=>new ov(t,e,r);class ov{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?fa(this.code,r):r.then(n=>fa(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Th=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),av=$h({name:"sha2-256",code:18,encode:Th("SHA-256")}),cv=$h({name:"sha2-512",code:19,encode:Th("SHA-512")});var lv=Object.freeze({__proto__:null,sha256:av,sha512:cv});const Rh=0,uv="identity",Ph=_h;var hv=Object.freeze({__proto__:null,identity:{code:Rh,name:uv,encode:Ph,digest:t=>fa(Rh,Ph(t))}});new TextEncoder,new TextDecoder;const Nh={...sw,...aw,...lw,...hw,...pw,...xw,...Ow,...$w,...Lw,...Bw};({...lv,...hv});function Lh(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function dv(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Lh(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Mh(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Uh=Mh("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),pa=Mh("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=dv(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),fv={utf8:Uh,"utf-8":Uh,hex:Nh.base16,latin1:pa,ascii:pa,binary:pa,...Nh};function pv(t,e="utf8"){const r=fv[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Lh(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const Fh="wc",gv=2,ga="core",Br=`${Fh}@2:${ga}:`,mv={name:ga,logger:"error"},yv={database:":memory:"},wv="crypto",jh="client_ed25519_seed",vv=re.ONE_DAY,bv="keychain",_v="0.3",Ev="messages",Sv="0.3",xv=re.SIX_HOURS,Dv="publisher",kh="irn",Cv="error",Bh="wss://relay.walletconnect.com",zh="wss://relay.walletconnect.org",Ov="relayer",it={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Iv="_subscription",Oi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Av=re.ONE_SECOND/2,$v="2.9.1",Tv=1e4,Rv="0.3",Pv="WALLETCONNECT_CLIENT_ID",wr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Nv="subscription",Lv="0.3",Mv=re.FIVE_SECONDS*1e3,Uv="pairing",Fv="0.3",Ii={wc_pairingDelete:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:re.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:re.ONE_DAY,prompt:!1,tag:0},res:{ttl:re.ONE_DAY,prompt:!1,tag:0}}},vr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},jv="history",kv="0.3",Bv="expirer",rr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},zv="0.3",ma="verify-api",Wh="https://verify.walletconnect.com";let Wv=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=bv,this.version=_v,this.initialized=!1,this.storagePrefix=Br,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=X("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Me.generateChildLogger(r,this.name)}get context(){return Me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Xu(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Qu(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},Hv=class{constructor(e,r,n){this.core=e,this.logger=r,this.name=wv,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=Su(i);return Eu(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=gm();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=Su(s),a=ta();return await Sg(a,i,vv,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),c=mm(a,s);return this.setSymKey(c,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||ym(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const a=qu(o),c=Lo(s);if(Ku(a)){const m=a.senderPublicKey,w=a.receiverPublicKey;i=await this.generateSharedKey(m,w)}const d=this.getSymKey(i),{type:h,senderPublicKey:f}=a;return vm({type:h,symKey:d,message:c,senderPublicKey:f})},this.decode=async(i,s,o)=>{this.isInitialized();const a=Em(s,o);if(Ku(a)){const c=a.receiverPublicKey,d=a.senderPublicKey;i=await this.generateSharedKey(c,d)}try{const c=this.getSymKey(i),d=bm({symKey:c,encoded:s});return nu(d)}catch(c){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}},this.getPayloadType=i=>{const s=ws(i);return Ei(s.type)},this.getPayloadSenderPublicKey=i=>{const s=ws(i);return s.senderPublicKey?Ft(s.senderPublicKey,jt):void 0},this.core=e,this.logger=Me.generateChildLogger(r,this.name),this.keychain=n||new Wv(this.core,this.logger)}get context(){return Me.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(jh)}catch{e=ta(),await this.keychain.set(jh,e)}return pv(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},Vv=class extends I1{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=Ev,this.version=Sv,this.initialized=!1,this.storagePrefix=Br,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=Mn(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),o=Mn(i);return typeof s[o]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Me.generateChildLogger(e,this.name),this.core=r}get context(){return Me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Xu(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Qu(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},qv=class extends A1{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new ur.EventEmitter,this.name=Dv,this.queue=new Map,this.publishTimeout=re.toMiliseconds(re.TEN_SECONDS),this.queueTimeout=re.toMiliseconds(re.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const o=(s==null?void 0:s.ttl)||xv,a=sa(s),c=(s==null?void 0:s.prompt)||!1,d=(s==null?void 0:s.tag)||0,h=(s==null?void 0:s.id)||ca().toString(),f={topic:n,message:i,opts:{ttl:o,relay:a,prompt:c,tag:d,id:h}},m=setTimeout(()=>this.queue.set(h,f),this.queueTimeout);try{await await vs(this.rpcPublish(n,i,o,a,c,d,h),this.publishTimeout),clearTimeout(m),this.relayer.events.emit(it.publish,f)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(o){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(o),o}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=Me.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Me.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,o,a){var c,d,h,f;const m={method:bs(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:o},id:a};return kt((c=m.params)==null?void 0:c.prompt)&&((d=m.params)==null||delete d.prompt),kt((h=m.params)==null?void 0:h.tag)&&((f=m.params)==null||delete f.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:m}),this.relayer.request(m)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Rn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(it.connection_stalled);return}this.checkQueue()}),this.relayer.on(it.message_ack,e=>{this.onPublish(e.id.toString())})}},Kv=class{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}};var Gv=Object.defineProperty,Yv=Object.defineProperties,Jv=Object.getOwnPropertyDescriptors,Hh=Object.getOwnPropertySymbols,Zv=Object.prototype.hasOwnProperty,Xv=Object.prototype.propertyIsEnumerable,Vh=(t,e,r)=>e in t?Gv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ai=(t,e)=>{for(var r in e||(e={}))Zv.call(e,r)&&Vh(t,r,e[r]);if(Hh)for(var r of Hh(e))Xv.call(e,r)&&Vh(t,r,e[r]);return t},ya=(t,e)=>Yv(t,Jv(e));let Qv=class extends R1{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new Kv,this.events=new ur.EventEmitter,this.name=Nv,this.version=Lv,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Br,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=sa(i),o={topic:n,relay:s};this.pending.set(n,o);const a=await this.rpcSubscribe(n,s);return this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const o=new re.Watch;o.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),i(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=Mv&&(clearInterval(a),o.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Me.generateChildLogger(r,this.name),this.clientId=""}get context(){return Me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=sa(n);await this.rpcUnsubscribe(e,r,i);const s=bt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:bs(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await vs(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(it.connection_stalled)}return Mn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:bs(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await vs(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(it.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:bs(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,ya(Ai({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Ai({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,Ai({},r)),this.topicMap.set(r.topic,e),this.events.emit(wr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(wr.deleted,ya(Ai({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(wr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(wr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);Si(r)&&this.onBatchSubscribe(r.map((n,i)=>ya(Ai({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Rn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(it.connect,async()=>{await this.onConnect()}),this.relayer.on(it.disconnect,()=>{this.onDisconnect()}),this.events.on(wr.created,async e=>{const r=wr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(wr.deleted,async e=>{const r=wr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}};var eb=Object.defineProperty,qh=Object.getOwnPropertySymbols,tb=Object.prototype.hasOwnProperty,rb=Object.prototype.propertyIsEnumerable,Kh=(t,e,r)=>e in t?eb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nb=(t,e)=>{for(var r in e||(e={}))tb.call(e,r)&&Kh(t,r,e[r]);if(qh)for(var r of qh(e))rb.call(e,r)&&Kh(t,r,e[r]);return t};let ib=class extends $1{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new ur.EventEmitter,this.name=Ov,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Me.generateChildLogger(e.logger,this.name):Me.pino(Me.getDefaultLoggerOptions({level:e.logger||Cv})),this.messages=new Vv(this.logger,e.core),this.subscriber=new Qv(this,this.logger),this.publisher=new qv(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Bh,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${zh}...`),await this.restartTransport(zh)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},Tv)}get context(){return Me.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";return i||(await Promise.all([new Promise(s=>{this.subscriber.once(wr.created,o=>{o.topic===e&&s()})}),new Promise(async s=>{i=await this.subscriber.subscribe(e,r),s()})]),i)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(it.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(wr.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,n)=>{await vs(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(i=>n(i)).then(()=>r()).finally(()=>this.removeListener(it.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(it.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.events.emit(it.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(Oi.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new ky(new Hy(Pm({sdkVersion:$v,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),ha(e)){if(!e.method.endsWith(Iv))return;const r=e.params,{topic:n,message:i,publishedAt:s}=r.data,o={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(nb({type:"event",event:r.id},o)),this.events.emit(r.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else xs(e)&&this.events.emit(it.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(it.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=la(e.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(Oi.payload,e=>this.onProviderPayload(e)),this.provider.on(Oi.connect,()=>{this.events.emit(it.connect)}),this.provider.on(Oi.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(Oi.error,e=>{this.logger.error(e),this.events.emit(it.error,e)})}registerEventListeners(){this.events.on(it.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(it.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},re.toMiliseconds(Av))}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}};var sb=Object.defineProperty,Gh=Object.getOwnPropertySymbols,ob=Object.prototype.hasOwnProperty,ab=Object.prototype.propertyIsEnumerable,Yh=(t,e,r)=>e in t?sb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Jh=(t,e)=>{for(var r in e||(e={}))ob.call(e,r)&&Yh(t,r,e[r]);if(Gh)for(var r of Gh(e))ab.call(e,r)&&Yh(t,r,e[r]);return t};let Os=class extends T1{constructor(e,r,n,i=Br,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=Rv,this.cached=[],this.initialized=!1,this.storagePrefix=Br,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!kt(o)?this.map.set(this.getKey(o),o):ry(o)?this.map.set(o.id,o):ny(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>qy(a[c],o[c]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Jh(Jh({},this.getData(o)),a);this.map.set(o,c),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),await this.persist())},this.logger=Me.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},cb=class{constructor(e,r){this.core=e,this.logger=r,this.name=Uv,this.version=Fv,this.events=new Ol,this.initialized=!1,this.storagePrefix=Br,this.ignoredPayloadTypes=[dn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=ta(),i=await this.core.crypto.setSymKey(n),s=hr(re.FIVE_MINUTES),o={protocol:kh},a={topic:i,expiry:s,relay:o,active:!1},c=qm({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:o});return await this.pairings.set(i,a),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:c}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:o}=Wm(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);const a=hr(re.FIVE_MINUTES),c={topic:i,relay:o,expiry:a,active:!1};return await this.pairings.set(i,c),await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o}),this.core.expirer.set(i,a),n.activatePairing&&await this.activate({topic:i}),c},this.activate=async({topic:n})=>{this.isInitialized();const i=hr(re.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Un();this.events.once(gt("pairing_ping",s),({error:d})=>{d?c(d):a()}),await o()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",bt("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const o=Ss(i,s),a=await this.core.crypto.encode(n,o),c=Ii[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id},this.sendResult=async(n,i,s)=>{const o=la(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),d=Ii[c.request.method].res;await this.core.relayer.publish(i,a,d),await this.core.history.resolve(o)},this.sendError=async(n,i,s)=>{const o=ua(n,s),a=await this.core.crypto.encode(i,o),c=await this.core.history.get(i,n),d=Ii[c.request.method]?Ii[c.request.method].res:Ii.unregistered_method.res;await this.core.relayer.publish(i,a,d),await this.core.history.resolve(o)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,bt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>kr(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{Ir(i)?this.events.emit(gt("pairing_ping",s),{}):dr(i)&&this.events.emit(gt("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=bt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(bt("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!Vt(n)){const{message:i}=X("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!ty(n.uri)){const{message:i}=X("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!Vt(n)){const{message:s}=X("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!Vt(n)){const{message:s}=X("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!St(n,!1)){const{message:i}=X("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=X("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(kr(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=X("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=Me.generateChildLogger(r,this.name),this.pairings=new Os(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Me.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(it.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);ha(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):xs(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))})}registerExpirerEvents(){this.core.expirer.on(rr.expired,async e=>{const{topic:r}=th(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}},lb=class extends O1{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new ur.EventEmitter,this.name=jv,this.version=kv,this.cached=[],this.initialized=!1,this.storagePrefix=Br,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:hr(re.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(vr.created,o)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=dr(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(vr.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(vr.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Me.generateChildLogger(r,this.name)}get context(){return Me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Ss(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(vr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(vr.created,e=>{const r=vr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(vr.updated,e=>{const r=vr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(vr.deleted,e=>{const r=vr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Rn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{re.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},ub=class extends P1{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new ur.EventEmitter,this.name=Bv,this.version=zv,this.cached=[],this.initialized=!1,this.storagePrefix=Br,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(rr.created,{target:s,expiration:o})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(rr.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Me.generateChildLogger(r,this.name)}get context(){return Me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Nm(e);if(typeof e=="number")return Lm(e);const{message:r}=X("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(rr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;re.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(rr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Rn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(rr.created,e=>{const r=rr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(rr.expired,e=>{const r=rr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(rr.deleted,e=>{const r=rr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}},hb=class extends N1{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=ma,this.initialized=!1,this.init=async n=>{Zu()||!na()||(this.verifyUrl=(n==null?void 0:n.verifyUrl)||Wh,await this.createIframe())},this.register=async n=>{var i;if(this.initialized||await this.init(),!!this.iframe)try{(i=this.iframe.contentWindow)==null||i.postMessage(n.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${n.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async n=>{var i;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${n.attestationId}`);const s=this.startAbortTimer(re.FIVE_SECONDS),o=await fetch(`${this.verifyUrl}/attestation/${n.attestationId}`,{signal:this.abortController.signal});return clearTimeout(s),o.status===200?(i=await o.json())==null?void 0:i.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((n,i)=>{if(document.getElementById(ma))return n();const s=document.createElement("iframe");s.setAttribute("id",ma),s.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),s.style.display="none",s.addEventListener("load",()=>{this.initialized=!0,n()}),s.addEventListener("error",o=>{i(o)}),document.body.append(s),this.iframe=s}),new Promise(n=>{setTimeout(()=>n("iframe load timeout"),re.toMiliseconds(re.ONE_SECOND/2))})])}catch(n){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(n)}},this.logger=Me.generateChildLogger(r,this.name),this.verifyUrl=Wh,this.abortController=new AbortController,this.isDevEnv=ra()&&process.env.IS_VITEST}get context(){return Me.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),re.toMiliseconds(e))}};var db=Object.defineProperty,Zh=Object.getOwnPropertySymbols,fb=Object.prototype.hasOwnProperty,pb=Object.prototype.propertyIsEnumerable,Xh=(t,e,r)=>e in t?db(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qh=(t,e)=>{for(var r in e||(e={}))fb.call(e,r)&&Xh(t,r,e[r]);if(Zh)for(var r of Zh(e))pb.call(e,r)&&Xh(t,r,e[r]);return t};const gb=class o0 extends C1{constructor(e){super(e),this.protocol=Fh,this.version=gv,this.name=ga,this.events=new ur.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Bh;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Me.pino(Me.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||mv.logger}));this.logger=Me.generateChildLogger(r,this.name),this.heartbeat=new Rn.HeartBeat,this.crypto=new Hv(this,this.logger,e==null?void 0:e.keychain),this.history=new lb(this,this.logger),this.expirer=new ub(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new u1(Qh(Qh({},yv),e==null?void 0:e.storageOptions)),this.relayer=new ib({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new cb(this,this.logger),this.verify=new hb(this.projectId||"",this.logger)}static async init(e){const r=new o0(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(Pv,n),r}get context(){return Me.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},ed="wc",td=2,rd="client",wa=`${ed}@${td}:${rd}:`,va={name:rd,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},mb="WALLETCONNECT_DEEPLINK_CHOICE",yb="proposal",wb="Proposal expired",vb="session",Is=re.SEVEN_DAYS,bb="engine",$i={wc_sessionPropose:{req:{ttl:re.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1104},res:{ttl:re.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1106},res:{ttl:re.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:re.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:re.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:re.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:re.ONE_DAY,prompt:!1,tag:1112},res:{ttl:re.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:re.THIRTY_SECONDS,prompt:!1,tag:1115}}},ba={min:re.FIVE_MINUTES,max:re.SEVEN_DAYS},Ti={idle:"idle",active:"active"},_b="request",Eb=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var Sb=Object.defineProperty,xb=Object.defineProperties,Db=Object.getOwnPropertyDescriptors,nd=Object.getOwnPropertySymbols,Cb=Object.prototype.hasOwnProperty,Ob=Object.prototype.propertyIsEnumerable,id=(t,e,r)=>e in t?Sb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nr=(t,e)=>{for(var r in e||(e={}))Cb.call(e,r)&&id(t,r,e[r]);if(nd)for(var r of nd(e))Ob.call(e,r)&&id(t,r,e[r]);return t},_a=(t,e)=>xb(t,Db(e));class Ib extends M1{constructor(e){super(e),this.name=bb,this.events=new Ol,this.initialized=!1,this.ignoredPayloadTypes=[dn],this.requestQueue={state:Ti.idle,requests:[]},this.requestQueueDelay=re.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys($i)}),this.initialized=!0,setTimeout(()=>{this.requestQueue.requests=this.getPendingSessionRequests(),this.processRequestQueue()},re.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{this.isInitialized();const n=_a(nr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:c}=n;let d=i,h,f=!1;if(d&&(f=this.client.core.pairing.pairings.get(d).active),!d||!f){const{topic:S,uri:y}=await this.client.core.pairing.create();d=S,h=y}const m=await this.client.core.crypto.generateKeyPair(),w=nr({requiredNamespaces:s,optionalNamespaces:o,relays:c??[{protocol:kh}],proposer:{publicKey:m,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:b,resolve:_,done:I}=Un(re.FIVE_MINUTES,wb);if(this.events.once(gt("session_connect"),async({error:S,session:y})=>{if(S)b(S);else if(y){y.self.publicKey=m;const x=_a(nr({},y),{requiredNamespaces:y.requiredNamespaces,optionalNamespaces:y.optionalNamespaces});await this.client.session.set(y.topic,x),await this.setExpiry(y.topic,y.expiry),d&&await this.client.core.pairing.updateMetadata({topic:d,metadata:y.peer.metadata}),_(x)}}),!d){const{message:S}=X("NO_MATCHING_KEY",`connect() pairing topic: ${d}`);throw new Error(S)}const A=await this.sendRequest(d,"wc_sessionPropose",w),v=hr(re.FIVE_MINUTES);return await this.setProposal(A,nr({id:A,expiry:v},w)),{uri:h,approval:I}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:o}=r,a=this.client.proposal.get(n);let{pairingTopic:c,proposer:d,requiredNamespaces:h,optionalNamespaces:f}=a;c=c||"",xi(h)||(h=Jm(s,"approve()"));const m=await this.client.core.crypto.generateKeyPair(),w=d.publicKey,b=await this.client.core.crypto.generateSharedKey(m,w);c&&n&&(await this.client.core.pairing.updateMetadata({topic:c,metadata:d.metadata}),await this.sendResult(n,c,{relay:{protocol:i??"irn"},responderPublicKey:m}),await this.client.proposal.delete(n,bt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:c}));const _=nr({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:h,optionalNamespaces:f,pairingTopic:c,controller:{publicKey:m,metadata:this.client.metadata},expiry:hr(Is)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(b),await this.sendRequest(b,"wc_sessionSettle",_);const I=_a(nr({},_),{topic:b,pairingTopic:c,acknowledged:!1,self:_.controller,peer:{publicKey:d.publicKey,metadata:d.metadata},controller:m});return await this.client.session.set(b,I),await this.setExpiry(b,hr(Is)),{topic:b,acknowledged:()=>new Promise(A=>setTimeout(()=>A(this.client.session.get(b)),500))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,bt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest(n,"wc_sessionUpdate",{namespaces:i}),{done:o,resolve:a,reject:c}=Un();return this.events.once(gt("session_update",s),({error:d})=>{d?c(d):a()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:o}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest(n,"wc_sessionExtend",{}),{done:s,resolve:o,reject:a}=Un();return this.events.once(gt("session_extend",i),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,hr(Is)),{acknowledged:s}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:o}=r,a=await this.sendRequest(s,"wc_sessionRequest",{request:i,chainId:n},o),{done:c,resolve:d,reject:h}=Un(o);this.events.once(gt("session_request",a),({error:m,result:w})=>{m?h(m):d(w)}),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:a});const f=await this.client.core.storage.getItem(mb);return Mm({id:a,topic:s,wcDeepLink:f}),await c()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;Ir(i)?await this.sendResult(s,n,i.result):dr(i)&&await this.sendError(s,n,i.error),this.cleanupAfterResponse(r)},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest(n,"wc_sessionPing",{}),{done:s,resolve:o,reject:a}=Un();this.events.once(gt("session_ping",i),({error:c})=>{c?a(c):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest(n,"wc_sessionEvent",{event:i,chainId:s})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=ca().toString();let s;const o=a=>{(a==null?void 0:a.id.toString())===i&&(this.client.core.relayer.events.removeListener(it.message_ack,o),s())};await Promise.all([new Promise(a=>{s=a,this.client.core.relayer.on(it.message_ack,o)}),this.sendRequest(n,"wc_sessionDelete",bt("USER_DISCONNECTED"),void 0,i)]),await this.deleteSession(n)}else await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Qm(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,bt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r)},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,bt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.requestQueue.requests=this.requestQueue.requests.filter(s=>s.id!==r),i&&(this.requestQueue.state=Ti.idle)},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=$i.wc_sessionRequest.req.ttl,{id:i,topic:s,params:o}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:o}),n&&this.client.core.expirer.set(i,hr(n))},this.sendRequest=async(r,n,i,s,o)=>{const a=Ss(n,i);if(na()&&Eb.includes(n)){const h=Mn(JSON.stringify(a));await this.client.core.verify.register({attestationId:h})}const c=await this.client.core.crypto.encode(r,a),d=$i[n].req;return s&&(d.ttl=s),o&&(d.id=o),this.client.core.history.set(r,a),this.client.core.relayer.publish(r,c,d),a.id},this.sendResult=async(r,n,i)=>{const s=la(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),c=$i[a.request.method].res;this.client.core.relayer.publish(n,o,c),await this.client.core.history.resolve(s)},this.sendError=async(r,n,i)=>{const s=ua(r,i),o=await this.client.core.crypto.encode(n,s),a=await this.client.core.history.get(n,r),c=$i[a.request.method].res;this.client.core.relayer.publish(n,o,c),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{kr(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{kr(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=X("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(nr({},n.params));const o=hr(re.FIVE_MINUTES),a=nr({id:s,pairingTopic:r,expiry:o},i);await this.setProposal(s,a);const c=Mn(JSON.stringify(n)),d=await this.getVerifyContext(c,a.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:a,verifyContext:d})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(Ir(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const c=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const d=await this.client.core.crypto.generateSharedKey(a,c);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:d});const h=await this.client.core.relayer.subscribe(d);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:r})}else dr(n)&&(await this.client.proposal.delete(i,bt("USER_DISCONNECTED")),this.events.emit(gt("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:d,requiredNamespaces:h,optionalNamespaces:f,sessionProperties:m,pairingTopic:w}=n.params,b=nr({topic:r,relay:o,expiry:c,namespaces:d,acknowledged:!0,pairingTopic:w,requiredNamespaces:h,optionalNamespaces:f,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},m&&{sessionProperties:m});await this.sendResult(n.id,r,!0),this.events.emit(gt("session_connect"),{session:b}),this.cleanupDuplicatePairings(b)}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;Ir(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(gt("session_approve",i),{})):dr(n)&&(await this.client.session.delete(r,bt("USER_DISCONNECTED")),this.events.emit(gt("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidUpdate(nr({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult(s,r,!0),this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError(s,r,o),this.client.logger.error(o)}},this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;Ir(n)?this.events.emit(gt("session_update",i),{}):dr(n)&&this.events.emit(gt("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,hr(Is)),await this.sendResult(i,r,!0),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;Ir(n)?this.events.emit(gt("session_extend",i),{}):dr(n)&&this.events.emit(gt("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{Ir(n)?this.events.emit(gt("session_ping",i),{}):dr(n)&&this.events.emit(gt("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(it.publish,async()=>{s(await this.deleteSession(r))})}),this.sendResult(i,r,!0)]),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(nr({topic:r},s)),await this.setPendingSessionRequest({id:i,topic:r,params:s}),this.addRequestToQueue({id:i,topic:r,params:s}),await this.processRequestQueue()}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;Ir(n)?this.events.emit(gt("session_request",i),{result:n.result}):dr(n)&&this.events.emit(gt("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidEmit(nr({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s})}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.addRequestToQueue=r=>{this.requestQueue.requests.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.requestQueue.state=Ti.idle,this.processRequestQueue()},re.toMiliseconds(this.requestQueueDelay))},this.processRequestQueue=async()=>{if(this.requestQueue.state===Ti.active){this.client.logger.info("session request queue is already active.");return}const r=this.requestQueue.requests[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{const{id:n,topic:i,params:s}=r,o=Mn(JSON.stringify({id:n,params:s})),a=this.client.session.get(i),c=await this.getVerifyContext(o,a.peer.metadata);this.requestQueue.state=Ti.active,this.client.events.emit("session_request",{id:n,topic:i,params:s,verifyContext:c})}catch(n){this.client.logger.error(n)}},this.isValidConnect=async r=>{if(!Vt(r)){const{message:c}=X("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(kt(n)||await this.isValidPairingTopic(n),!hy(a,!0)){const{message:c}=X("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!kt(i)&&xi(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!kt(s)&&xi(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),kt(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=uy(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!Vt(r))throw new Error(X("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;await this.isValidProposalId(n);const a=this.client.proposal.get(n),c=Es(i,"approve()");if(c)throw new Error(c.message);const d=ch(a.requiredNamespaces,i,"approve()");if(d)throw new Error(d.message);if(!St(s,!0)){const{message:h}=X("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(h)}kt(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!Vt(r)){const{message:s}=X("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!fy(i)){const{message:s}=X("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!Vt(r)){const{message:d}=X("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(d)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!oh(n)){const{message:d}=X("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(d)}const a=iy(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Es(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(kr(o)){const{message:d}=X("EXPIRED","onSessionSettleRequest()");throw new Error(d)}},this.isValidUpdate=async r=>{if(!Vt(r)){const{message:c}=X("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=Es(i,"update()");if(o)throw new Error(o.message);const a=ch(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!Vt(r)){const{message:i}=X("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!Vt(r)){const{message:c}=X("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:i,chainId:s,expiry:o}=r;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!ah(a,s)){const{message:c}=X("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!py(i)){const{message:c}=X("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(c)}if(!yy(a,s,i.method)){const{message:c}=X("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(c)}if(o&&!_y(o,ba)){const{message:c}=X("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${ba.min} and ${ba.max}`);throw new Error(c)}},this.isValidRespond=async r=>{if(!Vt(r)){const{message:s}=X("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!gy(i)){const{message:s}=X("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!Vt(r)){const{message:i}=X("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!Vt(r)){const{message:a}=X("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!ah(o,s)){const{message:a}=X("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!my(i)){const{message:a}=X("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!wy(o,s,i.name)){const{message:a}=X("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!Vt(r)){const{message:i}=X("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||"",validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s,i.verified.validation=s===n.url?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!St(i,!1)){const{message:s}=X("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(it.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);ha(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):xs(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})})}registerExpirerEvents(){this.client.core.expirer.on(rr.expired,async e=>{const{topic:r,id:n}=th(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,X("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!St(e,!1)){const{message:r}=X("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=X("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(kr(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=X("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!St(e,!1)){const{message:r}=X("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=X("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(kr(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=X("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(St(e,!1)){const{message:r}=X("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=X("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!dy(e)){const{message:r}=X("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=X("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(kr(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=X("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class Ab extends Os{constructor(e,r){super(e,r,yb,wa),this.core=e,this.logger=r}}class $b extends Os{constructor(e,r){super(e,r,vb,wa),this.core=e,this.logger=r}}class Tb extends Os{constructor(e,r){super(e,r,_b,wa,n=>n.id),this.core=e,this.logger=r}}let Rb=class a0 extends L1{constructor(e){super(e),this.protocol=ed,this.version=td,this.name=va.name,this.events=new ur.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||va.name,this.metadata=(e==null?void 0:e.metadata)||Am();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Me.pino(Me.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||va.logger}));this.core=(e==null?void 0:e.core)||new gb(e),this.logger=Me.generateChildLogger(r,this.name),this.session=new $b(this.core,this.logger),this.proposal=new Ab(this.core,this.logger),this.pendingRequest=new Tb(this.core,this.logger),this.engine=new Ib(this)}static async init(e){const r=new a0(e);return await r.initialize(),r}get context(){return Me.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Pb=Object.defineProperty,Nb=Object.defineProperties,Lb=Object.getOwnPropertyDescriptors,sd=Object.getOwnPropertySymbols,Mb=Object.prototype.hasOwnProperty,Ub=Object.prototype.propertyIsEnumerable,od=(t,e,r)=>e in t?Pb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fb=(t,e)=>{for(var r in e||(e={}))Mb.call(e,r)&&od(t,r,e[r]);if(sd)for(var r of sd(e))Ub.call(e,r)&&od(t,r,e[r]);return t},jb=(t,e)=>Nb(t,Lb(e)),Ea=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Ze=(t,e,r)=>(Ea(t,e,"read from private field"),r?r.call(t):e.get(t)),pn=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},As=(t,e,r,n)=>(Ea(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Nt=(t,e,r)=>(Ea(t,e,"access private method"),r),gn,jn,Ri,xt,Sa,ad,Lt,Bt,xa,cd;let kb=class{constructor(e){pn(this,Sa),pn(this,Lt),pn(this,xa),pn(this,gn,void 0),pn(this,jn,void 0),pn(this,Ri,void 0),pn(this,xt,void 0),As(this,gn,e),As(this,jn,Nt(this,Sa,ad).call(this)),Nt(this,Lt,Bt).call(this)}async connect(e){const{requiredNamespaces:r,optionalNamespaces:n}=e;return new Promise(async(i,s)=>{await Nt(this,Lt,Bt).call(this);const o=Ze(this,jn).subscribeModal(d=>{d.open||(o(),s(new Error("Modal closed")))}),{uri:a,approval:c}=await Ze(this,xt).connect(e);if(a){const d=new Set;r&&Object.values(r).forEach(({chains:h})=>{h&&h.forEach(f=>d.add(f))}),n&&Object.values(n).forEach(({chains:h})=>{h&&h.forEach(f=>d.add(f))}),await Ze(this,jn).openModal({uri:a,chains:Array.from(d)})}try{const d=await c();i(d)}catch(d){s(d)}finally{o(),Ze(this,jn).closeModal()}})}async disconnect(e){await Nt(this,Lt,Bt).call(this),await Ze(this,xt).disconnect(e)}async request(e){return await Nt(this,Lt,Bt).call(this),await Ze(this,xt).request(e)}async getSessions(){return await Nt(this,Lt,Bt).call(this),Ze(this,xt).session.getAll()}async getSession(){return await Nt(this,Lt,Bt).call(this),Ze(this,xt).session.getAll().at(-1)}async onSessionEvent(e){await Nt(this,Lt,Bt).call(this),Ze(this,xt).on("session_event",e)}async offSessionEvent(e){await Nt(this,Lt,Bt).call(this),Ze(this,xt).off("session_event",e)}async onSessionUpdate(e){await Nt(this,Lt,Bt).call(this),Ze(this,xt).on("session_update",e)}async offSessionUpdate(e){await Nt(this,Lt,Bt).call(this),Ze(this,xt).off("session_update",e)}async onSessionDelete(e){await Nt(this,Lt,Bt).call(this),Ze(this,xt).on("session_delete",e)}async offSessionDelete(e){await Nt(this,Lt,Bt).call(this),Ze(this,xt).off("session_delete",e)}async onSessionExpire(e){await Nt(this,Lt,Bt).call(this),Ze(this,xt).on("session_expire",e)}async offSessionExpire(e){await Nt(this,Lt,Bt).call(this),Ze(this,xt).off("session_expire",e)}};gn=new WeakMap,jn=new WeakMap,Ri=new WeakMap,xt=new WeakMap,Sa=new WeakSet,ad=function(){const{modalOptions:t,projectId:e}=Ze(this,gn);return new $0(jb(Fb({},t),{projectId:e}))},Lt=new WeakSet,Bt=async function(){return Ze(this,xt)?!0:(!Ze(this,Ri)&&typeof window<"u"&&As(this,Ri,Nt(this,xa,cd).call(this)),Ze(this,Ri))},xa=new WeakSet,cd=async function(){As(this,xt,await Rb.init({metadata:Ze(this,gn).metadata,projectId:Ze(this,gn).projectId,relayUrl:Ze(this,gn).relayUrl}));const t=await Ze(this,xt).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",t)}catch{console.info("Unable to set client id")}};function Bb(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(i){i(r)}),(n=t.get("*"))&&n.slice().map(function(i){i(e,r)})}}}const $s=Bb();let Pi;function zb(t){Pi=new kb(t)}async function ir(){return new Promise(t=>{if(Pi)t(Pi);else{const e=setInterval(()=>{Pi&&(clearInterval(e),t(Pi))},200)}})}function Wb(t){return We.useEffect(()=>{zb(t)},[]),null}const Hb=We.memo(Wb);function Da(){const[t,e]=We.useState(void 0),[r,n]=We.useState(void 0),[i,s]=We.useState(!1);return{data:t,error:r,loading:i,setData:e,setError:n,setLoading:s}}function Vb(t){const{data:e,error:r,loading:n,setData:i,setError:s,setLoading:o}=Da();async function a(c){try{o(!0),s(void 0);const d=await(await ir()).connect(c??t);return i(d),$s.emit("session_change"),d}catch(d){throw s(d),d}finally{o(!1)}}return{data:e,error:r,loading:n,connect:a}}function qb(t){const{error:e,loading:r,setError:n,setLoading:i}=Da();async function s(o){try{i(!0),n(void 0),await(await ir()).disconnect(o??t),$s.emit("session_change")}catch(a){throw n(a),a}finally{i(!1)}}return{error:e,loading:r,disconnect:s}}function ld(t){We.useEffect(()=>(ir().then(e=>{e.onSessionDelete(t)}),()=>{ir().then(e=>{e.offSessionDelete(t)})}),[t])}function Ca(t){We.useEffect(()=>(ir().then(e=>{e.onSessionEvent(t)}),()=>{ir().then(e=>{e.offSessionEvent(t)})}),[t])}function Kb(t){We.useEffect(()=>(ir().then(e=>{e.onSessionExpire(t)}),()=>{ir().then(e=>{e.offSessionExpire(t)})}),[t])}function Gb(t){We.useEffect(()=>(ir().then(e=>{e.onSessionUpdate(t)}),()=>{ir().then(e=>{e.offSessionUpdate(t)})}),[t])}function mn(t){const{data:e,error:r,loading:n,setData:i,setError:s,setLoading:o}=Da();async function a(c){try{o(!0),s(void 0);const d=await(await ir()).request(c??t);return i(d),d}catch(d){throw s(d),d}finally{o(!1)}}return{data:e,error:r,loading:n,request:a}}var Yb=Object.defineProperty,Jb=Object.defineProperties,Zb=Object.getOwnPropertyDescriptors,ud=Object.getOwnPropertySymbols,Xb=Object.prototype.hasOwnProperty,Qb=Object.prototype.propertyIsEnumerable,hd=(t,e,r)=>e in t?Yb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,e2=(t,e)=>{for(var r in e||(e={}))Xb.call(e,r)&&hd(t,r,e[r]);if(ud)for(var r of ud(e))Qb.call(e,r)&&hd(t,r,e[r]);return t},t2=(t,e)=>Jb(t,Zb(e));function br(){const[t,e]=We.useState(void 0);return ld(r=>{r.topic===(t==null?void 0:t.topic)&&e(void 0)}),Gb(r=>{if(t&&r.topic===(t==null?void 0:t.topic)){const{namespaces:n}=r.params,i=t2(e2({},t),{namespaces:n});e(i)}}),Kb(r=>{t&&r.topic===(t==null?void 0:t.topic)&&e(void 0)}),We.useEffect(()=>{async function r(){const n=await(await ir()).getSession();e(n)}return r(),$s.on("session_change",r),()=>{$s.off("session_change",r)}},[]),t}const dd=["aztec_connect","aztec_disconnect","aztec_getAccountPublicKey","aztec_getSpendingPublicKey","aztec_requestProofs"],Oa=["aztec:1337"],Ia=["aleo_decrypt","aleo_disconnect","aleo_getSelectedAccount","aleo_deployProgram","aleo_getBalance","aleo_executeProgram","aleo_getRecords","aleo_transfer"],Ts=["aleo:1"],Rs=["chainChanged","accountSelected","accountSynced"],fd="f0aaeffe71b636da453fce042d79d723",Aa="https://walletconnect.puzzle.online/",pd={standaloneChains:Oa.concat(Ts),enableExplorer:!1,enableAccountView:!0,enableNetworkView:!0,enableStandaloneMode:!0,mobileWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:Aa}}],desktopWallets:[{id:"puzzle",name:"Puzzle Wallet",links:{native:"",universal:Aa}}],walletImages:{puzzle:"https://i.imgur.com/p9tHaFC.png"}},r2={requiredNamespaces:{aztec:{methods:dd,chains:Oa,events:Rs},aleo:{methods:Ia,chains:Ts,events:Rs}}},n2=({dAppName:t,dAppDescription:e,dAppUrl:r,dAppIconURL:n})=>mo.jsx(Hb,{projectId:fd,metadata:{name:t,description:e,url:r,icons:[n]},modalOptions:{...pd}}),i2=({children:t})=>(Nd(),mo.jsx(mo.Fragment,{children:t})),gd=t=>{let e;const r=new Set,n=(c,d)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const f=e;e=d??typeof h!="object"?h:Object.assign({},e,h),r.forEach(m=>m(e,f))}},i=()=>e,a={setState:n,getState:i,subscribe:c=>(r.add(c),()=>r.delete(c)),destroy:()=>{r.clear()}};return e=t(n,i,a),a},s2=t=>t?gd(t):gd;var $a={exports:{}},Ta={},Ps={exports:{}},Ra={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var md;function o2(){if(md)return Ra;md=1;var t=We;function e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(f,m){var w=m(),b=n({inst:{value:w,getSnapshot:m}}),_=b[0].inst,I=b[1];return s(function(){_.value=w,_.getSnapshot=m,c(_)&&I({inst:_})},[f,w,m]),i(function(){return c(_)&&I({inst:_}),f(function(){c(_)&&I({inst:_})})},[f]),o(w),w}function c(f){var m=f.getSnapshot;f=f.value;try{var w=m();return!r(f,w)}catch{return!0}}function d(f,m){return m()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:a;return Ra.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,Ra}var Pa={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yd;function a2(){return yd||(yd=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=We,e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function r(S){{for(var y=arguments.length,x=new Array(y>1?y-1:0),p=1;p<y;p++)x[p-1]=arguments[p];n("error",S,x)}}function n(S,y,x){{var p=e.ReactDebugCurrentFrame,l=p.getStackAddendum();l!==""&&(y+="%s",x=x.concat([l]));var g=x.map(function(M){return String(M)});g.unshift("Warning: "+y),Function.prototype.apply.call(console[S],console,g)}}function i(S,y){return S===y&&(S!==0||1/S===1/y)||S!==S&&y!==y}var s=typeof Object.is=="function"?Object.is:i,o=t.useState,a=t.useEffect,c=t.useLayoutEffect,d=t.useDebugValue,h=!1,f=!1;function m(S,y,x){h||t.startTransition!==void 0&&(h=!0,r("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var p=y();if(!f){var l=y();s(p,l)||(r("The result of getSnapshot should be cached to avoid an infinite loop"),f=!0)}var g=o({inst:{value:p,getSnapshot:y}}),M=g[0].inst,L=g[1];return c(function(){M.value=p,M.getSnapshot=y,w(M)&&L({inst:M})},[S,p,y]),a(function(){w(M)&&L({inst:M});var U=function(){w(M)&&L({inst:M})};return S(U)},[S]),d(p),p}function w(S){var y=S.getSnapshot,x=S.value;try{var p=y();return!s(x,p)}catch{return!0}}function b(S,y,x){return y()}var _=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",I=!_,A=I?b:m,v=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:A;Pa.useSyncExternalStore=v,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Pa}var wd;function vd(){return wd||(wd=1,process.env.NODE_ENV==="production"?Ps.exports=o2():Ps.exports=a2()),Ps.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bd;function c2(){if(bd)return Ta;bd=1;var t=We,e=vd();function r(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;return Ta.useSyncExternalStoreWithSelector=function(d,h,f,m,w){var b=s(null);if(b.current===null){var _={hasValue:!1,value:null};b.current=_}else _=b.current;b=a(function(){function A(p){if(!v){if(v=!0,S=p,p=m(p),w!==void 0&&_.hasValue){var l=_.value;if(w(l,p))return y=l}return y=p}if(l=y,n(S,p))return l;var g=m(p);return w!==void 0&&w(l,g)?l:(S=p,y=g)}var v=!1,S,y,x=f===void 0?null:f;return[function(){return A(h())},x===null?void 0:function(){return A(x())}]},[h,f,m,w]);var I=i(d,b[0],b[1]);return o(function(){_.hasValue=!0,_.value=I},[I]),c(I),I},Ta}var Na={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _d;function l2(){return _d||(_d=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t=We,e=vd();function r(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,c=t.useDebugValue;function d(h,f,m,w,b){var _=s(null),I;_.current===null?(I={hasValue:!1,value:null},_.current=I):I=_.current;var A=a(function(){var x=!1,p,l,g=function(F){if(!x){x=!0,p=F;var j=w(F);if(b!==void 0&&I.hasValue){var C=I.value;if(b(C,j))return l=C,C}return l=j,j}var R=p,G=l;if(n(R,F))return G;var W=w(F);return b!==void 0&&b(G,W)?G:(p=F,l=W,W)},M=m===void 0?null:m,L=function(){return g(f())},U=M===null?void 0:function(){return g(M())};return[L,U]},[f,m,w,b]),v=A[0],S=A[1],y=i(h,v,S);return o(function(){I.hasValue=!0,I.value=y},[y]),c(y),y}Na.useSyncExternalStoreWithSelector=d,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Na}process.env.NODE_ENV==="production"?$a.exports=c2():$a.exports=l2();var u2=$a.exports;const h2=rs(u2),{useSyncExternalStoreWithSelector:d2}=h2;function f2(t,e=t.getState,r){const n=d2(t.subscribe,t.getState,t.getServerState||t.getState,e,r);return We.useDebugValue(n),n}const Ed=t=>{const e=typeof t=="function"?s2(t):t,r=(n,i)=>f2(e,n,i);return Object.assign(r,e),r},p2=t=>t?Ed(t):Ed;function It(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(process.env.NODE_ENV!=="production"){var i=E2[t],s=i?typeof i=="function"?i.apply(null,r):i:"unknown error nr: "+t;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function kn(t){return!!t&&!!t[Jt]}function yn(t){var e;return!!t&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===S2}(t)||Array.isArray(t)||!!t[Rd]||!!(!((e=t.constructor)===null||e===void 0)&&e[Rd])||Ma(t)||Ua(t))}function Ni(t,e,r){r===void 0&&(r=!1),Bn(t)===0?(r?Object.keys:Ya)(t).forEach(function(n){r&&typeof n=="symbol"||e(n,t[n],t)}):t.forEach(function(n,i){return e(i,n,t)})}function Bn(t){var e=t[Jt];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Ma(t)?2:Ua(t)?3:0}function La(t,e){return Bn(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function g2(t,e){return Bn(t)===2?t.get(e):t[e]}function Sd(t,e,r){var n=Bn(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function m2(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Ma(t){return b2&&t instanceof Map}function Ua(t){return _2&&t instanceof Set}function wn(t){return t.o||t.t}function Fa(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=x2(t);delete e[Jt];for(var r=Ya(e),n=0;n<r.length;n++){var i=r[n],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function ja(t,e){return e===void 0&&(e=!1),ka(t)||kn(t)||!yn(t)||(Bn(t)>1&&(t.set=t.add=t.clear=t.delete=y2),Object.freeze(t),e&&Ni(t,function(r,n){return ja(n,!0)},!0)),t}function y2(){It(2)}function ka(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function _r(t){var e=D2[t];return e||It(18,t),e}function xd(){return process.env.NODE_ENV==="production"||zn||It(0),zn}function Ba(t,e){e&&(_r("Patches"),t.u=[],t.s=[],t.v=e)}function Ns(t){za(t),t.p.forEach(w2),t.p=null}function za(t){t===zn&&(zn=t.l)}function Dd(t){return zn={p:[],l:zn,h:t,m:!0,_:0}}function w2(t){var e=t[Jt];e.i===0||e.i===1?e.j():e.O=!0}function Wa(t,e){e._=e.p.length;var r=e.p[0],n=t!==void 0&&t!==r;return e.h.g||_r("ES5").S(e,t,n),n?(r[Jt].P&&(Ns(e),It(4)),yn(t)&&(t=Ls(e,t),e.l||Ms(e,t)),e.u&&_r("Patches").M(r[Jt].t,t,e.u,e.s)):t=Ls(e,r,[]),Ns(e),e.u&&e.v(e.u,e.s),t!==Td?t:void 0}function Ls(t,e,r){if(ka(e))return e;var n=e[Jt];if(!n)return Ni(e,function(a,c){return Cd(t,n,e,a,c,r)},!0),e;if(n.A!==t)return e;if(!n.P)return Ms(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=Fa(n.k):n.o,s=i,o=!1;n.i===3&&(s=new Set(i),i.clear(),o=!0),Ni(s,function(a,c){return Cd(t,n,i,a,c,r,o)}),Ms(t,i,!1),r&&t.u&&_r("Patches").N(n,r,t.u,t.s)}return n.o}function Cd(t,e,r,n,i,s,o){if(process.env.NODE_ENV!=="production"&&i===r&&It(5),kn(i)){var a=Ls(t,i,s&&e&&e.i!==3&&!La(e.R,n)?s.concat(n):void 0);if(Sd(r,n,a),!kn(a))return;t.m=!1}else o&&r.add(i);if(yn(i)&&!ka(i)){if(!t.h.D&&t._<1)return;Ls(t,i),e&&e.A.l||Ms(t,i)}}function Ms(t,e,r){r===void 0&&(r=!1),!t.l&&t.h.D&&t.m&&ja(e,r)}function Ha(t,e){var r=t[Jt];return(r?wn(r):t)[e]}function Od(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function Va(t){t.P||(t.P=!0,t.l&&Va(t.l))}function qa(t){t.o||(t.o=Fa(t.t))}function Ka(t,e,r){var n=Ma(e)?_r("MapSet").F(e,r):Ua(e)?_r("MapSet").T(e,r):t.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:xd(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},c=a,d=Ja;o&&(c=[a],d=Li);var h=Proxy.revocable(c,d),f=h.revoke,m=h.proxy;return a.k=m,a.j=f,m}(e,r):_r("ES5").J(e,r);return(r?r.A:xd()).p.push(n),n}function v2(t){return kn(t)||It(22,t),function e(r){if(!yn(r))return r;var n,i=r[Jt],s=Bn(r);if(i){if(!i.P&&(i.i<4||!_r("ES5").K(i)))return i.t;i.I=!0,n=Id(r,s),i.I=!1}else n=Id(r,s);return Ni(n,function(o,a){i&&g2(i.t,o)===a||Sd(n,o,e(a))}),s===3?new Set(n):n}(t)}function Id(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Fa(t)}var Ad,zn,Ga=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",b2=typeof Map<"u",_2=typeof Set<"u",$d=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Td=Ga?Symbol.for("immer-nothing"):((Ad={})["immer-nothing"]=!0,Ad),Rd=Ga?Symbol.for("immer-draftable"):"__$immer_draftable",Jt=Ga?Symbol.for("immer-state"):"__$immer_state",E2={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(t){return"Cannot apply patch, path doesn't resolve: "+t},16:'Sets cannot have "replace" patches.',17:function(t){return"Unsupported patch operation: "+t},18:function(t){return"The plugin for '"+t+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+t+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(t){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+t+"'"},22:function(t){return"'current' expects a draft, got: "+t},23:function(t){return"'original' expects a draft, got: "+t},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},S2=""+Object.prototype.constructor,Ya=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,x2=Object.getOwnPropertyDescriptors||function(t){var e={};return Ya(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},D2={},Ja={get:function(t,e){if(e===Jt)return t;var r=wn(t);if(!La(r,e))return function(i,s,o){var a,c=Od(s,o);return c?"value"in c?c.value:(a=c.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,r,e);var n=r[e];return t.I||!yn(n)?n:n===Ha(t.t,e)?(qa(t),t.o[e]=Ka(t.A.h,n,t)):n},has:function(t,e){return e in wn(t)},ownKeys:function(t){return Reflect.ownKeys(wn(t))},set:function(t,e,r){var n=Od(wn(t),e);if(n!=null&&n.set)return n.set.call(t.k,r),!0;if(!t.P){var i=Ha(wn(t),e),s=i==null?void 0:i[Jt];if(s&&s.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(m2(r,i)&&(r!==void 0||La(t.t,e)))return!0;qa(t),Va(t)}return t.o[e]===r&&(r!==void 0||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return Ha(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,qa(t),Va(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=wn(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty:function(){It(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){It(12)}},Li={};Ni(Ja,function(t,e){Li[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Li.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&It(13),Li.set.call(this,t,e,void 0)},Li.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&It(14),Ja.set.call(this,t[0],e,r,t[0])};var C2=function(){function t(r){var n=this;this.g=$d,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var c=n;return function(_){var I=this;_===void 0&&(_=a);for(var A=arguments.length,v=Array(A>1?A-1:0),S=1;S<A;S++)v[S-1]=arguments[S];return c.produce(_,function(y){var x;return(x=s).call.apply(x,[I,y].concat(v))})}}var d;if(typeof s!="function"&&It(6),o!==void 0&&typeof o!="function"&&It(7),yn(i)){var h=Dd(n),f=Ka(n,i,void 0),m=!0;try{d=s(f),m=!1}finally{m?Ns(h):za(h)}return typeof Promise<"u"&&d instanceof Promise?d.then(function(_){return Ba(h,o),Wa(_,h)},function(_){throw Ns(h),_}):(Ba(h,o),Wa(d,h))}if(!i||typeof i!="object"){if((d=s(i))===void 0&&(d=i),d===Td&&(d=void 0),n.D&&ja(d,!0),o){var w=[],b=[];_r("Patches").M(i,d,w,b),o(w,b)}return d}It(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(d){for(var h=arguments.length,f=Array(h>1?h-1:0),m=1;m<h;m++)f[m-1]=arguments[m];return n.produceWithPatches(d,function(w){return i.apply(void 0,[w].concat(f))})};var o,a,c=n.produce(i,s,function(d,h){o=d,a=h});return typeof Promise<"u"&&c instanceof Promise?c.then(function(d){return[d,o,a]}):[c,o,a]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){yn(r)||It(8),kn(r)&&(r=v2(r));var n=Dd(this),i=Ka(this,r,void 0);return i[Jt].C=!0,za(n),i},e.finishDraft=function(r,n){var i=r&&r[Jt];process.env.NODE_ENV!=="production"&&(i&&i.C||It(9),i.I&&It(10));var s=i.A;return Ba(s,n),Wa(void 0,s)},e.setAutoFreeze=function(r){this.D=r},e.setUseProxies=function(r){r&&!$d&&It(20),this.g=r},e.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var s=n[i];if(s.path.length===0&&s.op==="replace"){r=s.value;break}}i>-1&&(n=n.slice(i+1));var o=_r("Patches").$;return kn(r)?o(r,n):this.produce(r,function(a){return o(a,n)})},t}(),Zt=new C2,O2=Zt.produce;Zt.produceWithPatches.bind(Zt),Zt.setAutoFreeze.bind(Zt),Zt.setUseProxies.bind(Zt),Zt.applyPatches.bind(Zt),Zt.createDraft.bind(Zt),Zt.finishDraft.bind(Zt);const I2=t=>(e,r,n)=>(n.setState=(i,s,...o)=>{const a=typeof i=="function"?O2(i):i;return e(a,s,...o)},t(n.setState,r,n)),Ar=p2()(I2((t,e)=>({account:void 0,accounts:[],chainId:void 0,setAccounts:r=>{t({accounts:r})},setAccount:r=>{t({account:r})},setChainId:r=>{t({chainId:r})},disconnect:()=>{t({account:void 0,accounts:[],chainId:void 0})}}))),Za=t=>t.length<5*2?t:`${t.slice(0,5+5)}...${t.slice(t.length-5,t.length)}`,A2=()=>{const t=br(),[e,r,n,i]=Ar(h=>[h.account,h.accounts,h.chainId,h.setAccount]),{request:s,data:o,error:a,loading:c}=mn({topic:t==null?void 0:t.topic,chainId:n??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_getSelectedAccount",params:{type:"GET_SELECTED_ACCOUNT"}}});Ca(({params:h,topic:f})=>{if(h.event.name==="accountSelected"&&t&&t.topic===f){const w=h.event.data,b=h.chainId.split(":")[0],_=h.chainId.split(":")[1];i({network:b,chainId:_,address:w,shortenedAddress:Za(w)})}}),We.useEffect(()=>{t&&!c&&s()},[t==null?void 0:t.topic]),We.useEffect(()=>{if(o){const h=o&&o.type==="GET_SELECTED_ACCOUNT_RES"?o:void 0,f=h==null?void 0:h.data.account;f&&i(f)}},[o]);const d=a?a.message:o&&o.type==="GET_SELECTED_ACCOUNT_REJ"?o.data.error:void 0;return{account:e,accounts:r,error:d,loading:c}},$2=()=>{const t=br(),[e,r]=Ar(f=>[f.chainId,f.account]),{request:n,data:i,error:s,loading:o}=mn({topic:t==null?void 0:t.topic,chainId:e??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_getBalance",params:{type:"GET_BALANCE",data:{assetId:void 0}}}});Ca(({_:f,params:m,topic:w})=>{m.event.name==="accountSynced"&&t&&t.topic===w&&!o&&n()});const a=!!t&&!!r;We.useEffect(()=>{a&&!o&&n()},[a,r]);const c=s?s.message:i&&i.type==="GET_BALANCE_REJ"?i.data.error:void 0,d=i&&i.type==="GET_BALANCE_RES"?i:void 0,h=d==null?void 0:d.data.balances;return{loading:o,balances:h,error:c}},T2=()=>{const t=br(),{connect:e,data:r,error:n,loading:i}=Vb({requiredNamespaces:{aleo:{methods:Ia,chains:Ts,events:Rs}}});return{connect:async()=>{try{await e()}catch{}},data:r,error:n,loading:i,session:t,isConnected:!!t}},R2=t=>{const e=br(),[r]=Ar(f=>[f.chainId]),{request:n,data:i,error:s,loading:o}=mn({topic:(e==null?void 0:e.topic)??"",chainId:r??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_decrypt",params:{type:"DECRYPT",data:{transactionId:t}}}}),a=s?s.message:i&&i.type==="DECRYPT_REJ"?i.data.error:void 0,c=i&&i.type==="DECRYPT_RES"?i:void 0,d=c==null?void 0:c.data.transitions;return{decrypt:()=>{!t||!t.startsWith("at1")||t.length!==61||n()},transitions:d,loading:o,error:a}},P2=t=>{const e=br(),[r]=Ar(f=>[f.chainId]),{request:n,data:i,error:s,loading:o}=mn({topic:(e==null?void 0:e.topic)??"",chainId:r??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_deployProgram",params:{type:"DEPLOY",data:{data:t}}}}),a=s?s.message:i&&i.type==="DEPLOY_REJ"?i.data.error:void 0,c=i&&i.type==="DEPLOY_RES"?i:void 0,d=c==null?void 0:c.data.transactionId;return{deploy:()=>{t&&n()},transactionId:d,loading:o,error:a}};var Xa={exports:{}},Qa,Pd;function N2(){if(Pd)return Qa;Pd=1;var t=1e3,e=t*60,r=e*60,n=r*24,i=n*7,s=n*365.25;Qa=function(h,f){f=f||{};var m=typeof h;if(m==="string"&&h.length>0)return o(h);if(m==="number"&&isFinite(h))return f.long?c(h):a(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function o(h){if(h=String(h),!(h.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(f){var m=parseFloat(f[1]),w=(f[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"weeks":case"week":case"w":return m*i;case"days":case"day":case"d":return m*n;case"hours":case"hour":case"hrs":case"hr":case"h":return m*r;case"minutes":case"minute":case"mins":case"min":case"m":return m*e;case"seconds":case"second":case"secs":case"sec":case"s":return m*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function a(h){var f=Math.abs(h);return f>=n?Math.round(h/n)+"d":f>=r?Math.round(h/r)+"h":f>=e?Math.round(h/e)+"m":f>=t?Math.round(h/t)+"s":h+"ms"}function c(h){var f=Math.abs(h);return f>=n?d(h,f,n,"day"):f>=r?d(h,f,r,"hour"):f>=e?d(h,f,e,"minute"):f>=t?d(h,f,t,"second"):h+" ms"}function d(h,f,m,w){var b=f>=m*1.5;return Math.round(h/m)+" "+w+(b?"s":"")}return Qa}function L2(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=N2(),r.destroy=d,Object.keys(t).forEach(h=>{r[h]=t[h]}),r.names=[],r.skips=[],r.formatters={};function e(h){let f=0;for(let m=0;m<h.length;m++)f=(f<<5)-f+h.charCodeAt(m),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(h){let f,m=null,w,b;function _(...I){if(!_.enabled)return;const A=_,v=Number(new Date),S=v-(f||v);A.diff=S,A.prev=f,A.curr=v,f=v,I[0]=r.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let y=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(p,l)=>{if(p==="%%")return"%";y++;const g=r.formatters[l];if(typeof g=="function"){const M=I[y];p=g.call(A,M),I.splice(y,1),y--}return p}),r.formatArgs.call(A,I),(A.log||r.log).apply(A,I)}return _.namespace=h,_.useColors=r.useColors(),_.color=r.selectColor(h),_.extend=n,_.destroy=r.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(w!==r.namespaces&&(w=r.namespaces,b=r.enabled(h)),b),set:I=>{m=I}}),typeof r.init=="function"&&r.init(_),_}function n(h,f){const m=r(this.namespace+(typeof f>"u"?":":f)+h);return m.log=this.log,m}function i(h){r.save(h),r.namespaces=h,r.names=[],r.skips=[];let f;const m=(typeof h=="string"?h:"").split(/[\s,]+/),w=m.length;for(f=0;f<w;f++)m[f]&&(h=m[f].replace(/\*/g,".*?"),h[0]==="-"?r.skips.push(new RegExp("^"+h.slice(1)+"$")):r.names.push(new RegExp("^"+h+"$")))}function s(){const h=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),h}function o(h){if(h[h.length-1]==="*")return!0;let f,m;for(f=0,m=r.skips.length;f<m;f++)if(r.skips[f].test(h))return!1;for(f=0,m=r.names.length;f<m;f++)if(r.names[f].test(h))return!0;return!1}function a(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function c(h){return h instanceof Error?h.stack||h.message:h}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var M2=L2;(function(t,e){e.formatArgs=n,e.save=i,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;c.splice(1,0,d,"color: inherit");let h=0,f=0;c[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(h++,m==="%c"&&(f=h))}),c.splice(f,0,d)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=M2(e);const{formatters:a}=t.exports;a.j=function(c){try{return JSON.stringify(c)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(Xa,Xa.exports);var U2=Xa.exports;const ec=rs(U2)("wallet:sdk");ec.enabled=!0;const F2=()=>{const t=br(),[e]=Ar(a=>[a.disconnect]),{disconnect:r,error:n,loading:i}=qb({topic:t==null?void 0:t.topic,reason:bt("USER_DISCONNECTED")}),s=async()=>{if(t){try{r()}catch{ec("could not disconnect session entirely")}e()}},o=n?n.message:void 0;return{disconnect:s,error:o,loading:i}},j2=t=>{const e=br(),[r]=Ar(w=>[w.chainId]),n=t==null?void 0:t.inputs.map(w=>typeof w=="string"?w:w.plaintext).join(" "),{request:i,data:s,error:o,loading:a}=mn({topic:(e==null?void 0:e.topic)??"",chainId:r??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_executeProgram",params:{type:"EXECUTE",data:{data:{...t,inputs:n??""}}}}}),c=o?o.message:s&&s.type==="EXECUTE_REJ"?s.data.error:void 0,d=s&&s.type==="EXECUTE_RES"?s:void 0,h=d==null?void 0:d.data.transactionId,f=d==null?void 0:d.data.transitions;return{execute:()=>{t&&i()},transactionId:h,transitions:f,error:c,loading:a}},k2=()=>{const[t,e]=We.useState({loading:!0});return We.useEffect(()=>{},[]),{...t}},B2=50,z2=t=>{try{return t.replaceAll('"',"")??""}catch{return""}},W2=({filter:t,page:e})=>{const r=br(),[n,i]=Ar(_=>[_.chainId,_.account]);(t==null?void 0:t.program_id)===""&&(t.program_id=void 0);const{request:s,data:o,error:a,loading:c}=mn({topic:r==null?void 0:r.topic,chainId:n??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_getRecords",params:{type:"GET_RECORDS",data:{data:{filter:t,page:e}}}}});Ca(({id:_,params:I,topic:A})=>{I.event.name==="accountSynced"&&r&&r.topic===A&&!c&&s()});const d=!!r&&!!i;We.useEffect(()=>{d&&!c&&s()},[d,i]);const h=()=>{!!r&&!!i&&!c&&s()},f=a?a.message:o&&o.type==="GET_RECORDS_REJ"?o.data.error:void 0,m=o&&o.type==="GET_RECORDS_RES"?o:void 0,w=m==null?void 0:m.data.records,b=(m==null?void 0:m.data.totalRecordCount)??0;return{request:h,records:w,error:f,loading:c,totalRecordCount:b}},H2=t=>{const e=br(),[r]=Ar(a=>[a.chainId]),{request:n,data:i,error:s,loading:o}=mn({topic:(e==null?void 0:e.topic)??"",chainId:r??"aleo:1",request:{id:1,jsonrpc:"2.0",method:"aleo_transfer",params:t}});return{transfer:n,data:i,error:s,loading:o}},Nd=()=>{const t=br(),[e,r,n]=Ar(i=>[i.setAccount,i.setAccounts,i.disconnect]);We.useEffect(()=>{if(t){window.localStorage.removeItem("WALLETCONNECT_DEEPLINK_CHOICE");const i=t.namespaces.aleo.accounts.map(s=>{const o=s.split(":");return{network:o[0],chainId:o[1],address:o[2],shortenedAddress:Za(o[2])}});r(i??[]),i[0]&&e(i[0])}},[t==null?void 0:t.topic]),ld(({id:i,topic:s})=>{ec("session deleted! topic: ",s),n()})};function Ld(t,e,r=e){const n=t<BigInt(0),i=t.toString().slice(n?1:0).padStart(e+1,"0"),s=i.slice(0,i.length-e),o=i.slice(-e);let a=o.length-1;for(;o[a]==="0";)--a;const c=o.slice(0,a+1);return(n?"-":"")+(c?`${s}.${c.slice(0,r)}`:s)}function V2(t,e){const[r,n]=t.split("."),i=(n||"").replace(/0+$/,"").slice(0,e),s=BigInt(10)**BigInt(e),o=s/BigInt(10)**BigInt(i.length||0);return BigInt(i||0)*o+BigInt(r||0)*s}var Md=(t=>(t[t.ETH=0]="ETH",t[t.DAI=1]="DAI",t))(Md||{});function q2(t){switch(t){case 0:return{id:0,symbol:"ETH",coinMarketCapID:"1027"};case 1:return{id:1,symbol:"DAI",coinMarketCapID:"4943"}}}class K2{constructor(e,r){this.getDisplayValue=()=>Ld(this.value,18)+" "+this.symbol,this.type=e;const{id:n,symbol:i,coinMarketCapID:s}=q2(e);this.id=n,this.symbol=i,this.coinMarketCapID=s,this.value=r}}const G2="0x6b175474e89094c44da98b954eedeac495271d0f",Y2=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,type:"function"}];/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Us=window,tc=Us.ShadowRoot&&(Us.ShadyCSS===void 0||Us.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,rc=Symbol(),Ud=new WeakMap;let Fd=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==rc)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(tc&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=Ud.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&Ud.set(r,e))}return e}toString(){return this.cssText}};const J2=t=>new Fd(typeof t=="string"?t:t+"",void 0,rc),Be=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new Fd(r,t,rc)},Z2=(t,e)=>{tc?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const n=document.createElement("style"),i=Us.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)})},jd=tc?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return J2(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var nc;const Fs=window,kd=Fs.trustedTypes,X2=kd?kd.emptyScript:"",Bd=Fs.reactiveElementPolyfillSupport,ic={toAttribute(t,e){switch(e){case Boolean:t=t?X2:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},zd=(t,e)=>e!==t&&(e==e||t==t),sc={attribute:!0,type:String,converter:ic,reflect:!1,hasChanged:zd},oc="finalized";let Wn=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,n)=>{const i=this._$Ep(n,r);i!==void 0&&(this._$Ev.set(i,n),e.push(i))}),e}static createProperty(e,r=sc){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const n=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,r);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){return{get(){return this[r]},set(i){const s=this[e];this[r]=i,this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||sc}static finalize(){if(this.hasOwnProperty(oc))return!1;this[oc]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,n=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const i of n)this.createProperty(i,r[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(jd(i))}else e!==void 0&&r.push(jd(e));return r}static _$Ep(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,n;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Z2(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostConnected)===null||n===void 0?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var n;return(n=r.hostDisconnected)===null||n===void 0?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$EO(e,r,n=sc){var i;const s=this.constructor._$Ep(e,n);if(s!==void 0&&n.reflect===!0){const o=(((i=n.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?n.converter:ic).toAttribute(r,n.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,r){var n;const i=this.constructor,s=i._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)===null||n===void 0?void 0:n.fromAttribute)!==void 0?o.converter:ic;this._$El=s,this[s]=a.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,n){let i=!0;e!==void 0&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||zd)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),n.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,s)=>this[s]=i),this._$Ei=void 0);let r=!1;const n=this._$AL;try{r=this.shouldUpdate(n),r?(this.willUpdate(n),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var s;return(s=i.hostUpdate)===null||s===void 0?void 0:s.call(i)}),this.update(n)):this._$Ek()}catch(i){throw r=!1,this._$Ek(),i}r&&this._$AE(n)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostUpdated)===null||i===void 0?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,n)=>this._$EO(n,this[n],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}};Wn[oc]=!0,Wn.elementProperties=new Map,Wn.elementStyles=[],Wn.shadowRootOptions={mode:"open"},Bd==null||Bd({ReactiveElement:Wn}),((nc=Fs.reactiveElementVersions)!==null&&nc!==void 0?nc:Fs.reactiveElementVersions=[]).push("1.6.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ac;const js=window,Hn=js.trustedTypes,Wd=Hn?Hn.createPolicy("lit-html",{createHTML:t=>t}):void 0,cc="$lit$",zr=`lit$${(Math.random()+"").slice(9)}$`,Hd="?"+zr,Q2=`<${Hd}>`,vn=document,Mi=()=>vn.createComment(""),Ui=t=>t===null||typeof t!="object"&&typeof t!="function",Vd=Array.isArray,e3=t=>Vd(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",lc=`[ 	
\f\r]`,Fi=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,qd=/-->/g,Kd=/>/g,bn=RegExp(`>|${lc}(?:([^\\s"'>=/]+)(${lc}*=${lc}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Gd=/'/g,Yd=/"/g,Jd=/^(?:script|style|textarea|title)$/i,Zd=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),J=Zd(1),st=Zd(2),_n=Symbol.for("lit-noChange"),_t=Symbol.for("lit-nothing"),Xd=new WeakMap,En=vn.createTreeWalker(vn,129,null,!1);function Qd(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Wd!==void 0?Wd.createHTML(e):e}const t3=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":"",o=Fi;for(let a=0;a<r;a++){const c=t[a];let d,h,f=-1,m=0;for(;m<c.length&&(o.lastIndex=m,h=o.exec(c),h!==null);)m=o.lastIndex,o===Fi?h[1]==="!--"?o=qd:h[1]!==void 0?o=Kd:h[2]!==void 0?(Jd.test(h[2])&&(i=RegExp("</"+h[2],"g")),o=bn):h[3]!==void 0&&(o=bn):o===bn?h[0]===">"?(o=i??Fi,f=-1):h[1]===void 0?f=-2:(f=o.lastIndex-h[2].length,d=h[1],o=h[3]===void 0?bn:h[3]==='"'?Yd:Gd):o===Yd||o===Gd?o=bn:o===qd||o===Kd?o=Fi:(o=bn,i=void 0);const w=o===bn&&t[a+1].startsWith("/>")?" ":"";s+=o===Fi?c+Q2:f>=0?(n.push(d),c.slice(0,f)+cc+c.slice(f)+zr+w):c+zr+(f===-2?(n.push(void 0),a):w)}return[Qd(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),n]};class ji{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[d,h]=t3(e,r);if(this.el=ji.createElement(d,n),En.currentNode=this.el.content,r===2){const f=this.el.content,m=f.firstChild;m.remove(),f.append(...m.childNodes)}for(;(i=En.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes()){const f=[];for(const m of i.getAttributeNames())if(m.endsWith(cc)||m.startsWith(zr)){const w=h[o++];if(f.push(m),w!==void 0){const b=i.getAttribute(w.toLowerCase()+cc).split(zr),_=/([.?@])?(.*)/.exec(w);c.push({type:1,index:s,name:_[2],strings:b,ctor:_[1]==="."?n3:_[1]==="?"?s3:_[1]==="@"?o3:ks})}else c.push({type:6,index:s})}for(const m of f)i.removeAttribute(m)}if(Jd.test(i.tagName)){const f=i.textContent.split(zr),m=f.length-1;if(m>0){i.textContent=Hn?Hn.emptyScript:"";for(let w=0;w<m;w++)i.append(f[w],Mi()),En.nextNode(),c.push({type:2,index:++s});i.append(f[m],Mi())}}}else if(i.nodeType===8)if(i.data===Hd)c.push({type:2,index:s});else{let f=-1;for(;(f=i.data.indexOf(zr,f+1))!==-1;)c.push({type:7,index:s}),f+=zr.length-1}s++}}static createElement(e,r){const n=vn.createElement("template");return n.innerHTML=e,n}}function Vn(t,e,r=t,n){var i,s,o,a;if(e===_n)return e;let c=n!==void 0?(i=r._$Co)===null||i===void 0?void 0:i[n]:r._$Cl;const d=Ui(e)?void 0:e._$litDirective$;return(c==null?void 0:c.constructor)!==d&&((s=c==null?void 0:c._$AO)===null||s===void 0||s.call(c,!1),d===void 0?c=void 0:(c=new d(t),c._$AT(t,r,n)),n!==void 0?((o=(a=r)._$Co)!==null&&o!==void 0?o:a._$Co=[])[n]=c:r._$Cl=c),c!==void 0&&(e=Vn(t,c._$AS(t,e.values),c,n)),e}class r3{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:n},parts:i}=this._$AD,s=((r=e==null?void 0:e.creationScope)!==null&&r!==void 0?r:vn).importNode(n,!0);En.currentNode=s;let o=En.nextNode(),a=0,c=0,d=i[0];for(;d!==void 0;){if(a===d.index){let h;d.type===2?h=new ki(o,o.nextSibling,this,e):d.type===1?h=new d.ctor(o,d.name,d.strings,this,e):d.type===6&&(h=new a3(o,this,e)),this._$AV.push(h),d=i[++c]}a!==(d==null?void 0:d.index)&&(o=En.nextNode(),a++)}return En.currentNode=vn,s}v(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class ki{constructor(e,r,n,i){var s;this.type=2,this._$AH=_t,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cp=(s=i==null?void 0:i.isConnected)===null||s===void 0||s}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Vn(this,e,r),Ui(e)?e===_t||e==null||e===""?(this._$AH!==_t&&this._$AR(),this._$AH=_t):e!==this._$AH&&e!==_n&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):e3(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==_t&&Ui(this._$AH)?this._$AA.nextSibling.data=e:this.$(vn.createTextNode(e)),this._$AH=e}g(e){var r;const{values:n,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=ji.createElement(Qd(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===s)this._$AH.v(n);else{const o=new r3(s,this),a=o.u(this.options);o.v(n),this.$(a),this._$AH=o}}_$AC(e){let r=Xd.get(e.strings);return r===void 0&&Xd.set(e.strings,r=new ji(e)),r}T(e){Vd(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new ki(this.k(Mi()),this.k(Mi()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)===null||n===void 0||n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class ks{constructor(e,r,n,i,s){this.type=1,this._$AH=_t,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=_t}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=Vn(this,e,r,0),o=!Ui(e)||e!==this._$AH&&e!==_n,o&&(this._$AH=e);else{const a=e;let c,d;for(e=s[0],c=0;c<s.length-1;c++)d=Vn(this,a[n+c],r,c),d===_n&&(d=this._$AH[c]),o||(o=!Ui(d)||d!==this._$AH[c]),d===_t?e=_t:e!==_t&&(e+=(d??"")+s[c+1]),this._$AH[c]=d}o&&!i&&this.j(e)}j(e){e===_t?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class n3 extends ks{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===_t?void 0:e}}const i3=Hn?Hn.emptyScript:"";let s3=class extends ks{constructor(){super(...arguments),this.type=4}j(e){e&&e!==_t?this.element.setAttribute(this.name,i3):this.element.removeAttribute(this.name)}};class o3 extends ks{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){var n;if((e=(n=Vn(this,e,r,0))!==null&&n!==void 0?n:_t)===_n)return;const i=this._$AH,s=e===_t&&i!==_t||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,o=e!==_t&&(i===_t||s);s&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,n;typeof this._$AH=="function"?this._$AH.call((n=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:this.element,e):this._$AH.handleEvent(e)}}let a3=class{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Vn(this,e)}};const ef=js.litHtmlPolyfillSupport;ef==null||ef(ji,ki),((ac=js.litHtmlVersions)!==null&&ac!==void 0?ac:js.litHtmlVersions=[]).push("2.7.5");const c3=(t,e,r)=>{var n,i;const s=(n=r==null?void 0:r.renderBefore)!==null&&n!==void 0?n:e;let o=s._$litPart$;if(o===void 0){const a=(i=r==null?void 0:r.renderBefore)!==null&&i!==void 0?i:null;s._$litPart$=o=new ki(e.insertBefore(Mi(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var uc,hc;class _e extends Wn{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;const n=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=n.firstChild),n}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=c3(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return _n}}_e.finalized=!0,_e._$litElement$=!0,(uc=globalThis.litElementHydrateSupport)===null||uc===void 0||uc.call(globalThis,{LitElement:_e});const tf=globalThis.litElementPolyfillSupport;tf==null||tf({LitElement:_e}),((hc=globalThis.litElementVersions)!==null&&hc!==void 0?hc:globalThis.litElementVersions=[]).push("3.3.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Pe=t=>e=>typeof e=="function"?((r,n)=>(customElements.define(r,n),n))(t,e):((r,n)=>{const{kind:i,elements:s}=n;return{kind:i,elements:s,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const l3=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},u3=(t,e,r)=>{e.constructor.createProperty(r,t)};function pe(t){return(e,r)=>r!==void 0?u3(t,e,r):l3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function qt(t){return pe({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var dc;((dc=window.HTMLSlotElement)===null||dc===void 0?void 0:dc.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const h3={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},d3=t=>(...e)=>({_$litDirective$:t,values:e});class f3{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,n){this._$Ct=e,this._$AM=r,this._$Ci=n}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $r=d3(class extends f3{constructor(t){var e;if(super(t),t.type!==h3.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,n;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((r=this.nt)===null||r===void 0)&&r.has(s))&&this.it.add(s);return this.render(e)}const i=t.element.classList;this.it.forEach(s=>{s in e||(i.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((n=this.nt)===null||n===void 0)&&n.has(s)||(o?(i.add(s),this.it.add(s)):(i.remove(s),this.it.delete(s)))}return _n}});function p3(t,e){t.indexOf(e)===-1&&t.push(e)}const rf=(t,e,r)=>Math.min(Math.max(r,t),e),sr={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},Bs=t=>typeof t=="number",qn=t=>Array.isArray(t)&&!Bs(t[0]),g3=(t,e,r)=>{const n=e-t;return((r-t)%n+n)%n+t};function m3(t,e){return qn(t)?t[g3(0,t.length,e)]:t}const nf=(t,e,r)=>-r*t+r*e+t,sf=()=>{},Wr=t=>t,fc=(t,e,r)=>e-t===0?1:(r-t)/(e-t);function of(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=fc(0,e,n);t.push(nf(r,1,i))}}function y3(t){const e=[0];return of(e,t-1),e}function w3(t,e=y3(t.length),r=Wr){const n=t.length,i=n-e.length;return i>0&&of(e,i),s=>{let o=0;for(;o<n-2&&!(s<e[o+1]);o++);let a=rf(0,1,fc(e[o],e[o+1],s));return a=m3(r,o)(a),nf(t[o],t[o+1],a)}}const af=t=>Array.isArray(t)&&Bs(t[0]),pc=t=>typeof t=="object"&&!!t.createAnimation,Kn=t=>typeof t=="function",v3=t=>typeof t=="string",Bi={ms:t=>t*1e3,s:t=>t/1e3},cf=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,b3=1e-7,_3=12;function E3(t,e,r,n,i){let s,o,a=0;do o=e+(r-e)/2,s=cf(o,n,i)-t,s>0?r=o:e=o;while(Math.abs(s)>b3&&++a<_3);return o}function zi(t,e,r,n){if(t===e&&r===n)return Wr;const i=s=>E3(s,0,1,t,r);return s=>s===0||s===1?s:cf(i(s),e,n)}const S3=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*t,i=e==="end"?Math.floor(n):Math.ceil(n);return rf(0,1,i/t)},lf={ease:zi(.25,.1,.25,1),"ease-in":zi(.42,0,1,1),"ease-in-out":zi(.42,0,.58,1),"ease-out":zi(0,0,.58,1)},x3=/\((.*?)\)/;function uf(t){if(Kn(t))return t;if(af(t))return zi(...t);if(lf[t])return lf[t];if(t.startsWith("steps")){const e=x3.exec(t);if(e){const r=e[1].split(",");return S3(parseFloat(r[0]),r[1].trim())}}return Wr}class hf{constructor(e,r=[0,1],{easing:n,duration:i=sr.duration,delay:s=sr.delay,endDelay:o=sr.endDelay,repeat:a=sr.repeat,offset:c,direction:d="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=Wr,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((f,m)=>{this.resolve=f,this.reject=m}),n=n||sr.easing,pc(n)){const f=n.createAnimation(r);n=f.easing,r=f.keyframes||r,i=f.duration||i}this.repeat=a,this.easing=qn(n)?Wr:uf(n),this.updateDuration(i);const h=w3(r,c,qn(n)?n.map(uf):Wr);this.tick=f=>{var m;s=s;let w=0;this.pauseTime!==void 0?w=this.pauseTime:w=(f-this.startTime)*this.rate,this.t=w,w/=1e3,w=Math.max(w-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(w=this.totalDuration);const b=w/this.duration;let _=Math.floor(b),I=b%1;!I&&b>=1&&(I=1),I===1&&_--;const A=_%2;(d==="reverse"||d==="alternate"&&A||d==="alternate-reverse"&&!A)&&(I=1-I);const v=w>=this.totalDuration?1:Math.min(I,1),S=h(this.easing(v));e(S),this.pauseTime===void 0&&(this.playState==="finished"||w>=this.totalDuration+o)?(this.playState="finished",(m=this.resolve)===null||m===void 0||m.call(this,S)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}var gc=function(){};process.env.NODE_ENV!=="production"&&(gc=function(t,e){if(!t)throw new Error(e)});class D3{setAnimation(e){this.animation=e,e==null||e.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const mc=new WeakMap;function df(t){return mc.has(t)||mc.set(t,{transforms:[],values:new Map}),mc.get(t)}function C3(t,e){return t.has(e)||t.set(e,new D3),t.get(e)}const O3=["","X","Y","Z"],I3=["translate","scale","rotate","skew"],zs={x:"translateX",y:"translateY",z:"translateZ"},ff={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},A3={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:ff,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:Wr},skew:ff},Wi=new Map,yc=t=>`--motion-${t}`,Ws=["x","y","z"];I3.forEach(t=>{O3.forEach(e=>{Ws.push(t+e),Wi.set(yc(t+e),A3[t])})});const $3=(t,e)=>Ws.indexOf(t)-Ws.indexOf(e),T3=new Set(Ws),pf=t=>T3.has(t),R3=(t,e)=>{zs[e]&&(e=zs[e]);const{transforms:r}=df(t);p3(r,e),t.style.transform=P3(r)},P3=t=>t.sort($3).reduce(N3,"").trim(),N3=(t,e)=>`${t} ${e}(var(${yc(e)}))`,wc=t=>t.startsWith("--"),gf=new Set;function L3(t){if(!gf.has(t)){gf.add(t);try{const{syntax:e,initialValue:r}=Wi.has(t)?Wi.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:r})}catch{}}}const vc=(t,e)=>document.createElement("div").animate(t,e),mf={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{vc({opacity:[1]})}catch{return!1}return!0},finished:()=>!!vc({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{vc({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},bc={},Gn={};for(const t in mf)Gn[t]=()=>(bc[t]===void 0&&(bc[t]=mf[t]()),bc[t]);const M3=.015,U3=(t,e)=>{let r="";const n=Math.round(e/M3);for(let i=0;i<n;i++)r+=t(fc(0,n-1,i))+", ";return r.substring(0,r.length-2)},yf=(t,e)=>Kn(t)?Gn.linearEasing()?`linear(${U3(t,e)})`:sr.easing:af(t)?F3(t):t,F3=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`;function j3(t,e){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:e());return t}const k3=t=>Array.isArray(t)?t:[t];function _c(t){return zs[t]&&(t=zs[t]),pf(t)?yc(t):t}const Hs={get:(t,e)=>{e=_c(e);let r=wc(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!r&&r!==0){const n=Wi.get(e);n&&(r=n.initialValue)}return r},set:(t,e,r)=>{e=_c(e),wc(e)?t.style.setProperty(e,r):t.style[e]=r}};function wf(t,e=!0){if(!(!t||t.playState==="finished"))try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch{}}function B3(t,e){var r;let n=(e==null?void 0:e.toDefaultUnit)||Wr;const i=t[t.length-1];if(v3(i)){const s=((r=i.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(n=o=>o+s)}return n}function z3(){return window.__MOTION_DEV_TOOLS_RECORD}function W3(t,e,r,n={},i){const s=z3(),o=n.record!==!1&&s;let a,{duration:c=sr.duration,delay:d=sr.delay,endDelay:h=sr.endDelay,repeat:f=sr.repeat,easing:m=sr.easing,persist:w=!1,direction:b,offset:_,allowWebkitAcceleration:I=!1}=n;const A=df(t),v=pf(e);let S=Gn.waapi();v&&R3(t,e);const y=_c(e),x=C3(A.values,y),p=Wi.get(y);return wf(x.animation,!(pc(m)&&x.generator)&&n.record!==!1),()=>{const l=()=>{var L,U;return(U=(L=Hs.get(t,y))!==null&&L!==void 0?L:p==null?void 0:p.initialValue)!==null&&U!==void 0?U:0};let g=j3(k3(r),l);const M=B3(g,p);if(pc(m)){const L=m.createAnimation(g,e!=="opacity",l,y,x);m=L.easing,g=L.keyframes||g,c=L.duration||c}if(wc(y)&&(Gn.cssRegisterProperty()?L3(y):S=!1),v&&!Gn.linearEasing()&&(Kn(m)||qn(m)&&m.some(Kn))&&(S=!1),S){p&&(g=g.map(F=>Bs(F)?p.toDefaultUnit(F):F)),g.length===1&&(!Gn.partialKeyframes()||o)&&g.unshift(l());const L={delay:Bi.ms(d),duration:Bi.ms(c),endDelay:Bi.ms(h),easing:qn(m)?void 0:yf(m,c),direction:b,iterations:f+1,fill:"both"};a=t.animate({[y]:g,offset:_,easing:qn(m)?m.map(F=>yf(F,c)):void 0},L),a.finished||(a.finished=new Promise((F,j)=>{a.onfinish=F,a.oncancel=j}));const U=g[g.length-1];a.finished.then(()=>{w||(Hs.set(t,y,U),a.cancel())}).catch(sf),I||(a.playbackRate=1.000001)}else if(i&&v)g=g.map(L=>typeof L=="string"?parseFloat(L):L),g.length===1&&g.unshift(parseFloat(l())),a=new i(L=>{Hs.set(t,y,M?M(L):L)},g,Object.assign(Object.assign({},n),{duration:c,easing:m}));else{const L=g[g.length-1];Hs.set(t,y,p&&Bs(L)?p.toDefaultUnit(L):L)}return o&&s(t,e,g,{duration:c,delay:d,easing:m,repeat:f,offset:_},"motion-one"),x.setAnimation(a),a}}const H3=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function V3(t,e){var r;return typeof t=="string"?e?((r=e[t])!==null&&r!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const q3=t=>t(),vf=(t,e,r=sr.duration)=>new Proxy({animations:t.map(q3).filter(Boolean),duration:r,options:e},G3),K3=t=>t.animations[0],G3={get:(t,e)=>{const r=K3(t);switch(e){case"duration":return t.duration;case"currentTime":return Bi.s((r==null?void 0:r[e])||0);case"playbackRate":case"playState":return r==null?void 0:r[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(Y3)).catch(sf)),t.finished;case"stop":return()=>{t.animations.forEach(n=>wf(n))};case"forEachNative":return n=>{t.animations.forEach(i=>n(i,t))};default:return typeof(r==null?void 0:r[e])>"u"?void 0:()=>t.animations.forEach(n=>n[e]())}},set:(t,e,r)=>{switch(e){case"currentTime":r=Bi.ms(r);case"currentTime":case"playbackRate":for(let n=0;n<t.animations.length;n++)t.animations[n][e]=r;return!0}return!1}},Y3=t=>t.finished;function J3(t,e,r){return Kn(t)?t(e,r):t}function Z3(t){return function(r,n,i={}){r=V3(r);const s=r.length;gc(!!s,"No valid element provided."),gc(!!n,"No keyframes defined.");const o=[];for(let a=0;a<s;a++){const c=r[a];for(const d in n){const h=H3(i,d);h.delay=J3(h.delay,a,s);const f=W3(c,d,n[d],h,t);o.push(f)}}return vf(o,i,i.duration)}}const X3=Z3(hf);function Q3(t,e={}){return vf([()=>{const r=new hf(t,[0,1],e);return r.finished.catch(()=>{}),r}],e,e.duration)}function Sn(t,e,r){return(Kn(t)?Q3:X3)(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const zt=t=>t??_t;var Hi={},e5=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},bf={},Xt={};let Ec;const t5=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Xt.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},Xt.getSymbolTotalCodewords=function(e){return t5[e]},Xt.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},Xt.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Ec=e},Xt.isKanjiModeEnabled=function(){return typeof Ec<"u"},Xt.toSJIS=function(e){return Ec(e)};var Vs={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(Vs);function _f(){this.buffer=[],this.length=0}_f.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var r5=_f;function Vi(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Vi.prototype.set=function(t,e,r,n){const i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},Vi.prototype.get=function(t,e){return this.data[t*this.size+e]},Vi.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},Vi.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var n5=Vi,Ef={};(function(t){const e=Xt.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||i.push([s[a],s[c]]);return i}})(Ef);var Sf={};const i5=Xt.getSymbolSize,xf=7;Sf.getPositions=function(e){const r=i5(e);return[[0,0],[r-xf,0],[0,r-xf]]};var Df={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,c=0,d=null,h=null;for(let f=0;f<s;f++){a=c=0,d=h=null;for(let m=0;m<s;m++){let w=i.get(f,m);w===d?a++:(a>=5&&(o+=e.N1+(a-5)),d=w,a=1),w=i.get(m,f),w===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=w,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const d=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(d===4||d===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,c=0;for(let d=0;d<s;d++){a=c=0;for(let h=0;h<s;h++)a=a<<1&2047|i.get(d,h),h>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|i.get(h,d),h>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(i,c,a))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let d=0;d<o;d++){s(d),t.applyMask(d,i);const h=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(d,i),h<c&&(c=h,a=d)}return a}})(Df);var qs={};const Hr=Vs,Ks=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Gs=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];qs.getBlocksCount=function(e,r){switch(r){case Hr.L:return Ks[(e-1)*4+0];case Hr.M:return Ks[(e-1)*4+1];case Hr.Q:return Ks[(e-1)*4+2];case Hr.H:return Ks[(e-1)*4+3];default:return}},qs.getTotalCodewordsCount=function(e,r){switch(r){case Hr.L:return Gs[(e-1)*4+0];case Hr.M:return Gs[(e-1)*4+1];case Hr.Q:return Gs[(e-1)*4+2];case Hr.H:return Gs[(e-1)*4+3];default:return}};var Cf={},Ys={};const qi=new Uint8Array(512),Js=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)qi[r]=e,Js[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)qi[r]=qi[r-255]})(),Ys.log=function(e){if(e<1)throw new Error("log("+e+")");return Js[e]},Ys.exp=function(e){return qi[e]},Ys.mul=function(e,r){return e===0||r===0?0:qi[Js[e]+Js[r]]},function(t){const e=Ys;t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(n[o],i[a]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(Cf);const Of=Cf;function Sc(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Sc.prototype.initialize=function(e){this.degree=e,this.genPoly=Of.generateECPolynomial(this.degree)},Sc.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const n=Of.mod(r,this.genPoly),i=this.degree-n.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(n,i),s}return n};var s5=Sc,If={},Vr={},xc={};xc.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Er={};const Af="[0-9]+",o5="[A-Z $%*+\\-./:]+";let Ki="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ki=Ki.replace(/u/g,"\\u");const a5="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ki+`)(?:.|[\r
]))+`;Er.KANJI=new RegExp(Ki,"g"),Er.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Er.BYTE=new RegExp(a5,"g"),Er.NUMERIC=new RegExp(Af,"g"),Er.ALPHANUMERIC=new RegExp(o5,"g");const c5=new RegExp("^"+Ki+"$"),l5=new RegExp("^"+Af+"$"),u5=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Er.testKanji=function(e){return c5.test(e)},Er.testNumeric=function(e){return l5.test(e)},Er.testAlphanumeric=function(e){return u5.test(e)},function(t){const e=xc,r=Er;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}}(Vr),function(t){const e=Xt,r=qs,n=Vs,i=Vr,s=xc,o=7973,a=e.getBCHDigit(o);function c(m,w,b){for(let _=1;_<=40;_++)if(w<=t.getCapacity(_,b,m))return _}function d(m,w){return i.getCharCountIndicator(m,w)+4}function h(m,w){let b=0;return m.forEach(function(_){const I=d(_.mode,w);b+=I+_.getBitsLength()}),b}function f(m,w){for(let b=1;b<=40;b++)if(h(m,b)<=t.getCapacity(b,w,i.MIXED))return b}t.from=function(w,b){return s.isValid(w)?parseInt(w,10):b},t.getCapacity=function(w,b,_){if(!s.isValid(w))throw new Error("Invalid QR Code version");typeof _>"u"&&(_=i.BYTE);const I=e.getSymbolTotalCodewords(w),A=r.getTotalCodewordsCount(w,b),v=(I-A)*8;if(_===i.MIXED)return v;const S=v-d(_,w);switch(_){case i.NUMERIC:return Math.floor(S/10*3);case i.ALPHANUMERIC:return Math.floor(S/11*2);case i.KANJI:return Math.floor(S/13);case i.BYTE:default:return Math.floor(S/8)}},t.getBestVersionForData=function(w,b){let _;const I=n.from(b,n.M);if(Array.isArray(w)){if(w.length>1)return f(w,I);if(w.length===0)return 1;_=w[0]}else _=w;return c(_.mode,_.getLength(),I)},t.getEncodedBits=function(w){if(!s.isValid(w)||w<7)throw new Error("Invalid QR Code version");let b=w<<12;for(;e.getBCHDigit(b)-a>=0;)b^=o<<e.getBCHDigit(b)-a;return w<<12|b}}(If);var $f={};const Dc=Xt,Tf=1335,h5=21522,Rf=Dc.getBCHDigit(Tf);$f.getEncodedBits=function(e,r){const n=e.bit<<3|r;let i=n<<10;for(;Dc.getBCHDigit(i)-Rf>=0;)i^=Tf<<Dc.getBCHDigit(i)-Rf;return(n<<10|i)^h5};var Pf={};const d5=Vr;function Yn(t){this.mode=d5.NUMERIC,this.data=t.toString()}Yn.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},Yn.prototype.getLength=function(){return this.data.length},Yn.prototype.getBitsLength=function(){return Yn.getBitsLength(this.data.length)},Yn.prototype.write=function(e){let r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);const s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var f5=Yn;const p5=Vr,Cc=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Jn(t){this.mode=p5.ALPHANUMERIC,this.data=t}Jn.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},Jn.prototype.getLength=function(){return this.data.length},Jn.prototype.getBitsLength=function(){return Jn.getBitsLength(this.data.length)},Jn.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let n=Cc.indexOf(this.data[r])*45;n+=Cc.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(Cc.indexOf(this.data[r]),6)};var g5=Jn,m5=function(e){for(var r=[],n=e.length,i=0;i<n;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&n>i+1){var o=e.charCodeAt(i+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,i+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const y5=m5,w5=Vr;function Zn(t){this.mode=w5.BYTE,typeof t=="string"&&(t=y5(t)),this.data=new Uint8Array(t)}Zn.getBitsLength=function(e){return e*8},Zn.prototype.getLength=function(){return this.data.length},Zn.prototype.getBitsLength=function(){return Zn.getBitsLength(this.data.length)},Zn.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var v5=Zn;const b5=Vr,_5=Xt;function Xn(t){this.mode=b5.KANJI,this.data=t}Xn.getBitsLength=function(e){return e*13},Xn.prototype.getLength=function(){return this.data.length},Xn.prototype.getBitsLength=function(){return Xn.getBitsLength(this.data.length)},Xn.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=_5.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var E5=Xn,Nf={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var c,d,h,f,m,w,b,_,I;!a.empty();){c=a.pop(),d=c.value,f=c.cost,m=r[d]||{};for(h in m)m.hasOwnProperty(h)&&(w=m[h],b=f+w,_=o[h],I=typeof o[h]>"u",(I||_>b)&&(o[h]=b,a.push(h,b),s[h]=d))}if(typeof i<"u"&&typeof o[i]>"u"){var A=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(A)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Nf);var S5=Nf.exports;(function(t){const e=Vr,r=f5,n=g5,i=v5,s=E5,o=Er,a=Xt,c=S5;function d(A){return unescape(encodeURIComponent(A)).length}function h(A,v,S){const y=[];let x;for(;(x=A.exec(S))!==null;)y.push({data:x[0],index:x.index,mode:v,length:x[0].length});return y}function f(A){const v=h(o.NUMERIC,e.NUMERIC,A),S=h(o.ALPHANUMERIC,e.ALPHANUMERIC,A);let y,x;return a.isKanjiModeEnabled()?(y=h(o.BYTE,e.BYTE,A),x=h(o.KANJI,e.KANJI,A)):(y=h(o.BYTE_KANJI,e.BYTE,A),x=[]),v.concat(S,y,x).sort(function(l,g){return l.index-g.index}).map(function(l){return{data:l.data,mode:l.mode,length:l.length}})}function m(A,v){switch(v){case e.NUMERIC:return r.getBitsLength(A);case e.ALPHANUMERIC:return n.getBitsLength(A);case e.KANJI:return s.getBitsLength(A);case e.BYTE:return i.getBitsLength(A)}}function w(A){return A.reduce(function(v,S){const y=v.length-1>=0?v[v.length-1]:null;return y&&y.mode===S.mode?(v[v.length-1].data+=S.data,v):(v.push(S),v)},[])}function b(A){const v=[];for(let S=0;S<A.length;S++){const y=A[S];switch(y.mode){case e.NUMERIC:v.push([y,{data:y.data,mode:e.ALPHANUMERIC,length:y.length},{data:y.data,mode:e.BYTE,length:y.length}]);break;case e.ALPHANUMERIC:v.push([y,{data:y.data,mode:e.BYTE,length:y.length}]);break;case e.KANJI:v.push([y,{data:y.data,mode:e.BYTE,length:d(y.data)}]);break;case e.BYTE:v.push([{data:y.data,mode:e.BYTE,length:d(y.data)}])}}return v}function _(A,v){const S={},y={start:{}};let x=["start"];for(let p=0;p<A.length;p++){const l=A[p],g=[];for(let M=0;M<l.length;M++){const L=l[M],U=""+p+M;g.push(U),S[U]={node:L,lastCount:0},y[U]={};for(let F=0;F<x.length;F++){const j=x[F];S[j]&&S[j].node.mode===L.mode?(y[j][U]=m(S[j].lastCount+L.length,L.mode)-m(S[j].lastCount,L.mode),S[j].lastCount+=L.length):(S[j]&&(S[j].lastCount=L.length),y[j][U]=m(L.length,L.mode)+4+e.getCharCountIndicator(L.mode,v))}}x=g}for(let p=0;p<x.length;p++)y[x[p]].end=0;return{map:y,table:S}}function I(A,v){let S;const y=e.getBestModeForData(A);if(S=e.from(v,y),S!==e.BYTE&&S.bit<y.bit)throw new Error('"'+A+'" cannot be encoded with mode '+e.toString(S)+`.
 Suggested mode is: `+e.toString(y));switch(S===e.KANJI&&!a.isKanjiModeEnabled()&&(S=e.BYTE),S){case e.NUMERIC:return new r(A);case e.ALPHANUMERIC:return new n(A);case e.KANJI:return new s(A);case e.BYTE:return new i(A)}}t.fromArray=function(v){return v.reduce(function(S,y){return typeof y=="string"?S.push(I(y,null)):y.data&&S.push(I(y.data,y.mode)),S},[])},t.fromString=function(v,S){const y=f(v,a.isKanjiModeEnabled()),x=b(y),p=_(x,S),l=c.find_path(p.map,"start","end"),g=[];for(let M=1;M<l.length-1;M++)g.push(p.table[l[M]].node);return t.fromArray(w(g))},t.rawSplit=function(v){return t.fromArray(f(v,a.isKanjiModeEnabled()))}})(Pf);const Zs=Xt,Oc=Vs,x5=r5,D5=n5,C5=Ef,O5=Sf,Ic=Df,Ac=qs,I5=s5,Xs=If,A5=$f,$5=Vr,$c=Pf;function T5(t,e){const r=t.size,n=O5.getPositions(e);for(let i=0;i<n.length;i++){const s=n[i][0],o=n[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function R5(t){const e=t.size;for(let r=8;r<e-8;r++){const n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function P5(t,e){const r=C5.getPositions(e);for(let n=0;n<r.length;n++){const i=r[n][0],s=r[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(i+o,s+a,!0,!0):t.set(i+o,s+a,!1,!0)}}function N5(t,e){const r=t.size,n=Xs.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+r-8-3,o=(n>>a&1)===1,t.set(i,s,o,!0),t.set(s,i,o,!0)}function Tc(t,e,r){const n=t.size,i=A5.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(n-15+s,8,o,!0),s<8?t.set(8,n-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(n-8,8,1,!0)}function L5(t,e){const r=t.size;let n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let d=!1;o<e.length&&(d=(e[o]>>>s&1)===1),t.set(i,a-c,d),s--,s===-1&&(o++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function M5(t,e,r){const n=new x5;r.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),$5.getCharCountIndicator(c.mode,t)),c.write(n)});const i=Zs.getSymbolTotalCodewords(t),s=Ac.getTotalCodewordsCount(t,e),o=(i-s)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let c=0;c<a;c++)n.put(c%2?17:236,8);return U5(n,t,e)}function U5(t,e,r){const n=Zs.getSymbolTotalCodewords(e),i=Ac.getTotalCodewordsCount(e,r),s=n-i,o=Ac.getBlocksCount(e,r),a=n%o,c=o-a,d=Math.floor(n/o),h=Math.floor(s/o),f=h+1,m=d-h,w=new I5(m);let b=0;const _=new Array(o),I=new Array(o);let A=0;const v=new Uint8Array(t.buffer);for(let l=0;l<o;l++){const g=l<c?h:f;_[l]=v.slice(b,b+g),I[l]=w.encode(_[l]),b+=g,A=Math.max(A,g)}const S=new Uint8Array(n);let y=0,x,p;for(x=0;x<A;x++)for(p=0;p<o;p++)x<_[p].length&&(S[y++]=_[p][x]);for(x=0;x<m;x++)for(p=0;p<o;p++)S[y++]=I[p][x];return S}function F5(t,e,r,n){let i;if(Array.isArray(t))i=$c.fromArray(t);else if(typeof t=="string"){let d=e;if(!d){const h=$c.rawSplit(t);d=Xs.getBestVersionForData(h,r)}i=$c.fromString(t,d||40)}else throw new Error("Invalid data");const s=Xs.getBestVersionForData(i,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=M5(e,r,i),a=Zs.getSymbolSize(e),c=new D5(a);return T5(c,e),R5(c),P5(c,e),Tc(c,r,0),e>=7&&N5(c,e),L5(c,o),isNaN(n)&&(n=Ic.getBestMask(c,Tc.bind(null,c,r))),Ic.applyMask(n,c),Tc(c,r,n),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}bf.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let n=Oc.M,i,s;return typeof r<"u"&&(n=Oc.from(r.errorCorrectionLevel,Oc.M),i=Xs.from(r.version),s=Ic.from(r.maskPattern),r.toSJISFunc&&Zs.setToSJISFunction(r.toSJISFunc)),F5(e,i,n,s)};var Lf={},Rc={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,a=i.modules.data,c=t.getScale(o,s),d=Math.floor((o+s.margin*2)*c),h=s.margin*c,f=[s.color.light,s.color.dark];for(let m=0;m<d;m++)for(let w=0;w<d;w++){let b=(m*d+w)*4,_=s.color.light;if(m>=h&&w>=h&&m<d-h&&w<d-h){const I=Math.floor((m-h)/c),A=Math.floor((w-h)/c);_=f[a[I*o+A]?1:0]}n[b++]=_.r,n[b++]=_.g,n[b++]=_.b,n[b]=_.a}}})(Rc),function(t){const e=Rc;function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=n()),c=e.getOptions(c);const h=e.getImageWidth(s.modules.size,c),f=d.getContext("2d"),m=f.createImageData(h,h);return e.qrToImageData(m.data,s,c),r(f,d,h),f.putImageData(m,0,0),d},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=t.render(s,o,c),h=c.type||"image/png",f=c.rendererOpts||{};return d.toDataURL(h,f.quality)}}(Lf);var Mf={};const j5=Rc;function Uf(t,e){const r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function Pc(t,e,r){let n=t+e;return typeof r<"u"&&(n+=" "+r),n}function k5(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),d=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(n+=s?Pc("M",c+r,.5+d+r):Pc("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(n+=Pc("h",o),o=0)):i++}return n}Mf.render=function(e,r,n){const i=j5.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,c=i.color.light.a?"<path "+Uf(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",d="<path "+Uf(i.color.dark,"stroke")+' d="'+k5(o,s,i.margin)+'"/>',h='viewBox="0 0 '+a+" "+a+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+h+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof n=="function"&&n(null,m),m};const B5=e5,Nc=bf,Ff=Lf,z5=Mf;function Lc(t,e,r,n,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!B5())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=r,r=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=n=void 0):o===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(c,d){try{const h=Nc.create(r,n);c(t(h,e,n))}catch(h){d(h)}})}try{const c=Nc.create(r,n);i(null,t(c,e,n))}catch(c){i(c)}}Hi.create=Nc.create,Hi.toCanvas=Lc.bind(null,Ff.render),Hi.toDataURL=Lc.bind(null,Ff.renderToDataURL),Hi.toString=Lc.bind(null,function(t,e,r){return z5.render(t,r)});var W5=Object.defineProperty,jf=Object.getOwnPropertySymbols,H5=Object.prototype.hasOwnProperty,V5=Object.prototype.propertyIsEnumerable,kf=(t,e,r)=>e in t?W5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Mc=(t,e)=>{for(var r in e||(e={}))H5.call(e,r)&&kf(t,r,e[r]);if(jf)for(var r of jf(e))V5.call(e,r)&&kf(t,r,e[r]);return t};function q5(){var t;const e=(t=Mr.state.themeMode)!=null?t:"dark",r={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":r.foreground[1],"--wcm-color-fg-2":r.foreground[2],"--wcm-color-fg-3":r.foreground[3],"--wcm-color-bg-1":r.background[1],"--wcm-color-bg-2":r.background[2],"--wcm-color-bg-3":r.background[3],"--wcm-color-overlay":r.overlay}}function Bf(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const Re={getPreset(t){return Bf()[t]},setTheme(){const t=document.querySelector(":root"),{themeVariables:e}=Mr.state;if(t){const r=Mc(Mc(Mc({},q5()),Bf()),e);Object.entries(r).forEach(([n,i])=>t.style.setProperty(n,i))}},globalCss:Be`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},K5=Be`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var G5=Object.defineProperty,Y5=Object.getOwnPropertyDescriptor,Qn=(t,e,r,n)=>{for(var i=n>1?void 0:n?Y5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&G5(e,r,i),i};let qr=class extends _e{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const t={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),J`<button class="${$r(t)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};qr.styles=[Re.globalCss,K5],Qn([pe({type:Boolean})],qr.prototype,"disabled",2),Qn([pe()],qr.prototype,"iconLeft",2),Qn([pe()],qr.prototype,"iconRight",2),Qn([pe()],qr.prototype,"onClick",2),Qn([pe()],qr.prototype,"variant",2),qr=Qn([Pe("wcm-button")],qr);const J5=Be`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var Z5=Object.defineProperty,X5=Object.getOwnPropertyDescriptor,Uc=(t,e,r,n)=>{for(var i=n>1?void 0:n?X5(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Z5(e,r,i),i};let Gi=class extends _e{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const t={"wcm-secondary":this.variant==="secondary"};return J`<button ?disabled="${this.disabled}" class="${$r(t)}"><slot></slot></button>`}};Gi.styles=[Re.globalCss,J5],Uc([pe({type:Boolean})],Gi.prototype,"disabled",2),Uc([pe()],Gi.prototype,"variant",2),Gi=Uc([Pe("wcm-button-big")],Gi);const Q5=Be`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var e_=Object.defineProperty,t_=Object.getOwnPropertyDescriptor,r_=(t,e,r,n)=>{for(var i=n>1?void 0:n?t_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&e_(e,r,i),i};let Fc=class extends _e{render(){return J`<div><slot></slot></div>`}};Fc.styles=[Re.globalCss,Q5],Fc=r_([Pe("wcm-info-footer")],Fc);const ze={CROSS_ICON:st`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:st`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:st`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:st`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:st`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:st`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:st`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:st`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:st`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:st`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:st`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:st`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:st`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:st`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:st`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:st`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:st`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:st`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},n_=Be`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var i_=Object.defineProperty,s_=Object.getOwnPropertyDescriptor,o_=(t,e,r,n)=>{for(var i=n>1?void 0:n?s_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&i_(e,r,i),i};let jc=class extends _e{render(){return J`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${ze.WALLET_CONNECT_LOGO} <button @click="${nn.close}">${ze.CROSS_ICON}</button></div>`}};jc.styles=[Re.globalCss,n_],jc=o_([Pe("wcm-modal-backcard")],jc);const a_=Be`main{padding:20px;padding-top:0;width:100%}`;var c_=Object.defineProperty,l_=Object.getOwnPropertyDescriptor,u_=(t,e,r,n)=>{for(var i=n>1?void 0:n?l_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&c_(e,r,i),i};let kc=class extends _e{render(){return J`<main><slot></slot></main>`}};kc.styles=[Re.globalCss,a_],kc=u_([Pe("wcm-modal-content")],kc);const h_=Be`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var d_=Object.defineProperty,f_=Object.getOwnPropertyDescriptor,p_=(t,e,r,n)=>{for(var i=n>1?void 0:n?f_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&d_(e,r,i),i};let Bc=class extends _e{render(){return J`<footer><slot></slot></footer>`}};Bc.styles=[Re.globalCss,h_],Bc=p_([Pe("wcm-modal-footer")],Bc);const g_=Be`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var m_=Object.defineProperty,y_=Object.getOwnPropertyDescriptor,Yi=(t,e,r,n)=>{for(var i=n>1?void 0:n?y_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&m_(e,r,i),i};let xn=class extends _e{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return J`<button class="wcm-back-btn" @click="${et.goBack}">${ze.BACK_ICON}</button>`}actionBtnTemplate(){return J`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const t={"wcm-border":this.border},e=et.state.history.length>1,r=this.title?J`<wcm-text variant="big-bold">${this.title}</wcm-text>`:J`<slot></slot>`;return J`<header class="${$r(t)}">${e?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};xn.styles=[Re.globalCss,g_],Yi([pe()],xn.prototype,"title",2),Yi([pe()],xn.prototype,"onAction",2),Yi([pe()],xn.prototype,"actionIcon",2),Yi([pe({type:Boolean})],xn.prototype,"border",2),xn=Yi([Pe("wcm-modal-header")],xn);const ue={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(t,e){const r=t.renderRoot.querySelector(e);if(!r)throw new Error(`${e} not found`);return r},getWalletIcon({id:t,image_id:e}){const{walletImages:r}=Gt.state;return r!=null&&r[t]?r[t]:e?Wt.getWalletImageUrl(e):""},getWalletName(t,e=!1){return e&&t.length>8?`${t.substring(0,8)}..`:t},isMobileAnimation(){return window.innerWidth<=ue.MOBILE_BREAKPOINT},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,ne.wait(3e3)])},getErrorMessage(t){return t instanceof Error?t.message:"Unknown Error"},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},handleMobileLinking(t){const{walletConnectUri:e}=ht.state,{mobile:r,name:n}=t,i=r==null?void 0:r.native,s=r==null?void 0:r.universal;ue.setRecentWallet(t);function o(a){let c="";i?c=ne.formatUniversalUrl(i,a,n):s&&(c=ne.formatNativeUrl(s,a,n)),ne.openHref(c,"_self")}e&&o(e)},handleAndroidLinking(){const{walletConnectUri:t}=ht.state;t&&(ne.setWalletConnectAndroidDeepLink(t),ne.openHref(t,"_self"))},async handleUriCopy(){const{walletConnectUri:t}=ht.state;if(t)try{await navigator.clipboard.writeText(t),Ur.openToast("Link copied","success")}catch{Ur.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:t}=Gt.state,e=Object.values(t??{});return Object.values(e)},truncate(t,e=8){return t.length<=e?t:`${t.substring(0,4)}...${t.substring(t.length-4)}`},setRecentWallet(t){try{localStorage.setItem(ue.WCM_RECENT_WALLET_DATA,JSON.stringify(t))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const t=localStorage.getItem(ue.WCM_RECENT_WALLET_DATA);return t?JSON.parse(t):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(t,e){return t.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){ne.openHref(ue.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:t,mobile:e}=ne.getWalletRouterData(),r=!!(t!=null&&t.native),n=!!(t!=null&&t.universal),i=!!(e!=null&&e.native)||!!(e!=null&&e.universal);return{isDesktop:r,isMobile:i,isWeb:n}},goToConnectingView(t){et.setData({Wallet:t});const e=ne.isMobile(),{isDesktop:r,isWeb:n,isMobile:i}=ue.getCachedRouterWalletPlatforms();e?i?et.push("MobileConnecting"):n?et.push("WebConnecting"):et.push("InstallWallet"):r?et.push("DesktopConnecting"):n?et.push("WebConnecting"):i?et.push("MobileQrcodeConnecting"):et.push("InstallWallet")}},w_=Be`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var v_=Object.defineProperty,b_=Object.getOwnPropertyDescriptor,zc=(t,e,r,n)=>{for(var i=n>1?void 0:n?b_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&v_(e,r,i),i};let Ji=class extends _e{constructor(){super(),this.view=et.state.view,this.prevView=et.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=et.subscribe(t=>{this.view!==t.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([t])=>{const e=`${t.contentRect.height}px`;this.oldHeight!=="0px"&&Sn(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var t,e;(t=this.unsubscribe)==null||t.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return ue.getShadowRootElement(this,".wcm-router")}get contentEl(){return ue.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return J`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return J`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return J`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return J`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return J`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return J`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return J`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return J`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return J`<div>Not Found</div>`}}async onChangeRoute(){await Sn(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=et.state.view,Sn(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return J`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};Ji.styles=[Re.globalCss,w_],zc([qt()],Ji.prototype,"view",2),zc([qt()],Ji.prototype,"prevView",2),Ji=zc([Pe("wcm-modal-router")],Ji);const __=Be`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var E_=Object.defineProperty,S_=Object.getOwnPropertyDescriptor,zf=(t,e,r,n)=>{for(var i=n>1?void 0:n?S_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&E_(e,r,i),i};let Qs=class extends _e{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=Ur.subscribe(t=>{t.open?(this.open=!0,this.timeout=setTimeout(()=>Ur.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var t;(t=this.unsubscribe)==null||t.call(this),clearTimeout(this.timeout),Ur.closeToast()}render(){const{message:t,variant:e}=Ur.state,r={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?J`<div class="${$r(r)}">${e==="success"?ze.CHECKMARK_ICON:null} ${e==="error"?ze.CROSS_ICON:null}<wcm-text variant="small-regular">${t}</wcm-text></div>`:null}};Qs.styles=[Re.globalCss,__],zf([qt()],Qs.prototype,"open",2),Qs=zf([Pe("wcm-modal-toast")],Qs);const x_=.1,Wf=2.5,Tr=7;function Wc(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+x_}function D_(t,e){const r=Array.prototype.slice.call(Hi.create(t,{errorCorrectionLevel:e}).modules.data,0),n=Math.sqrt(r.length);return r.reduce((i,s,o)=>(o%n===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const C_={generate(t,e,r){const n="#141414",i="#ffffff",s=[],o=D_(t,"Q"),a=e/o.length,c=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];c.forEach(({x:b,y:_})=>{const I=(o.length-Tr)*a*b,A=(o.length-Tr)*a*_,v=.45;for(let S=0;S<c.length;S+=1){const y=a*(Tr-S*2);s.push(st`<rect fill="${S%2===0?n:i}" height="${y}" rx="${y*v}" ry="${y*v}" width="${y}" x="${I+a*S}" y="${A+a*S}">`)}});const d=Math.floor((r+25)/a),h=o.length/2-d/2,f=o.length/2+d/2-1,m=[];o.forEach((b,_)=>{b.forEach((I,A)=>{if(o[_][A]&&!(_<Tr&&A<Tr||_>o.length-(Tr+1)&&A<Tr||_<Tr&&A>o.length-(Tr+1))&&!(_>h&&_<f&&A>h&&A<f)){const v=_*a+a/2,S=A*a+a/2;m.push([v,S])}})});const w={};return m.forEach(([b,_])=>{w[b]?w[b].push(_):w[b]=[_]}),Object.entries(w).map(([b,_])=>{const I=_.filter(A=>_.every(v=>!Wc(A,v,a)));return[Number(b),I]}).forEach(([b,_])=>{_.forEach(I=>{s.push(st`<circle cx="${b}" cy="${I}" fill="${n}" r="${a/Wf}">`)})}),Object.entries(w).filter(([b,_])=>_.length>1).map(([b,_])=>{const I=_.filter(A=>_.some(v=>Wc(A,v,a)));return[Number(b),I]}).map(([b,_])=>{_.sort((A,v)=>A<v?-1:1);const I=[];for(const A of _){const v=I.find(S=>S.some(y=>Wc(A,y,a)));v?v.push(A):I.push([A])}return[b,I.map(A=>[A[0],A[A.length-1]])]}).forEach(([b,_])=>{_.forEach(([I,A])=>{s.push(st`<line x1="${b}" x2="${b}" y1="${I}" y2="${A}" stroke="${n}" stroke-width="${a/(Wf/2)}" stroke-linecap="round">`)})}),s}},O_=Be`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var I_=Object.defineProperty,A_=Object.getOwnPropertyDescriptor,ei=(t,e,r,n)=>{for(var i=n>1?void 0:n?A_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&I_(e,r,i),i};let Rr=class extends _e{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const t=Mr.state.themeMode==="light"?this.size:this.size-36;return st`<svg height="${t}" width="${t}">${C_.generate(this.uri,t,t/4)}</svg>`}render(){const t={"wcm-dark":Mr.state.themeMode==="dark"};return J`<div style="${`width: ${this.size}px`}" class="${$r(t)}">${this.walletId||this.imageUrl?J`<wcm-wallet-image walletId="${zt(this.walletId)}" imageId="${zt(this.imageId)}" imageUrl="${zt(this.imageUrl)}"></wcm-wallet-image>`:ze.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};Rr.styles=[Re.globalCss,O_],ei([pe()],Rr.prototype,"uri",2),ei([pe({type:Number})],Rr.prototype,"size",2),ei([pe()],Rr.prototype,"imageId",2),ei([pe()],Rr.prototype,"walletId",2),ei([pe()],Rr.prototype,"imageUrl",2),Rr=ei([Pe("wcm-qrcode")],Rr);const $_=Be`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var T_=Object.defineProperty,R_=Object.getOwnPropertyDescriptor,Hf=(t,e,r,n)=>{for(var i=n>1?void 0:n?R_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&T_(e,r,i),i};let eo=class extends _e{constructor(){super(...arguments),this.onChange=()=>null}render(){return J`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${ze.SEARCH_ICON}`}};eo.styles=[Re.globalCss,$_],Hf([pe()],eo.prototype,"onChange",2),eo=Hf([Pe("wcm-search-input")],eo);const P_=Be`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var N_=Object.defineProperty,L_=Object.getOwnPropertyDescriptor,M_=(t,e,r,n)=>{for(var i=n>1?void 0:n?L_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&N_(e,r,i),i};let Hc=class extends _e{render(){return J`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};Hc.styles=[Re.globalCss,P_],Hc=M_([Pe("wcm-spinner")],Hc);const U_=Be`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var F_=Object.defineProperty,j_=Object.getOwnPropertyDescriptor,Vc=(t,e,r,n)=>{for(var i=n>1?void 0:n?j_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&F_(e,r,i),i};let Zi=class extends _e{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const t={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return J`<span><slot class="${$r(t)}"></slot></span>`}};Zi.styles=[Re.globalCss,U_],Vc([pe()],Zi.prototype,"variant",2),Vc([pe()],Zi.prototype,"color",2),Zi=Vc([Pe("wcm-text")],Zi);const k_=Be`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var B_=Object.defineProperty,z_=Object.getOwnPropertyDescriptor,Kr=(t,e,r,n)=>{for(var i=n>1?void 0:n?z_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&B_(e,r,i),i};let Sr=class extends _e{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?J`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?J`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){ll.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var t;return J`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${zt(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(t=this.label)!=null?t:ue.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};Sr.styles=[Re.globalCss,k_],Kr([pe()],Sr.prototype,"onClick",2),Kr([pe()],Sr.prototype,"name",2),Kr([pe()],Sr.prototype,"walletId",2),Kr([pe()],Sr.prototype,"label",2),Kr([pe()],Sr.prototype,"imageId",2),Kr([pe({type:Boolean})],Sr.prototype,"installed",2),Kr([pe({type:Boolean})],Sr.prototype,"recent",2),Sr=Kr([Pe("wcm-wallet-button")],Sr);const W_=Be`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var H_=Object.defineProperty,V_=Object.getOwnPropertyDescriptor,to=(t,e,r,n)=>{for(var i=n>1?void 0:n?V_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&H_(e,r,i),i};let ti=class extends _e{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var t;const e=(t=this.imageUrl)!=null&&t.length?this.imageUrl:ue.getWalletIcon({id:this.walletId,image_id:this.imageId});return J`${e.length?J`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:ze.WALLET_PLACEHOLDER}`}};ti.styles=[Re.globalCss,W_],to([pe()],ti.prototype,"walletId",2),to([pe()],ti.prototype,"imageId",2),to([pe()],ti.prototype,"imageUrl",2),ti=to([Pe("wcm-wallet-image")],ti);var q_=Object.defineProperty,K_=Object.getOwnPropertyDescriptor,Vf=(t,e,r,n)=>{for(var i=n>1?void 0:n?K_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&q_(e,r,i),i};let qc=class extends _e{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(t){try{t!=null&&t.length&&await Promise.all(t.map(async e=>ue.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",t)}}async preloadListings(){if(Gt.state.enableExplorer){await Wt.getRecomendedWallets(),ht.setIsDataLoaded(!0);const{recomendedWallets:t}=Wt.state,e=t.map(r=>ue.getWalletIcon(r));await this.loadImages(e)}else ht.setIsDataLoaded(!0)}async preloadCustomImages(){const t=ue.getCustomImageUrls();await this.loadImages(t)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(t){console.error(t),Ur.openToast("Failed preloading","error")}}};Vf([qt()],qc.prototype,"preload",2),qc=Vf([Pe("wcm-explorer-context")],qc);var G_=Object.defineProperty,Y_=Object.getOwnPropertyDescriptor,J_=(t,e,r,n)=>{for(var i=n>1?void 0:n?Y_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&G_(e,r,i),i};let qf=class extends _e{constructor(){super(),this.unsubscribeTheme=void 0,Re.setTheme(),this.unsubscribeTheme=Mr.subscribe(Re.setTheme)}disconnectedCallback(){var t;(t=this.unsubscribeTheme)==null||t.call(this)}};qf=J_([Pe("wcm-theme-context")],qf);const Z_=Be`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var X_=Object.defineProperty,Q_=Object.getOwnPropertyDescriptor,e6=(t,e,r,n)=>{for(var i=n>1?void 0:n?Q_(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&X_(e,r,i),i};let Kc=class extends _e{onGoToQrcode(){et.push("Qrcode")}render(){const{recomendedWallets:t}=Wt.state,e=[...t,...t],r=ne.RECOMMENDED_WALLET_AMOUNT*2;return J`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${ze.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${ze.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((n,i)=>{const s=e[i%e.length];return s?J`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:ze.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${ue.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};Kc.styles=[Re.globalCss,Z_],Kc=e6([Pe("wcm-android-wallet-selection")],Kc);const t6=Be`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var r6=Object.defineProperty,n6=Object.getOwnPropertyDescriptor,ri=(t,e,r,n)=>{for(var i=n>1?void 0:n?n6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&r6(e,r,i),i};let Gr=class extends _e{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var t,e;const r=(e=(t=Mr.state.themeVariables)==null?void 0:t["--wcm-wallet-icon-large-border-radius"])!=null?e:Re.getPreset("--wcm-wallet-icon-large-border-radius");let n=0;r.includes("%")?n=88/100*parseInt(r,10):n=parseInt(r,10),n*=1.17;const i=317-n*1.57,s=425-n*1.8;return J`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${n}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${i}" stroke-dashoffset="${s}"></use></svg>`}render(){const t={"wcm-error":this.isError,"wcm-stale":this.isStale};return J`<div class="${$r(t)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${zt(this.walletId)}" imageId="${zt(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};Gr.styles=[Re.globalCss,t6],ri([pe()],Gr.prototype,"walletId",2),ri([pe()],Gr.prototype,"imageId",2),ri([pe({type:Boolean})],Gr.prototype,"isError",2),ri([pe({type:Boolean})],Gr.prototype,"isStale",2),ri([pe()],Gr.prototype,"label",2),Gr=ri([Pe("wcm-connector-waiting")],Gr);const ni={manualWallets(){var t,e;const{mobileWallets:r,desktopWallets:n}=Gt.state,i=(t=ni.recentWallet())==null?void 0:t.id,s=ne.isMobile()?r:n,o=s==null?void 0:s.filter(a=>i!==a.id);return(e=ne.isMobile()?o==null?void 0:o.map(({id:a,name:c,links:d})=>({id:a,name:c,mobile:d,links:d})):o==null?void 0:o.map(({id:a,name:c,links:d})=>({id:a,name:c,desktop:d,links:d})))!=null?e:[]},recentWallet(){return ue.getRecentWallet()},recomendedWallets(t=!1){var e;const r=t||(e=ni.recentWallet())==null?void 0:e.id,{recomendedWallets:n}=Wt.state;return n.filter(i=>r!==i.id)}},Yr={onConnecting(t){ue.goToConnectingView(t)},manualWalletsTemplate(){return ni.manualWallets().map(t=>J`<wcm-wallet-button walletId="${t.id}" name="${t.name}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(t=!1){return ni.recomendedWallets(t).map(e=>J`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recentWalletTemplate(){const t=ni.recentWallet();if(t)return J`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${zt(t.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`}},i6=Be`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var s6=Object.defineProperty,o6=Object.getOwnPropertyDescriptor,a6=(t,e,r,n)=>{for(var i=n>1?void 0:n?o6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&s6(e,r,i),i};let Gc=class extends _e{render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Gt.state,r=t!=="ALL"&&e,n=Yr.manualWalletsTemplate(),i=Yr.recomendedWalletsTemplate();let s=[Yr.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>4||r;let a=[];o?a=s.slice(0,3):a=s;const c=!!a.length;return J`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${ue.handleUriCopy}" .actionIcon="${ze.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${ze.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${ze.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${c?J`<wcm-modal-footer><div class="wcm-desktop-title">${ze.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${a} ${o?J`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};Gc.styles=[Re.globalCss,i6],Gc=a6([Pe("wcm-desktop-wallet-selection")],Gc);const c6=Be`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var l6=Object.defineProperty,u6=Object.getOwnPropertyDescriptor,h6=(t,e,r,n)=>{for(var i=n>1?void 0:n?u6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&l6(e,r,i),i};let Yc=class extends _e{render(){const{termsOfServiceUrl:t,privacyPolicyUrl:e}=Gt.state;return t??e?J`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${t?J`<a href="${t}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${t&&e?"and":null} ${e?J`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};Yc.styles=[Re.globalCss,c6],Yc=h6([Pe("wcm-legal-notice")],Yc);const d6=Be`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var f6=Object.defineProperty,p6=Object.getOwnPropertyDescriptor,g6=(t,e,r,n)=>{for(var i=n>1?void 0:n?p6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&f6(e,r,i),i};let Jc=class extends _e{onQrcode(){et.push("Qrcode")}render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Gt.state,r=t!=="ALL"&&e,n=Yr.manualWalletsTemplate(),i=Yr.recomendedWalletsTemplate();let s=[Yr.recentWalletTemplate(),...n,...i];s=s.filter(Boolean);const o=s.length>8||r;let a=[];o?a=s.slice(0,7):a=s;const c=!!a.length;return J`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${ze.QRCODE_ICON}"></wcm-modal-header>${c?J`<wcm-modal-content><div>${a} ${o?J`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};Jc.styles=[Re.globalCss,d6],Jc=g6([Pe("wcm-mobile-wallet-selection")],Jc);const m6=Be`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var y6=Object.defineProperty,w6=Object.getOwnPropertyDescriptor,Zc=(t,e,r,n)=>{for(var i=n>1?void 0:n?w6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&y6(e,r,i),i};let ii=class extends _e{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=nn.subscribe(t=>{t.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var t;(t=this.unsubscribeModal)==null||t.call(this)}get overlayEl(){return ue.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return ue.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(t){if(document.querySelector("body"))if(t){const e=document.getElementById("wcm-styles");e==null||e.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(t){t.target===t.currentTarget&&nn.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const t=ue.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,r=.2;await Promise.all([Sn(this.overlayEl,{opacity:[0,1]},{delay:e,duration:r}).finished,Sn(this.containerEl,t,{delay:e,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const t=ue.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([Sn(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,Sn(this.containerEl,t,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",t=>{var e;t.key==="Escape"?nn.close():t.key==="Tab"&&((e=t.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var t;(t=this.abortController)==null||t.abort(),this.abortController=void 0}render(){const t={"wcm-overlay":!0,"wcm-active":this.active};return J`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${$r(t)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?J`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};ii.styles=[Re.globalCss,m6],Zc([qt()],ii.prototype,"open",2),Zc([qt()],ii.prototype,"active",2),ii=Zc([Pe("wcm-modal")],ii);const v6=Be`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var b6=Object.defineProperty,_6=Object.getOwnPropertyDescriptor,Xi=(t,e,r,n)=>{for(var i=n>1?void 0:n?_6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&b6(e,r,i),i};let Dn=class extends _e{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){ne.isMobile()?et.replace("MobileConnecting"):et.replace("MobileQrcodeConnecting")}onDesktop(){et.replace("DesktopConnecting")}onWeb(){et.replace("WebConnecting")}render(){return J`<div>${this.isRetry?J`<slot></slot>`:null} ${this.isMobile?J`<wcm-button .onClick="${this.onMobile}" .iconLeft="${ze.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?J`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${ze.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?J`<wcm-button .onClick="${this.onWeb}" .iconLeft="${ze.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};Dn.styles=[Re.globalCss,v6],Xi([pe({type:Boolean})],Dn.prototype,"isMobile",2),Xi([pe({type:Boolean})],Dn.prototype,"isDesktop",2),Xi([pe({type:Boolean})],Dn.prototype,"isWeb",2),Xi([pe({type:Boolean})],Dn.prototype,"isRetry",2),Dn=Xi([Pe("wcm-platform-selection")],Dn);const E6=Be`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var S6=Object.defineProperty,x6=Object.getOwnPropertyDescriptor,D6=(t,e,r,n)=>{for(var i=n>1?void 0:n?x6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&S6(e,r,i),i};let Xc=class extends _e{onClick(){et.push("WalletExplorer")}render(){const{recomendedWallets:t}=Wt.state,e=ni.manualWallets(),r=[...t,...e].reverse().slice(0,4);return J`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(n=>{const i=ue.getWalletIcon(n);if(i)return J`<img crossorigin="anonymous" src="${i}">`;const s=ue.getWalletIcon({id:n.id});return s?J`<img crossorigin="anonymous" src="${s}">`:ze.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>ze.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};Xc.styles=[Re.globalCss,E6],Xc=D6([Pe("wcm-view-all-wallets-button")],Xc);const C6=Be`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var O6=Object.defineProperty,I6=Object.getOwnPropertyDescriptor,ro=(t,e,r,n)=>{for(var i=n>1?void 0:n?I6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&O6(e,r,i),i};let si=class extends _e{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:t}=ht.state;this.uri=t},0)}get overlayEl(){return ue.getShadowRootElement(this,".wcm-qr-container")}render(){return J`<div class="wcm-qr-container">${this.uri?J`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${zt(this.walletId)}" imageId="${zt(this.imageId)}"></wcm-qrcode>`:J`<wcm-spinner></wcm-spinner>`}</div>`}};si.styles=[Re.globalCss,C6],ro([pe()],si.prototype,"walletId",2),ro([pe()],si.prototype,"imageId",2),ro([qt()],si.prototype,"uri",2),si=ro([Pe("wcm-walletconnect-qr")],si);var A6=Object.defineProperty,$6=Object.getOwnPropertyDescriptor,T6=(t,e,r,n)=>{for(var i=n>1?void 0:n?$6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&A6(e,r,i),i};let Qc=class extends _e{viewTemplate(){return ne.isAndroid()?J`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:ne.isMobile()?J`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:J`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return J`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};Qc.styles=[Re.globalCss],Qc=T6([Pe("wcm-connect-wallet-view")],Qc);const R6=Be`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var P6=Object.defineProperty,N6=Object.getOwnPropertyDescriptor,Kf=(t,e,r,n)=>{for(var i=n>1?void 0:n?N6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&P6(e,r,i),i};let no=class extends _e{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(t){const{desktop:e,name:r}=ne.getWalletRouterData(),n=e==null?void 0:e.native;if(n){const i=ne.formatNativeUrl(n,t,r);ne.openHref(i,"_self")}}openDesktopApp(){const{walletConnectUri:t}=ht.state,e=ne.getWalletRouterData();ue.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ne.getWalletRouterData(),{isMobile:n,isWeb:i}=ue.getCachedRouterWalletPlatforms();return J`<wcm-modal-header title="${t}" .onAction="${ue.handleUriCopy}" .actionIcon="${ze.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${zt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${t} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isWeb="${i}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${ze.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};no.styles=[Re.globalCss,R6],Kf([qt()],no.prototype,"isError",2),no=Kf([Pe("wcm-desktop-connecting-view")],no);const L6=Be`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var M6=Object.defineProperty,U6=Object.getOwnPropertyDescriptor,F6=(t,e,r,n)=>{for(var i=n>1?void 0:n?U6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&M6(e,r,i),i};let el=class extends _e{onInstall(t){t&&ne.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,homepage:n}=ne.getWalletRouterData();return J`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${zt(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${t} to continue. If multiple browser extensions are installed, disable non ${t} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(n)}" .iconLeft="${ze.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};el.styles=[Re.globalCss,L6],el=F6([Pe("wcm-install-wallet-view")],el);const j6=Be`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var k6=Object.defineProperty,B6=Object.getOwnPropertyDescriptor,Gf=(t,e,r,n)=>{for(var i=n>1?void 0:n?B6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&k6(e,r,i),i};let io=class extends _e{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(t,e=!1){const{mobile:r,name:n}=ne.getWalletRouterData(),i=r==null?void 0:r.native,s=r==null?void 0:r.universal;if(i&&!e){const o=ne.formatNativeUrl(i,t,n);ne.openHref(o,"_self")}else if(s){const o=ne.formatUniversalUrl(s,t,n);ne.openHref(o,"_self")}}openMobileApp(t=!1){const{walletConnectUri:e}=ht.state,r=ne.getWalletRouterData();ue.setRecentWallet(r),e&&this.onFormatAndRedirect(e,t)}onGoToAppStore(t){t&&ne.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,app:n,mobile:i}=ne.getWalletRouterData(),{isWeb:s}=ue.getCachedRouterWalletPlatforms(),o=n==null?void 0:n.ios,a=i==null?void 0:i.universal;return J`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${zt(r)}" label="Tap 'Open' to continue…" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${ze.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?J`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${zt(r)}"></wcm-wallet-image><wcm-text>${`Get ${t}`}</wcm-text></div><wcm-button .iconRight="${ze.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};io.styles=[Re.globalCss,j6],Gf([qt()],io.prototype,"isError",2),io=Gf([Pe("wcm-mobile-connecting-view")],io);const z6=Be`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var W6=Object.defineProperty,H6=Object.getOwnPropertyDescriptor,V6=(t,e,r,n)=>{for(var i=n>1?void 0:n?H6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&W6(e,r,i),i};let tl=class extends _e{render(){const{name:t,id:e,image_id:r}=ne.getWalletRouterData(),{isDesktop:n,isWeb:i}=ue.getCachedRouterWalletPlatforms();return J`<wcm-modal-header title="${t}" .onAction="${ue.handleUriCopy}" .actionIcon="${ze.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${zt(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${t} app`}</wcm-text><wcm-platform-selection .isDesktop="${n}" .isWeb="${i}"></wcm-platform-selection></wcm-info-footer>`}};tl.styles=[Re.globalCss,z6],tl=V6([Pe("wcm-mobile-qr-connecting-view")],tl);var q6=Object.defineProperty,K6=Object.getOwnPropertyDescriptor,G6=(t,e,r,n)=>{for(var i=n>1?void 0:n?K6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&q6(e,r,i),i};let rl=class extends _e{render(){return J`<wcm-modal-header title="Scan the code" .onAction="${ue.handleUriCopy}" .actionIcon="${ze.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};rl.styles=[Re.globalCss],rl=G6([Pe("wcm-qrcode-view")],rl);const Y6=Be`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var J6=Object.defineProperty,Z6=Object.getOwnPropertyDescriptor,Qi=(t,e,r,n)=>{for(var i=n>1?void 0:n?Z6(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&J6(e,r,i),i};const nl=40;let Cn=class extends _e{constructor(){super(...arguments),this.loading=!Wt.state.wallets.listings.length,this.firstFetch=!Wt.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=ue.debounce(t=>{t.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=t,Wt.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),Wt.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect()}get placeholderEl(){return ue.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([t])=>{t.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:t,search:e}=Wt.state,{listings:r,total:n}=this.search?e:t;return n<=nl||r.length>=n}async fetchWallets(){var t;const{wallets:e,search:r}=Wt.state,{listings:n,total:i,page:s}=this.search?r:e;if(!this.endReached&&(this.firstFetch||i>nl&&n.length<i))try{this.loading=!0;const o=(t=ht.state.chains)==null?void 0:t.join(","),{listings:a}=await Wt.getWallets({page:this.firstFetch?1:s+1,entries:nl,search:this.search,version:2,chains:o}),c=a.map(d=>ue.getWalletIcon(d));await Promise.all([...c.map(async d=>ue.preloadImage(d)),ne.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),Ur.openToast(ue.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(t){ne.isAndroid()?ue.handleMobileLinking(t):ue.goToConnectingView(t)}onSearchChange(t){const{value:e}=t.target;this.searchDebounce(e)}render(){const{wallets:t,search:e}=Wt.state,{listings:r}=this.search?e:t,n=this.loading&&!r.length,i=this.search.length>=3;let s=Yr.manualWalletsTemplate(),o=Yr.recomendedWalletsTemplate(!0);i&&(s=s.filter(({values:d})=>ue.caseSafeIncludes(d[0],this.search)),o=o.filter(({values:d})=>ue.caseSafeIncludes(d[0],this.search)));const a=!this.loading&&!r.length&&!o.length,c={"wcm-loading":n,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return J`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${$r(c)}"><div class="wcm-grid">${n?null:s} ${n?null:o} ${n?null:r.map(d=>J`${d?J`<wcm-wallet-button imageId="${d.image_id}" name="${d.name}" walletId="${d.id}" .onClick="${()=>this.onConnect(d)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?J`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?J`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};Cn.styles=[Re.globalCss,Y6],Qi([qt()],Cn.prototype,"loading",2),Qi([qt()],Cn.prototype,"firstFetch",2),Qi([qt()],Cn.prototype,"search",2),Qi([qt()],Cn.prototype,"endReached",2),Cn=Qi([Pe("wcm-wallet-explorer-view")],Cn);const X6=Be`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var Q6=Object.defineProperty,eE=Object.getOwnPropertyDescriptor,Yf=(t,e,r,n)=>{for(var i=n>1?void 0:n?eE(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(i=(n?o(e,r,i):o(i))||i);return n&&i&&Q6(e,r,i),i};let so=class extends _e{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(t){const{desktop:e,name:r}=ne.getWalletRouterData(),n=e==null?void 0:e.universal;if(n){const i=ne.formatUniversalUrl(n,t,r);ne.openHref(i,"_blank")}}openWebWallet(){const{walletConnectUri:t}=ht.state,e=ne.getWalletRouterData();ue.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ne.getWalletRouterData(),{isMobile:n,isDesktop:i}=ue.getCachedRouterWalletPlatforms(),s=ne.isMobile();return J`<wcm-modal-header title="${t}" .onAction="${ue.handleUriCopy}" .actionIcon="${ze.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${zt(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${t} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${n}" .isDesktop="${s?!1:i}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${ze.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};so.styles=[Re.globalCss,X6],Yf([qt()],so.prototype,"isError",2),so=Yf([Pe("wcm-web-connecting-view")],so);const tE=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return ii},get WcmQrCode(){return Rr}},Symbol.toStringTag,{value:"Module"}));Ce.Asset=K2,Ce.AssetType=Md,Ce.DAI_ABI=Y2,Ce.DAI_ADDRESS=G2,Ce.PuzzleWalletProvider=i2,Ce.PuzzleWeb3Modal=n2,Ce.RECORDS_PER_PAGE=B2,Ce.fromBaseUnits=Ld,Ce.getFormattedRecordPlaintext=z2,Ce.projectId=fd,Ce.shortenAddress=Za,Ce.signClient_puzzleProps=r2,Ce.toBaseUnits=V2,Ce.useAccount=A2,Ce.useBalance=$2,Ce.useConnect=T2,Ce.useDecrypt=R2,Ce.useDeployProgram=P2,Ce.useDisconnect=F2,Ce.useExecuteProgram=j2,Ce.useInitWallet=Nd,Ce.usePuzzleFees=k2,Ce.useRecords=W2,Ce.useTransferCredits=H2,Ce.walletURL=Aa,Ce.wc_aleo_chains=Ts,Ce.wc_aleo_methods=Ia,Ce.wc_aztec_chains=Oa,Ce.wc_aztec_methods=dd,Ce.wc_events=Rs,Ce.web3modal_puzzle_props=pd,Object.defineProperty(Ce,Symbol.toStringTag,{value:"Module"})});
